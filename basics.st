; States file for Parasite -- Basics
;
;-------------- Generated by Fighter Factory -------------
;--------------------- Variable List ----------------------
; Var(0) - StateDef 5300
; Var(1) - StateDef 760,761 (flight)
; Var(2) - StateDef 2000, 2001 (stolen power button choice: W/M/S)
; Var(3) - StateDef -3
; Var(4) - StateDef 761
; Var(6) - Statedef 2100 (kryptonite ray color selection)
; Var(7) - StateDef 2572
; Var(8) - StateDef 2640 (deadpool taunt selection)
; Var(9) - StateDef 2775, 3770 (Omega Red spore unlock)
; Var(10) - StateDef 2572, 3075, 3079, -2
; Var(13) - StateDef 3730, -2 (Elektra Ninjitsu timer)
; Var(15) - StateDef 3641, 3645
; Var(16) - StateDef 40, 45, 699
; Var(17) - StateDef 2190, 2191, 2670, 2671, -3
; Var(18) - StateDef -3
; Var(20) - StateDef 3062
; Var(48) - StateDef -3
; Var(49) - StateDef 1000, 1001, 1011, 1012, 3611 - Feeding Time slot determiner (50=slot 1, 51=slot 2)
; Var(50) - StateDef 5900 - Power Set slot #1
; Var(51) - StateDef 5900 - Power Set slot #2
;--------------------- Float Variable List ----------------------
; fVar(0) - StateDef 2980
; fVar(2) - StateDef 2111, 3055, 3132
; fVar(3) - StateDef 3055, 3132, 3601
;
;---------------------------------------------------------------------------
; Vars:
; Var(1) - CMD file
;   for AI activation
; Var(2) - StateDef 2000, 2001
; Var(7) - StateDef 2572
; Var(10) - StateDef 2572, 3075, 3079, -2
; Var(15) - StateDef 3655
; Var(16) - AirJump counter
; Var(17) - invisiblility trigger
; Var(20) - StateDef 3062
;
; Floats:
; fVar(2) - StateDef 2111, 3055
; fVar(3) - StateDef 3055
;
; Helpers:
;   0: superjump opponent position indicator
;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
; Lose (on timeover)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170,0]
type = PlaySnd
trigger1 = !Time
value = 9,4
channel = 0

[State 170,1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver


;---------------------------------------------------------------------------
; Draw game (on timeover)
[Statedef 175]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 170,0]
type = PlaySnd
trigger1 = !Time
value = 9,4
channel = 0

[State 175,1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver


;---------------------------------------------------------------------------
; Lose/Draw (custom for clones/shadows)
[Statedef 179]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 179,1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver


;---------------------------------------------------------------------------
; Winposes
[Statedef 180]  ; winpose selector
type = S
ctrl = 0
velset = 0,0

; clone / shadow winpose is always 181
[State 180,Winpose decider]
type = ChangeState
trigger1 = IsHelper
value = 181

; custom win vs Darkseid
[State 180, WinVsDarkseid]
type = ChangeState
trigger1 = var(47) = 11     ; P2 = Darkseid
trigger2 = (var(50) = 11) || (var(51) = 11)
value = 981

; custom win vs GLs
[State 180, WinVsGLs]
type = ChangeState
trigger1 = var(47) = 5  ; P2 = any of the GLs
value = 982

[State 180,Winpose decider]
type = ChangeState
trigger1 = Time = 1
value = 181 + ((Random * 2) / 1000)


;-----------------------
; Winpose 1 - "What a waste of my time!"
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 180, 0]
type = PlaySnd
triggerall = !IsHelper
trigger1 = Time = 6
value = 6,0
channel = 0

[State 180, 1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = roundnotover

;-----------------------
; Winpose 2 - "Now *I'm* the guy with all the power!"
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, 0]
type = PlaySnd
trigger1 = Time = 6
value = 6,1
channel = 0

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 82
ID = 82
pos = -38,-58
postype = p1
bindtime = 1
removetime = -1
sprpriority = 1

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 83
ID = 83
pos = 4,-152
postype = p1
bindtime = 1
removetime = -1
sprpriority = 1

[State 180, 1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = roundnotover

;-----------------------
; Custom Winpose vs Darkseid
[Statedef 981]
type = S
ctrl = 0
anim = 981
velset = 0,0

[State 180, 0]
type = PlaySnd
trigger1 = Time = 6
value = 95,11
channel = 0

[State 180, 1]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = roundnotover

;-----------------------
; Custom Winpose vs GLs
[Statedef 982]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 180, 0]
type = PlaySnd
trigger1 = Time = 6
value = 95,12
channel = 0

[State 180, 1]
type = AssertSpecial
trigger1 = Time = [0,320]
flag = roundnotover


;---------------------------------------------------------------------------
; Intros
[Statedef 190]  ; intro selector
type = S
ctrl = 0
velset = 0,0

[State 190, vs Superman]
type = ChangeState
trigger1 = P2Name = "Superman"
value = 991

[State 190, vs Parasite]
type = ChangeState
trigger1 = P2Name = "Parasite"
value = 992

[State 190, food intro decider]
type = ChangeState
trigger1 = var(47) > 0 && random < 500
value = 192

[State 190, default intro]
type = ChangeState
trigger1 = var(47) = 0 || random >= 500
value = 191


;-----------------------
; Intro 1 - "You're barely an appetizer"
[Statedef 191]
type = S
ctrl = 0
anim = 191

[State 191, 1]
type = PlaySnd
trigger1 = Time = 25
value = 5,0
channel = 0

[State 191, 2]
type = AssertSpecial
trigger1 = Time = [0,70]
flag = intro
flag2 = nobardisplay

[State 191, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 191 && AnimTime = 0
value = 0


;-----------------------
; Intro 2 - "Oooh, yummy!" (food thought bubble)
[Statedef 192]
type = S
ctrl = 0
anim = 192

[State 192, 1]
type = PlaySnd
trigger1 = !Time
value = 5,1
channel = 0

[State 192, 2]
type = AssertSpecial
trigger1 = Time = [0,120]
flag = intro
flag2 = nobardisplay

[State 192, bubble explod]
type = Explod
trigger1 = !Time
anim = 92
ID = 92
;facing = -1
sprpriority = 0
ownpal = 1

[State 192, face explod]
type = Explod
trigger1 = Time = 8
anim = 800 + var(47)
ID = 992
pos = IfElse(facing=1,3,72), -171
bindtime = 94
removetime = 94
facing = facing
postype = p1
sprpriority = 1
ownpal = 1

[State 192, food explod]
type = Explod
trigger1 = Time = 8
anim = 992 + (Random/250)
ID = 992
pos = IfElse(facing=1,0,76), 0
bindtime = 94
removetime = 94
facing = facing
postype = p1
sprpriority = 1
ownpal = 1

[State 192, ChangeAnim]
type = ChangeAnim
trigger1 = !AnimTime
value = 0


;-----------------------
; Intro (vs. Superman) "Man of Steel? You ain't nothin'!"
[Statedef 991]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 991, 0]
type = PlaySnd
trigger1 = Time = 1
value = 90,1
channel = 0

[State 991, 1]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = intro
flag2 = nobardisplay


;-----------------------
; Intro (vs. Parasite) "Heh."
[Statedef 992]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 992, 0]
type = PlaySnd
trigger1 = Time = 1
value = 9,4
channel = 0

[State 992, 1]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = intro
flag2 = nobardisplay



;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0

[State 195, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0
channel = 0

[State 195, 2]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = NoAutoTurn

; reload power sets (debug feature)
[State 5900, powerReset]
type = VarSet
trigger1 = !Time
v = 50
value = var(50) + 1 ;((Random * 25) / 1000) + 1

[State 5900, powerReset]
type = VarSet
trigger1 = !Time
v = 51
value = var(51) + 1 ;((Random * 26) / 1000) + 51

[State 195, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
[StateDef 210]
anim = 210
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 20

[State 210, swoosh]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 210, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,0
channel = 0

[State 210, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 20
guardflag = MA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,-50
sparkno = S9990
animtype = Light
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-3

[State 210, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Kick
[StateDef 220]
anim = 220
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 5

[State 220, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 220, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 220, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 10
guardflag = MAFD
pausetime = 6,6
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,-10
sparkno = S9990
animtype = Light
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-3

[State 220, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Medium Punch
[StateDef 230]
anim = 230
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 45

[State 230, swoosh]
type = PlaySnd
trigger1 = Time = 0
value = 0,1

[State 230, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,1
channel = 0

[State 230, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 45
guardflag = MA
pausetime = 9,9
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,-75
sparkno = S9991
animtype = Medium
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -5
air.velocity = -3,-6

[State 230, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Medium Kick
[StateDef 240]
anim = 240
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 10

[State 240, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 240, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 240, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 25
guardflag = MA
pausetime = 9,9
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9991
animtype = Medium
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -5
air.velocity = -3,-6

[State 240, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Hard Punch
[StateDef 250]
anim = 250
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 65

[State 250, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 250, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 250, HitDef]
type = HitDef
trigger1 = Time = 1
attr = S, NA
damage = 25
guardflag = MA
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8

[State 250, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Hard Kick
[StateDef 260]
anim = 260
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 25

[State 260, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 260, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 260, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 35
guardflag = MA
pausetime = 6,6
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 20
ground.velocity = -7
guard.velocity = -4
air.velocity = -4,-8

[State 260, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Standing throw 1
[StateDef 300]
anim = 300
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 50

[State 300, 0]
type = HitDef
trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 302
p2stateno = 303

[State 300, missed]
type = ChangeState
trigger1 = AnimTime = 0
value = 301
ctrl = 1



;-------------------------------------------
; Throw 1 (missed / blocked)
[StateDef 301]
anim = 301
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 301, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------
; Throw 1 (successfully grabbed P2)
[StateDef 302]
anim = 302
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 302, snd0]
type = PlaySnd
trigger1 = Time = 0
persistent = 0
value = 3,1

[State 302, snd1]
type = PlaySnd
trigger1 = Time = 1
persistent = 0
value = 9,1

[State 302, lifeadd]
type = LifeAdd
trigger1 = Alive
value = 1
kill = 1

[State 302, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 100,-130

[State 302, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -25,-140

[State 302, Bind 3]
type =  TargetBind
trigger1 = AnimElem = 3
pos = -65,-90

[State 302, targetdrop]
type = TargetDrop
trigger1 = AnimElemTime(3) = 1

[State 302, turn]
type = Turn
trigger1 = AnimTime = 0   ;-1

[State 302, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------
; Throw 1 - drained & tossed (p2 custom hit state)
[StateDef 303]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

;Generated by Fighter Factory PalFX Editor
[State 303, PalFXWiz1]
type = PalFX
trigger1 = Time = 0
time = 22
add = 0,-200,0
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 1
color = 0

[State 303, lifeadd]
type = LifeAdd
trigger1 = Alive
value = -1
kill = 1

[State 303, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 303

[State 303, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 303, 2] ; tossed
type = ChangeState
trigger1 = AnimTime = 0
value = 304


;-------------------------------------------
; Throw 1 - Being dropped (p2 custom hit state)
[StateDef 304]
type = A
movetype = H
physics = A
ctrl = 0
velset = 5,12

[State 304, Turn]
type = Turn
trigger1 = Time = 0

[State 304, 2] ;dropped
type = SelfState
trigger1 = Time = 0
value = 5050



;---------------------------------------------------------------------------
; Crouch Light Punch
[StateDef 410]
anim = 410
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 20

[State 410, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 410, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 410, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 20
guardflag = L
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,-60
sparkno = S9990
animtype = Light
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3
guard.velocity = -2
air.velocity = -3,-6

[State 410, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Light Kick
[StateDef 420]
anim = 420
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 5

[State 420, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,0

[State 420, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 420, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = 15
guardflag = L
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,0
sparkno = S9990
animtype = Light
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -2
guard.velocity = -1
air.velocity = -2,-3

[State 420, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Medium Punch
[StateDef 430]
anim = 430
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 45

[State 430, swoosh]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,1

[State 430, grunt]
type = PlaySnd
trigger1 = !Time
value = 1,1
channel = 0

[State 430, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 45
guardflag = L
pausetime = 9,9
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9991
animtype = Medium
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8
guard.velocity = -10
air.velocity = -3,-6

[State 430, 1]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Medium Kick
[StateDef 440]
anim = 420 ; 440
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 10

[State 440, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 440, grunt]
type = PlaySnd
trigger1 = !Time
value = 1,1
channel = 0

[State 440, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4

[State 440, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = 30
guardflag = L
pausetime = 9,9
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,0
sparkno = S9991
animtype = Medium
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -3
air.velocity = -3,-6

[State 440, 1]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Hard Punch
[StateDef 450]
anim = 450
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 65

[State 450, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,2

[State 450, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 450, hitdef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage = 45
guardflag = L
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
priority = 6,Hit
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 0,-13
guard.velocity = -6
air.velocity = -1,-14
air.juggle = 8
fall = 1
down.bounce = 1

[State 450, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Hard Kick
[StateDef 460]
anim = 460
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 25

[State 460, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 460, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 460, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MD
damage = 60
guardflag = L
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-50
sparkno = S9992
animtype = DiagUp
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-5
guard.velocity = -4

[State 460, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; Air Light Punch
[StateDef 610]
anim = 610
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 20

[State 610, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 610, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,0
channel = 0

[State 610, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 20
guardflag = HA
pausetime = 6,8
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9990
animtype = Light
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 610, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1

;---------------------------------------------------------------------------
; Air Light Kick
[StateDef 620]
anim = 620
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 10

[State 620, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 620, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,0
channel = 0

[State 620, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 10
guardflag = HA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkxy = 0,-10
sparkno = S9990
animtype = Light
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 620, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1

;---------------------------------------------------------------------------
; Air Medium Punch
[StateDef 630]
anim = 630
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 45

[State 630, swoosh]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,1

[State 630, grunt]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,1
channel = 0

[State 630, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 45
guardflag = HA
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9991
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 630, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1


;---------------------------------------------------------------------------
; Air Medium Kick
[StateDef 640]
anim = 640
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 20

[State 640, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 640, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,1
channel = 0

[State 640, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 30
guardflag = HA
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkxy = 0,-10
sparkno = S9991
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 640, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1


;---------------------------------------------------------------------------
; Air Hard Punch
[StateDef 650]
anim = 650
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 65

[State 650, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 650, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 650, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 65
guardflag = HA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 650, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1


;---------------------------------------------------------------------------
; Air Hard Kick
[StateDef 660]
anim = 660
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 25

[State 660, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 660, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 660, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 50
guardflag = HA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-10
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
guard.velocity = -7
air.velocity = -2,-3

[State 660, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 948
ctrl = 1


;---------------------------------------------------------------------------
; Flight mode
; code adapted from Kuzu-bei's tutorial on Necromancer's code archive:
;  http://xgargoyle.mgbr.net/
[Statedef 760]
type = A
movetype = I
physics = S
ctrl = 0
anim = 760
velset = 0,0

[State 760, PosAdd]
type = PosAdd
trigger1 = Time >= 5
y = -2

[State 760, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA
slot = 0
stateno = -1
time = 1
forceair = 1

[State 760, Fly]
type = ChangeState
trigger1 = AnimTime = 0
value = 761
ctrl = 1

;-----------------------
;in-flight state
[Statedef 761]
type = A
movetype = I
physics = N
ctrl = 0
anim = 761

;Creates a guarding ability.
[State 761, Guard]
type = ChangeState
triggerall = P2MoveType = A
triggerall = P2BodyDist X <= 120
trigger1 = command = "holdback"
value = 130

;When no directional keys are pressed, the character stays in place.
[State 761, Stop1]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Var(1) = 0
trigger2 = Pos Y < -200
x = 0
y = 0

;Animation of character when no directional keys are pressed.
[State 761, Stop2]
type = ChangeAnim
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Anim != 761 ;*** ; Flight animation (neutral)
value = 761 ;*** ; Flight animation (neutral)

;Sets Var(4) to a value of 1, when the value is currently 2.
[State 761, VarSet1]
type = Null ;VarSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Var(1) != 2
trigger2 = Var(1) = 2
trigger2 = Vel Y >= 2.4
v = 4
value = 1

;Sets var(4) to a value of 2, when the value is currently 1.
[State 761, VarSet2]
type = Null ;VarSet
triggerall = Var(1) = 1
trigger1 = Vel Y <= -2.4
trigger2 = P2BodyDist Y > 400
trigger2 = Vel Y < 0
v = 4
value = 2

;When Var(4) has a value of 1, the character will float up.
[State 761, VelAdd1]
type = Null ;VelAdd
trigger1 = Var(4) = 1
y = -0.3

;When Var(4) has a value of 2, the character will float down.
[State 761, VelAdd2]
type = Null ;VelAdd
trigger1 = Var(4) = 2
y = 0.3

;When any directional keys are pressed, the float effect stops.
[State 761, VelSetY]
type = Null ;VelSet
triggerall = Var(4) != 0
trigger1 = command = "holdfwd"
trigger2 = command = "holdback"
trigger3 = command = "holdup"
trigger4 = command = "holddown"
y = 0

;When any directional keys are pressed, variables will be inactive.
[State 761, VarSetEnd]
type = Null ;VarSet
trigger1 = command = "holdfwd"
trigger2 = command = "holdback"
trigger3 = command = "holdup"
trigger4 = command = "holddown"
v = 4
value = 0

;Border to fly.
[State 761, UpBorder1]
type = PosSet
trigger1 = Pos Y < -200
y = -180

;etc...
[State 761, UpBorder2a]
type = PosAdd
trigger1 = P2BodyDist Y > 201
trigger1 = Vel Y < 0
y = 1

;etc...
[State 761, UpBorder2b]
type = VelSet
trigger1 = P2BodyDist Y > 200
trigger1 = Vel Y < 0
y = 0

;Dash forward.
[State 761, RunFwd]
type = VelSet
trigger1 = Command = "FF"
trigger1 = Vel X < 9
x = 9

;Dash backwards.
[State 761, RunBack]
type = VelSet
trigger1 = Command = "BB"
trigger1 = Vel X > -8.6
x = -8.6

;Dash downwards.
[State 761, RunDown]
type = VelSet
trigger1 = Command = "DD"
trigger1 = Vel Y < 8.6
y = 8.6

;Dash upwards.
[State 761, RunUp]
type = VelSet
trigger1 = Command = "UU"
trigger1 = Vel Y > -8.6
y = -8.6

;Moves the character downwards.
[State 761, GoDown1]
type = VelAdd
trigger1 = command = "holddown"
y = 0.5

;etc...
[State 761, GoDown2]
type = VelSet
trigger1 = command = "holddown"
trigger1 = Vel Y < 0
y = 0

;Moves the character upwards.
[State 761, GoUp1]
type = VelAdd
trigger1 = command = "holdup"
y = -0.4

;etc...
[State 761, GoUp2]
type = VelSet
trigger1 = command = "holdup"
trigger1 = Vel Y > 0
y = 0

;Animation of flying up.
[State 761, GoUpAnim]
type = null ;ChangeAnim
trigger1 = Anim != 761 ;*** ; Fly up animation
trigger1 = command = "holdup"
trigger2 = Anim != 761 ;*** ; Fly up animation
trigger2 = command = "holddown"
value = 761 ;*** ; Fly up animation

;Moves the character backwards.
[State 761, GoBack1]
type = VelAdd
trigger1 = command = "holdback"
x = -0.4

;etc...
[State 761,GoBack2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = Vel X > 0
x = 0

;Animation of flying backwards.
[State 761, GoBackAnim]
type = ChangeAnim
trigger1 = Anim != 761 ;*** ; Fly back animation
trigger1 = command = "holdback"
value = 105

;Moves the character forward.
[State 761, GoFwd1]
type = VelAdd
trigger1 = command = "holdfwd"
x = 0.5

;etc...
[State 761,GoFwd2]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = Vel X < 0
x = 0

;Animation of flying forward.
[State 761, GoFwdAnim]
type = ChangeAnim
trigger1 = Anim != 761 ;*** ; Fly forward animation
trigger1 = command = "holdfwd"
value = 100

;Character will turn around if the opponent is behind him/her.
[State 761, Turn]
type = Turn
trigger1 = P2Dist X < 0

;Lands on the ground if character touches the ground.
[State 761, Land1]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

;Ends the flying action if the round is over.
[State 761, RoundEnd]
type = ChangeState
trigger1 = Win
trigger2 = Lose
trigger3 = command = "flight"
value = 948


;-----------------------
; Safe fall (from superjump, or jumping attack)
[StateDef 948]
type = A
movetype = I
physics = A
ctrl = 1

; neutral
[State 948, ChangeAnim]
type = ChangeAnim
trigger1 = (Time = 0) && (Vel X = 0)
value = 48

; forwards
[State 948, ChangeAnim]
type = ChangeAnim
trigger1 = (Time = 0) && (Vel X > 0)
value = 49

; backwards
[State 948, ChangeAnim]
type = ChangeAnim
trigger1 = (Time = 0) && (Vel X < 0)
value = 50


;-----------------------
;  DCvM Template Files
;      provided by
;       Buyog2099
;(based on MEE template
;  by Kitsune Sniper)
;         ***
;   Thanks, Kitsune!
;-----------------------
