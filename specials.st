; States file for Parasite -- Specials
;
;-------------- Generated by Fighter Factory -------------
;--------------------- Variable List ----------------------
; Var(0) - StateDef 5300
; Var(1) - StateDef 760,761 (flight)
; Var(2) - StateDef 2000, 2001 (stolen power button choice: W/M/S)
; Var(3) - StateDef -3
; Var(4) - StateDef 761
; Var(6) - Statedef 2100 (kryptonite ray color selection)
; Var(7) - StateDef 2572
; Var(8) - StateDef 2640 (deadpool taunt selection)
; Var(9) - StateDef 2775, 3770 (Omega Red spore unlock)
; Var(10) - StateDef 2572, 3075, 3079, -2
; Var(13) - StateDef 3730, -2 (Elektra Ninjitsu timer)
; Var(15) - StateDef 3641, 3645
; Var(16) - StateDef 40, 45, 699
; Var(17) - StateDef 2190, 2191, 2670, 2671, -3
; Var(18) - StateDef -3
; Var(20) - StateDef 3062
; Var(21) - StateDef 2580-2589 (Berserker Barrage loop counter)
; Var(48) - StateDef -3
; Var(49) - StateDef 1000, 1001, 1011, 1012, 3611 - Feeding Time slot determiner (50=slot 1, 51=slot 2)
; Var(50) - StateDef 5900 - Power Set slot #1
; Var(51) - StateDef 5900 - Power Set slot #2
;--------------------- Float Variable List ----------------------
; fVar(0) - StateDef 2990
; fVar(2) - StateDef 2111, 3055, 3132
; fVar(3) - StateDef 3055, 3132, 3601
;
;---------------------------------------------------------------------------
; States in this file:
;
; Feeding Time/Slot 1 (D,DB,B + P) -- state 1000
; Feeding Time/Slot 2 (D,DB,B + K) -- state 1001
; Projectile Absorption (WP+WK) -- state 1200-1230
; Feeding Frenzy (WP+HK / HP+WK) -- states 1300-1380 (air)
; Stolen Special - Slot 1 (D,DF,F + P) - state 2000
; Stolen Special - Slot 2 (D,DF,F + K) - state 2001
;
;----------------------------
; DC POWER SETS
;01 - Superman: HEAT VISION (2010-2011)
;02 - Batman: BAT UPPERCUT (2020)
;03 - Wonder Woman: FIERCE AMAZON (2030-2035)
;04 - Flash: SUPERSPEED PUNCH (2040-2041)
;05 - GL: RING STRIKE (2050-2059)
;06 - Ice: ICICLE EDGE (2060-2065)
;07 - Lobo: Rotgut (2070-?)
;08 - Plastic Man: Stone Fists (2080-?)
;09 - Etrigan: FLAMING CHARGE (2090-2095)
;10 - Lex Luthor: KRYPTONITE RAY (2100-2105, 7670-7672)
;11 - Darkseid: OMEGA BLAST (2110-2111)
;12 - Superboy: TK LIFT (2120-2121)
;13 - Sinestro: RAVENOUS BEAM (2130-2139)
;14 - Bizarro: ICE VISION (2140-2141)
;15 - Aquaman: SONIC WAVE (2150)
;16 - Doomsday: Adaptive Evolution (2160-?)
;17 - Poison Ivy: TOXIC KISS (2170-2172, 7675)
;18 - The Atom: SUBATOMIC (2180-?)
;19 - Martian Manhunter: INTANGIBILITY (2190-2191)
;20 - Shazam/Captain Marvel: Electric Charge (2200-?)
;21 - Starfire: STAR SPHERE (2210-2215)
;22 - Bane: Charging Fist (2220-?)
;23 - Eradicator: FLYING PUNCH (2230-2235)
;24 - Vixen: ELECTRIC EEL (2240)
;25 - Mongul: Earthquake (2250-?)
;26 - Red Lantern (Atrocitus): PLASMA VOMIT (2260-2265)
;27 - Agent Orange (Larfleeze): SELFISH GRAB (2270)
;28 - Indigo Lantern: TELEPORT (2280)
;29 - Star Sapphire: STASIS CRYSTAL (2290-2295)
;30 - Black Lantern: CORRUPTING TOUCH (2300-2304)
;31-50:(open)
;----------------------------
; MARVEL POWER SETS
;51 - Captain America: STARS-N-STRIPES (2510)
;52 - Savage Hulk: GAMMA CHARGE (2520)
;53 - Thor: THUNDERSTRIKE (2530-2535, 17696-17697)
;54 - Spider-Man: WEB BALL (2540-2545)
;55 - Iron Man: UNIBEAM (2550-2555)
;56 - Crystal: BUBBLE TRAP (2560-2565)
;57 - Sandman: SAND BLAST (2570-2572)
;58 - Wolverine: BERSERKER BARRAGE (2580-2589)
;59 - Carnage: SYMBIOTE SHARDS (2590-2592)
;60 - Dr. Doom: TELEPORT (2600)
;61 - Ghost Rider: FLAME BREATH (2610-2615)
;62 - Strong Guy: PINHEAD (2620)
;63 - Thanos: FIRE STOMP (2630-2635)
;64 - Deadpool: HEALING TAUNT (2640)
;65 - Juggernaut: EARTHQUAKE (2650-2655)
;66 - Mr. Fantastic: ELASTIC SLAM (2660-2664)
;67 - Invisible Woman: INVISIBILITY (2670)
;68 - The Thing: YANCY ST SPECIAL (2680)
;69 - Human Torch: FIREBALL (2690-2695)
;70 - Silver Surfer: POWER COSMIC (2700-2705)
;71 - Venom: Venom Fang (2710-?
;72 - Cyclops: CYCLONE KICK (2720)
;73 - Elektra: NERVE STRIKE (2730-2732, 5300)
;74 - Nightcrawler: TELEPORT (2740)
;75 - Marrow: BONERANG (2750)
;76 - Songbird: DECIBEL BARRAGE (2760-2762)
;77 - Omega Red: DEADLY SPORES (2770-2775)
;78 - Rhino: RHINO CHARGE (2780)
;79 - Iceman: ICE BOULDER (2790)
;80 - Storm: TYPHOON (2800)
;81 - Namor: 
;82-89: (open)
;90 - Daredevil: Hightened Senses (2900-
;91 - Miss Marvel: Solar Orb
;92-98: (open)
;99 - Spiral: MIRROR DANCE (2990-2992)
;----------------------------


;---------------------------------------------------------------------------
; Feeding Time (Slot 1 - Punches)
[StateDef 1000]
type = S
movetype = A
physics = S
anim = 1000
ctrl = 0
velset = 0,0

[State 1000, dust]
type = Explod
trigger1 = Time = 0
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 1000, snd0]
type = PlaySnd
trigger1 = Time = 0
persistent = 0
value = 9,3
channel = 0

[State 1000, varset]
type = VarSet
trigger1 = Time = 0
v = 49
value = 50

[State 1000, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 16

[State 1000, 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sparkxy = 0,-50
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 0              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 1012
p2stateno = 1013

[State 1000, missed]
type = ChangeState
trigger1 = !AnimTime
trigger2 = (AnimElem = 2) && (Vel X < 1)
value = 1011
ctrl = 1


;-----------------------------------------------------------------------------------
; Feeding Time (Slot 2 - Kicks)
[StateDef 1001]
type = S
movetype = A
physics = S
anim = 1000
ctrl = 0
velset = 0,0

[State 1000, dust]
type = Explod
trigger1 = Time = 0
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 1001, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
persistent = 0
value = S9,3
channel = 0

[State 1001, varset]
type = VarSet
trigger1 = Time = 0
v = 49
value = 51

[State 1001, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 16

[State 1001, 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sparkxy = 0,-50
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 0              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 1012
p2stateno = 1013

[State 1001, missed]
type = ChangeState
trigger1 = !AnimTime
trigger2 = (AnimElem = 2) && (Vel X < 1)
value = 1011
ctrl = 1


;-----------------------------------------------------------------------------------
; Feeding Time (missed / blocked)
[StateDef 1011]
type = S
movetype = I
physics = S
anim = 1011
ctrl = 0
velset = 0,0

[State 1011, varset]
type = VarSet
trigger1 = !Time
v = 49
value = 0

[State 1011, snd0]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 9,6
channel = 0

[State 1011, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-----------------------------------------------------------------------------------
; Feeding time (successfully grabbed P2)
[StateDef 1012]
type = S
movetype = A
physics = S
anim = 1012
ctrl = 0
velset = 0,0

[State 1012, absorb explod]
type = Explod
trigger1 = !Time
anim = 1015
ID = 1015
facing = 1
bindtime = -1
removetime = 60
sprpriority = 2
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
trigger1 = Time = 60
time = 30
add = 0,-200,-200
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 1
color = 0

[State 1012, snd1]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 1012, snd2]
type = PlaySnd
trigger1 = Time = 1
persistent = 0
value = 9,1

[State 1012, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 100,-130

[State 1012, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -25,-140

[State 1012, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -85,-15

[State 1012, targetdrop]
type = TargetDrop
trigger1 =  AnimElem = 3

[State 1012, turn]
type = Turn
trigger1 = !AnimTime


;--------------------------------
; DC power sets
;--------------------------------
[State 1012, stealFromDCTemplate]
type = VarSet
triggerall = (NumTarget > 0) && (AnimElem = 2)
trigger1 = target, Name = "DC Template"
v = var(49)
value = ((Random * 29) / 1000) + 1  ; random DC powerset (currently ranges from 1 to 30)

; from another Parasite: steals whatever power the other Rudy has in that slot already. >:}
[State 1012, stealFromParasite]
type = VarSet
triggerall = (NumTarget > 0) && (AnimElem = 2)
trigger1 = target, Name = "Parasite"
v = var(49)
value = target, var(var(49))

[State 1012, Superman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 1) && (AnimElem = 2)
trigger1 = (target, Name = "Superman") && (target, PalNo != [8,9])
v = var(49)
value = 1

[State 1012, Batman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 2) && (AnimElem = 2)
trigger1 = target, Name = "Batman"
v = var(49)
value = 2

[State 1012, Wonder Woman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 3) && (AnimElem = 2)
trigger1 = target, Name = "Wonder Woman"
trigger2 = target, name = "Wonder Woman Reloaded"
v = var(49)
value = 3

[State 1012, Flash]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 4) && (AnimElem = 2)
trigger1 = target, Name = "Flash"
trigger2 = target, Name = "TheFlash"
trigger3 = target, name = "Wally West"
trigger4 = target, name = "Barry Allen"
trigger5 = target, name = "Jay Garrick"
v = var(49)
value = 4

[State 1012, Green Lantern]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 5) && (AnimElem = 2)
trigger1 = target, Name = "Blackest Night Hal Jordan" && (target, PalNo <= 6)
trigger2 = target, name = "Green Lantern Hal Jordan"
trigger3 = target, Name = "Guy Gardner"
trigger4 = target, name = "Green Lantern Guy"
trigger5 = target, Name = "John Stewart"
trigger6 = target, Name = "Green Lantern"
trigger7 = target, Name = "John_StewartGL"	; jhonnyDC's
v = var(49)
value = 5

[State 1012, Ice]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 6) && (AnimElem = 2)
trigger1 = target, Name = "Ice"
v = var(49)
value = 6

[State 1012, Lobo]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 7) && (AnimElem = 2)
trigger1 = target, Name = "Lobo"
v = var(49)
value = 7

[State 1012, Plastic Man]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 8) && (AnimElem = 2)
trigger1 = target, Name = "Homem Borracha"
trigger2 = target, Name = "Plastic Man"
trigger3 = target, Name = "ElongatedMan"
v = var(49)
value = 8

[State 1012, Etrigan]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 9) && (AnimElem = 2)
trigger1 = target, Name = "Etrigan"
trigger2 = target, Name = "Etrigan the Demon"
trigger3 = target, Name = "DCvsMEtrigan"
v = var(49)
value = 9

[State 1012, Lex Luthor]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 10) && (AnimElem = 2)
trigger1 = target, Name = "Luthor"
trigger2 = (target, Name = "Lex Luthor") && (target, palno < 12)
v = var(49)
value = 10

[State 1012, Darkseid]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 11) && (AnimElem = 2)
trigger1 = target, Name = "Darkseid"
trigger2 = target, name = "Darksied"
trigger3 = target, Name = "Darkseid 16 bits"
v = var(49)
value = 11

[State 1012, Superboy]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 12) && (AnimElem = 2)
trigger1 = target, Name = "Superboy"
trigger2 = target, Name = "Kon-El"
trigger3 = target, Name = "KonEl"
v = var(49)
value = 12

[State 1012, Sinestro]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 13) && (AnimElem = 2)
trigger1 = target, Name = "Sinestro"
trigger2 = (target, Name = "Blackest Night Hal Jordan") && (target, PalNo = 9)
v = var(49)
value = 13

[State 1012, Bizarro]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 14) && (AnimElem = 2)
trigger1 = (target, Name = "Superman") && (target, PalNo = [8,9])
trigger2 = target, Name = "Bizarro"
v = var(49)
value = 14

[State 1012, Aquaman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 15) && (AnimElem = 2)
trigger1 = target, Name = "Aquaman"
v = var(49)
value = 15

[State 1012, Doomsday]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 16) && (AnimElem = 2)
trigger1 = target, Name = "Doomsday"
v = var(49)
value = 16

[State 1012, Poison Ivy]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 17) && (AnimElem = 2)
trigger1 = target, Name = "Poison Ivy"
v = var(49)
value = 17

[State 1012, Atom]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 18) && (AnimElem = 2)
trigger1 = target, Name = "The Atom"
trigger2 = target, Name = "Atom"
v = var(49)
value = 18

[State 1012, MartianManhunter]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 19) && (AnimElem = 2)
trigger1 = target, Name = "Martian Manhunter"
trigger2 = target, Name = "J'onn J'onzz"
v = var(49)
value = 19

[State 1012, Shazam]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 20) && (AnimElem = 2)
trigger1 = (target, Name = "Shazam")
trigger2 = (target, Name = "Captain Marvel")
v = var(49)
value = 20

[State 1012, Starfire]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 21) && (AnimElem = 2)
trigger1 = (target, Name = "Starfire")
trigger2 = (target, Name = "HCF Starfire")
v = var(49)
value = 21

[State 1012, Bane]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 22) && (AnimElem = 2)
trigger1 = (target, Name = "Bane")
v = var(49)
value = 22

[State 1012, Eradicator]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 23) && (AnimElem = 2)
trigger1 = (target, Name = "Eradicator")
trigger2 = (target, Name = "Erradicator")
v = var(49)
value = 23

[State 1012, Vixen]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 24) && (AnimElem = 2)
trigger1 = (target, Name = "Vixen")
v = var(49)
value = 24

[State 1012, Mongul]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 25) && (AnimElem = 2)
trigger1 = (target, Name = "Mongul")
v = var(49)
value = 25

[State 1012, RedLantern]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 26) && (AnimElem = 2)
trigger1 = (target, Name = "Atrocitus")
trigger2 = (target, Name = "Red Lantern")
trigger3 = (target, Name = "Blackest Night Hal Jordan") && (target, PalNo = 7)
trigger4 = (target, Name = "Dexstarr")
v = var(49)
value = 26

[State 1012, OrangeLantern]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 27) && (AnimElem = 2)
trigger1 = (target, Name = "Larfleeze")
trigger2 = (target, Name = "Orange Lantern")
trigger3 = (target, Name = "Agent Orange")
trigger4 = (target, Name = "Blackest Night Hal Jordan") && (target, PalNo = 8)
trigger5 = (target, Name = "Lex Luthor") && (target, PalNo = 12)
v = var(49)
value = 27

[State 1012, IndigoLantern]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 28) && (AnimElem = 2)
trigger1 = (target, Name = "Indigo-1")
trigger2 = (target, Name = "Indigo Lantern")
trigger3 = (target, Name = "Blackest Night Hal Jordan") && (target, PalNo = 11)
v = var(49)
value = 28

[State 1012, StarSapphire]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 29) && (AnimElem = 2)
trigger1 = (target, Name = "Star Sapphire")
v = var(49)
value = 29

[State 1012, powerset30]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 30) && (AnimElem = 2)
trigger1 = (target, Name = "Black Lantern")
trigger2 = (target, Name = "Blackest Night Hal Jordan") && (target, PalNo = 12)
v = var(49)
value = 30

; Powerset #s 31-50: open

;--------------------------------
; Marvel power sets
;--------------------------------
[State 1012, stealFromMarvelTemplate]
type = VarSet
triggerall = (NumTarget > 0) && (AnimElem = 2)
trigger1 = target, Name = "Marvel Template"
v = var(49)
value = ((Random * 30) / 1000) + 51  ; random Marvel powerset (currently ranges from 51 to 80)

[State 1012, CapAmerica]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 51) && (AnimElem = 2)
trigger1 = target, Name = "Captain America"
trigger2 = target, Name = "Isaiah Bradley"
trigger3 = target, Name = "Captain Bucky"
trigger4 = target, Name = "Ultimate Cap"
v = var(49)
value = 51

[State 1012, Hulk]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 52) && (AnimElem = 2)
trigger1 = target, Name = "Hulk"
trigger2 = target, Name = "Savage Hulk"
v = var(49)
value = 52

[State 1012, Thor]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 53) && (AnimElem = 2)
trigger1 = target, Name = "Thor"
trigger2 = target, Name = "The Mighty Thor"
v = var(49)
value = 53

[State 1012, Spiderman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 54) && (AnimElem = 2)
trigger1 = target, Name = "Spider-Man"
trigger2 = target, Name = "Spiderman"
v = var(49)
value = 54

[State 1012, Ironman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 55) && (AnimElem = 2)
trigger1 = target, Name = "Iron-Man"
trigger2 = target, Name = "Ironman"
trigger3 = target, Name = "Ironman DCvsM"
trigger4 = target, Name = "War Machine"
trigger5 = target, Name = "Warmachine"
v = var(49)
value = 55

[State 1012, Crystal]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 56) && (AnimElem = 2)
trigger1 = target, Name = "Crystal"
trigger2 = target, Name = "Crystal of The Avengers"
v = var(49)
value = 56

[State 1012, Sandman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 57) && (AnimElem = 2)
trigger1 = target, Name = "Sandman"
v = var(49)
value = 57

[State 1012, Wolverine]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 58) && (AnimElem = 2)
trigger1 = target, Name = "Wolverine"
trigger2 = target, Name = "Wx2"
trigger3 = target, Name = "Logan"
trigger4 = target, Name = "WolverineDCvsMC"
v = var(49)
value = 58

[State 1012, Carnage]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 59) && (AnimElem = 2)
trigger1 = target, Name = "Carnage"
v = var(49)
value = 59

[State 1012, DrDoom]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 60) && (AnimElem = 2)
trigger1 = target, Name = "Doom"
trigger2 = target, Name = "Dr.Doom"
v = var(49)
value = 60

[State 1012, GhostRider]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 61) && (AnimElem = 2)
trigger1 = target, Name = "Ghost Rider"
trigger2 = target, Name = "DCvsMGhostRider"
v = var(49)
value = 61

[State 1012, StrongGuy]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 62) && (AnimElem = 2)
trigger1 = target, Name = "Strong Guy"
trigger2 = target, Name = "Guido"
v = var(49)
value = 62

[State 1012, Thanos]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 63) && (AnimElem = 2)
trigger1 = target, Name = "Thanos"
trigger2 = target, Name = "Thanos of Titan"
v = var(49)
value = 63

[State 1012, Deadpool]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 64) && (AnimElem = 2)
trigger1 = (target, Name = "Deadpool")
v = var(49)
value = 64

[State 1012, Juggernaut]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 65) && (AnimElem = 2)
trigger1 = target, Name = "Juggernaut"
trigger2 = target, Name = "Juggernaut by Splode"
trigger3 = target, Name = "Juggernault"
v = var(49)
value = 65

[State 1012, MrFantastic]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 66) && (AnimElem = 2)
trigger1 = target, Name = "Mister Fantastic"
trigger2 = target, Name = "Mr. Fantastic"
v = var(49)
value = 66

[State 1012, InvisibleWoman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 67) && (AnimElem = 2)
trigger1 = target, Name = "Invisible Woman"
trigger2 = target, Name = "Sue Storm"
v = var(49)
value = 67

[State 1012, Thing]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 68) && (AnimElem = 2)
trigger1 = target, Name = "The Thing"
trigger2 = target, Name = "Thing"
trigger3 = target, Name = "Mole"
trigger4 = target, Name = "La Mole"
v = var(49)
value = 68

[State 1012, HumanTorch]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 69) && (AnimElem = 2)
trigger1 = target, Name = "Human Torch"
v = var(49)
value = 69

[State 1012, SuperSkrull]
type = VarSet
triggerall = (NumTarget > 0) && (AnimElem = 2)
trigger1 = target, Name = "Klrt"
trigger2 = target, Name = "Super Skrull"
v = var(49)
value = ((Random * 4) / 1000) + 66  ; random powerset from the FF (66-69)

[State 1012, SilverSurfer]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 70) && (AnimElem = 2)
trigger1 = target, Name = "Silver Surfer"
trigger2 = target, Name = "silversurferv2"
v = var(49)
value = 70

[State 1012, Venom]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 71) && (AnimElem = 2)
trigger1 = target, Name = "Venom"
v = var(49)
value = 71

[State 1012, Cyclops]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 72) && (AnimElem = 2)
trigger1 = target, Name = "Cyclops"
trigger2 = target, Name = "Scott Summers MVC2 + MSHVSF + MUA + XML2"
v = var(49)
value = 72

[State 1012, Elektra]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 73) && (AnimElem = 2)
trigger1 = target, Name = "Elektra"
trigger2 = target, Name = "Elektra Natchios"
v = var(49)
value = 73

[State 1012, Nightcrawler]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 74) && (AnimElem = 2)
trigger1 = target, Name = "Nightcrawler"
v = var(49)
value = 74

[State 1012, Marrow]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 75) && (AnimElem = 2)
trigger1 = target, Name = "Marrow"
v = var(49)
value = 75

[State 1012, Songbird]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 76) && (AnimElem = 2)
trigger1 = target, Name = "Songbird"
v = var(49)
value = 76

[State 1012, OmegaRed]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 77) && (AnimElem = 2)
trigger1 = target, Name = "Omega Red"
v = var(49)
value = 77

[State 1012, Rhino]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 78) && (AnimElem = 2)
trigger1 = target, Name = "RHINO"
v = var(49)
value = 78

[State 1012, Iceman]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 79) && (AnimElem = 2)
trigger1 = target, Name = "Iceman"
trigger2 = target, Name = "MvDC Iceman"
v = var(49)
value = 79

[State 1012, Storm]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 80) && (AnimElem = 2)
trigger1 = target, Name = "Storm"
v = var(49)
value = 80

[State 1012, Cable]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 81) && (AnimElem = 2)
trigger1 = target, Name = "Cable"
v = var(49)
value = 81

; 82-89: open

[State 1012, Daredevil]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 73) && (AnimElem = 2)
trigger1 = (target, Name = "Daredevil")
trigger2 = (target, Name = "Devil")
v = var(49)
value = 90

[State 1012, MsMarvel]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 91) && (AnimElem = 2)
trigger1 = target, Name = "Miss Marvel"
trigger2 = target, Name = "Ms. Marvel"
v = var(49)
value = 91

; 92-97: open

[State 1012, Spiral]
type = VarSet
triggerall = (NumTarget > 0) && (var(var(49)) != 98) && (AnimElem = 2)
trigger1 = target, Name = "Spiral"
v = var(49)
value = 98

[State 1012, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
; Being drained (p2 custom hit state)
[StateDef 1013]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

;Generated by Fighter Factory PalFX Editor
[State 1013, PalFXWiz1]
type = PalFX
trigger1 = Time = 0
time = 90
add = 0,-200,0
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 1
color = 0

[State 1013, lifeadd]
type = LifeAdd
trigger1 = Alive
value = -1
kill = 1

[State 1013, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1013

[State 1013, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 1013, 2] ; tossed
type = ChangeState
trigger1 = !AnimTime
value = 1014


;-----------------------------------------------------------------------------------
; Being dropped (p2 custom hit state)
[StateDef 1014]
type = A
movetype = H
physics = A
ctrl = 0
velset = 8,14

[State 1014, Turn]
type = Turn
trigger1 = !Time

[State 1014, 2]
type = SelfState
trigger1 = !Time
value = 5050


;---------------------------------------------------------------------------
; Projectile Absorption
[StateDef 1200]
type    = S
MoveType= I
physics = S
ctrl = 0
anim = 1200
VelSet = 0,0

[State 1200, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 1200, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,7
channel = 0
persistent = 0

[State 1200, HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
attr = SCA,NA,SA
stateno = 1210
time = 1

[State 1200, HitOverride]
type = HitOverride
trigger1 = 1
slot = 2
attr = SCA,NP,SP
stateno = 1220
time = 1

[State 1200, ChangeState]
type = ChangeState
trigger1 = AnimElem = 2
value = 1210

;----------------
; Projectile Absorb ready state
; Adapted from Ice's shield move, which was in turn adapted from code by Loganir for Wonder Woman
[StateDef 1210]
type    = S
MoveType= I
physics = S
ctrl = 0
anim = 1210
VelSet = 0,0

[State 1210, HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
attr = SCA,NA,SA
stateno = 1210
time = 1

[State 1210, HitOverride]
type = HitOverride
trigger1 = 1
slot = 2
attr = SCA,NP,SP
stateno = 1214
time = 1

[State 1210, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NT,ST,HT
time = 1

[State 1210, 1]
type = ReversalDef
trigger1 = AnimElem = 1
reversal.attr = SCA,NP,SP ; only normal & special projectiles can be reflected
sparkno = -1
hitsound = S9,1
p1stateno = 1214
p2stateno = 1216

[State 1210, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 1220

;----------------
; Projectile Absorb active state
[StateDef 1214]
type    = S
MoveType= I
physics = S
anim = 1214
VelSet = 0,0
sprpriority = 2

[State 1214, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,IfElse(random<500,8,9)
channel = 0
persistent = 0

[State 1214, Explod]
type = Explod
trigger1 = !Time
anim = 1215
ID = 1215
facing = 1
bindtime = 1
removetime = -2
sprpriority = 2
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 1214, PalFXWiz]
type = PalFX
trigger1 = !Time
time = 30
add = -100,-100,0
mul = 256,256,256
sinadd = 40,40,80,10
invertall = 1
color = 0

[State 1214, PowerAdd]
type = PowerAdd
trigger1 = 1
value = 7

[State 1214, LifeAdd]
type = LifeAdd
trigger1 = 1
value = 2

[State 1214, HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
attr = SCA,NA,SA
stateno = 1210
time = 1

[State 1214, HitOverride]
type = HitOverride
trigger1 = 1
slot = 2
attr = SCA,NP,SP
stateno = 1214
time = 1

[State 1214, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NT,ST,HT
time = 1

[State 1214, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 1230

;-------------
; Projectile Absorb - p2 state
[Statedef 1216]
type = S
movetype = I
physics = S
anim = -1

[State 1216, ChangeState]
type = DestroySelf
trigger1 = !time

;-------------
; Projectile Absorb - end with nothing
[Statedef 1220]
type = S
movetype = I
physics = S
anim = 1220

[State 1220, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,6
channel = 0
persistent = 0

[State 1220, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------
; Projectile Absorb - end successfully
[Statedef 1230]
type = S
movetype = I
physics = S
anim = 1220

[State 1230, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Feeding Frenzy
[Statedef 1300]
anim = 1300
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S8,0

[State 1300, dust]
type = Explod
trigger1 = !Time
anim = 918
ontop = 1

[State 1300, lines]
type = Explod
trigger1 = timemod = 2,1
anim = 111
ID = 111
removeongethit = 1
removetime = 60
vel = -10-ceil(random/20), 0
postype = p1
pos = -100, -80
random = 10,80
xscale = 0.5
yscale = 0.5
sprpriority = -3
bindtime = 1
ownpal = 1

[State 1300, 1]   ; Flash speed-boost
type = VelSet
triggerall = !Time
trigger1 = Var(50) = 4 || Var(51) = 4
x = const(velocity.run.fwd.x) * 2
y = -3.5

[State 1300, 1]  ; normal
type = VelSet
triggerall = !Time
trigger1 = Var(50) != 4 && Var(51) != 4
x = const(velocity.run.fwd.x)
y = -3.2

[State 1300, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 1350


;-----------------------------
; Feeding Frenzy - dive & attack (also starting state for air version)
[Statedef 1350]
type    = A
movetype= A
physics = N
anim = 1350
ctrl = 0
sprpriority = 1

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 9,41

[State 1350, dive]
type = VelSet
trigger1 = AnimElem = 2
x = 12 + var(2)*5

[State 1350, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
physics = A

[State 1350, HitDef]
type = HitDef
trigger1 = !Time
attr = S,SA
hitflag = MA
guardflag = MA
animtype = hard
priority = 6,Hit
damage = 80,5
pausetime = 0,0
sparkno = S9992
guard.sparkno = 0
sparkxy = 15,-85
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 12
guard.slide = 16
ground.hit = 8
air.hittime = 20
ground.velocity = 2,0
guard.velocity = 4
air.velocity = 5,3
ground.cornerpush.veloff = 5
sprpriority = 1
p2stateno = 1370
kill = 1

[State 1350, ChangeState]
type = ChangeState
trigger1 = MoveHit
value = 1360
ctrl = 1

[State 1350, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 948
ctrl = 1


;-----------------------------------------------------------------------------------
; Feeding Frenzy (successfully grabbed P2)
[StateDef 1360]
type = S
movetype = A
physics = S
anim = 1360
ctrl = 0
velset = 0,0
sprpriority = 3

[State 1360, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 1360, voice]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 9,0
channel = 0

;Generated by Fighter Factory PalFX Editor
[State 1360, PalFXWiz]
type = PalFX
trigger1 = Time = 60
time = 30
add = 0,-200,-200
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 1
color = 0

[State 1360, snd1]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 1360, snd2]
type = PlaySnd
trigger1 = Time = 1
persistent = 0
value = 9,1

[State 1360, PowerAdd]
type = PowerAdd
trigger1 = 1
value = 5

[State 1360, No push]
type = PlayerPush
trigger1 = 1
value = 0

[State 1360, Bind 1]
type = TargetBind
trigger1 = Time < 90
pos = 60,0

[State 1360, targetdrop]
type = TargetDrop
trigger1 = Time = 90

[State 1360, targetdrop]
type = ChangeState
trigger1 = Time = 90
value = 1380
ctrl = 1


;-----------------------------------------------------------------------------------
; Feeding Frenzy - P2 being drained (custom hit state)
[StateDef 1370]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 1370, No push]
type = PlayerPush
trigger1 = 1
value = 0

;Generated by Fighter Factory PalFX Editor
[State 1370, PalFXWiz1]
type = PalFX
trigger1 = !Time
time = 90
add = 0,-200,0
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 1
color = 0

[State 1370, lifeadd]
type = LifeAdd
trigger1 = Alive
value = -1
kill = 1

[State 1370, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 1370

[State 1370, dropped]
type = SelfState
trigger1 = !AnimTime
value = 5070


; Feeding Frenzy - bounce back after successful hit
[StateDef 1380]
type = A
movetype = I
physics = A
anim = 1380
ctrl = 1

[State 1380, VelSet]
type = VelSet
trigger1 = !Time
x = -2
y = -4


;---------------------------------------------------------------------------
; Stolen Special - Slot 1 (power set determiner)
[StateDef 2000]
type    = S
physics = S
ctrl = 0
velset = 0,0

[State 2000, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 2000, VarSet]
type = VarSet
trigger1 = !Time
v = 2
value = IfElse(command = "qcf_x", 0, IfElse(command = "qcf_y", 1, 2))

[State 2000, changeState]
type = ChangeState
trigger1 = Time = 1 && AnimExist(2000 + (Var(50) * 10))
value = 2000 + (Var(50) * 10)

[State 2000, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 2002


;---------------------------------------------------------------------------
; Stolen Special - Slot 2 (power set determiner)
[StateDef 2001]
type    = S
physics = S
ctrl = 0
velset = 0,0

[State 2001, dust]
type = Explod
trigger1 = Time = 0
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 2001, VarSet]
type = VarSet
trigger1 = Time = 0
v = 2
value = IfElse(command= "qcf_a", 0, IfElse(command = "qcf_b", 1, 2))

[State 2001, changeState]
type = ChangeState
trigger1 = Time = 1 && AnimExist(2000 + (Var(51) * 10))
value = 2000 + (Var(51) * 10)

[State 2001, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 2002


;--------------------------------
; Stolen Special - power set unfinished/unfilled/unavailable
[StateDef 2002]
type    = S
physics = S
ctrl = 0
anim = 2000
velset = 0,0

[State 2002, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,IfElse(random<500,4,5)
channel = 0

[State 2002, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Heat Vision (stolen from Superman)
[StateDef 2010]
anim = 2010
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2

[State 2010, playsnd]
type = PlaySnd
trigger1 = !Time
value = 9,12
channel = 0

[State 2010, beam]
type = Helper
trigger1 = AnimElem = 1
name = "beam"
ID = 2010
pos = 54,-80
stateno = 2011
ownpal = 1

[State 2010, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Heat Vision - beam helper
[StateDef 2011]
anim = 2013
ctrl = 0
type = S
movetype = A
physics = N

[State 2011, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (54 * parent, facing)
y = parent, Pos Y - 80

[State 2011, explod]
type = Explod
trigger1 = Time = 0
anim = 2011
ID = 2011
sprpriority = 5

[State 2011, playsnd]
type = PlaySnd
trigger1 = time = 0
value = 9,10

[State 2011, noshadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2011, hitdef]
type = HitDef
trigger1 = !Time
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = hard
ground.type = high
air.type = low
priority = 6,Hit
damage = 35,5
pausetime = 0,20
guard.pausetime = 0,3
sparkno = 0
guard.sparkno = 40
sparkxy = 0,0
hitsound = S9,11
guardsound = S9,11
ground.slidetime = 10
guard.slidetime = 10
ground.hittime = 10
guard.hittime = 10
air.hittime = 25
ground.velocity = -6
guard.velocity = -3
air.velocity = -8,-1

[State 2011, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2011, destroyself]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Bat Uppercut (stolen from Batman)
[StateDef 2020]
anim = 2020
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 2020, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S1,3
channel = 0

[State 2020, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 2.4
y = -9.8 - (1.5 * Var(2))

[State 2020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
movetype = A
physics = A

[State 2020, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,SA
hitflag = MAFD
guardflag = MA
animtype = Heavy
priority = 5,Hit
damage = 70,15
pausetime = 9,9
sparkno = S9992
sparkxy = 15,-90
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2 - (1.5 * Var(2)), -11 - (2.5 * Var(2))
guard.velocity = -6 - (1.5 * Var(2))
airguard.velocity = -5,-1
air.type = Low
air.velocity = -5,-10
down.bounce = 1
down.velocity = -4,-4
fall = 1
fall.recover = 0

[State 2020, fall back to ground]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Fierce Olympian (stolen from Wonder Woman)
[StateDef 2030]
anim = 2030
type = A
movetype = A
physics = A
ctrl = 0
velset = 0,0
poweradd = 55
sprpriority = 4
juggle = 4

[State 1500, A5]
type = Velset
trigger1 = !time
x = -2
y = -3

[State 1500, A5]
type = Veladd
trigger1 = time > 19
x = -1
y = -.06

[State 1500, A5]
type = Velset
;trigger1 = anim = 1501 && frontEdgeBodyDist <= 30
trigger1 = moveguarded
x = -1.4
[State 1500, A5]
type = Velset
trigger1 = P2Dist X < -100
x = 2

[State 1500, a5]
type = NotHitBy
trigger1 = time>=0
value = SCA, NP, SP
time = 1

[State 2030, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
;physics = A

[State 2030, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 15

[State 2030, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,2

[State 2030, vox]
type = PlaySnd
trigger1 = !Time
value = 9,30
channel = 0
removeongethit = 1

[State 1500, close]
type = HitDef
Trigger1 = !time
attr = A, SA
hitflag = MAFP
guardflag = MA
priority = 6,hit
damage = 80,7
pausetime = 0,6
sparkno = S8523
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = (enemy,const(size.mid.pos.x)),-5+(enemy,const(size.mid.pos.y))
hitsound = S5,2
guardsound = S7,1
guard.velocity = -15
guard.pausetime = 7,7
ground.type = low
ground.slidetime = 15
ground.hittime = 20
ground.velocity = 0,-1
airguard.velocity =-13,-3
air.velocity = 0,-2
air.hittime = 40
p2facing = 1
kill = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff =-8
airguard.cornerpush.veloff =0
palfx.time = 40
palfx.add= 60,40,5
palfx.sinadd= 60,40,5,50
getpower  = 40
givepower = 20
p1stateno = 2032

[State 2030, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,HP

[State 2030, 1]
type = ChangeState
trigger1 = Time = 25
value = 52
ctrl = 1

[State 2030, 1]
type = ChangeState
trigger1 = MoveContact
value = 2032
ctrl = 1


; Fierce Olympian - hitdef state
[StateDef 2032]
anim = 2032
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
juggle  = 7

[State 2032, VelSet]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
x = 15

[State 2032, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,2

[State 2302, multiple hits]
type = HitDef
Trigger1 = time < 32 && time%2=0
;Trigger1 = animelem=3||animelem=6||animelem=9||animelem=12||animelem=15
attr = A, SA
hitflag = MAFP
guardflag = MA
animtype = medium
priority = 6,hit
damage = 5,2
pausetime = 2,3
sparkno = S9991
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -30+(const(size.mid.pos.x)),-5+(const(size.mid.pos.y))
hitsound = S2,1
guardsound = S3,0
ground.type = Low
ground.slidetime = 10
ground.hittime = 40
ground.velocity = 0,-1
air.velocity = 0,-2
air.hittime = 40
p2facing = 1
kill = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 40
palfx.add= 60,40,5
palfx.sinadd= 60,40,5,50
getpower  = 4
givepower = 2

[State 2302, last hit]
type = HitDef
Trigger1 = time=32 ;animelem=16
attr = A, SA
animtype  = hard
damage    = 8, 5
priority  = 6, hit
hitflag = MAFP
guardflag = MA
pausetime = 6,6
sparkno = -1
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -30+(const(size.mid.pos.x)),-5+(const(size.mid.pos.y))
hitsound   = S2,2
guardsound = S3,0
ground.type = high
air.type = high
ground.slidetime = 20
ground.hittime  = 40
air.hittime  = 40
ground.velocity = -15,-5
air.velocity = -15,-5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 40
palfx.add= 60,40,5
palfx.sinadd= 60,40,5,50
getpower  = 4
givepower = 2

[State 2032, 1]
type = ChangeState
trigger1 = Time = 36
value = 2035
ctrl = 1

; Fierce Olympian - bounce back after successful hit
[StateDef 2035]
type = A
movetype = I
physics = A
anim = 2035
ctrl = 1
velset = -6,-3

[State 2035, 1]
type = ChangeState
trigger1 = !AnimTime
value = 948
ctrl = 1


;---------------------------------------------------------------------------
; Superspeed Punch (stolen from Flash)
[StateDef 2040]
anim = 2040
ctrl = 0
type = S
movetype = A
physics = N
velset = 0,0

[State 2040, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S9,41

[state 2040, movement blur] ;(borrowed from Erradicator's Flash)
type = AfterImage
trigger1 = !Time
time = 30
length = 25
timegap = 1
framegap = 1
paladd = 0,0,0
palbright = 50,50,50
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
trans = Add1

[State 2040, No push]
type = PlayerPush
trigger1 = 1
value = 0

[state 2040, initial lunge]
type = VelSet
trigger1 = AnimElem = 2
x = 17
y = -2

[state 2040, keep moving]
type = VelAdd
trigger1 = animelem = 2,> 0 && Pos Y >= 0
trigger2 = animelem = 3,> 0 && Pos Y >= 0
y = .2

[State 2040, HitDef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = back
priority = 5,Hit
damage = 76,13
pausetime = 4,4
sparkno = S9992
sparkxy = 0,-75
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 22
ground.velocity = -5,-4.3
air.velocity = -5.6,-4.8
guard.velocity = -9
fall = 1

[State 2040, recovery]
type = ChangeState
trigger1 = !AnimTime
trigger2 = AnimElem = 3 && Pos Y >= 0
value = 2041


; Superspeed Punch - recovery
[StateDef 2041]
anim = 2041
ctrl = 0
type = S
movetype = A
physics = A
velset = 0,0

[State 2041, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 2041, Turn]
type = Turn
trigger1 = !Time

[State 2041, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Ring Strike (stolen from Green Lanterns)
[StateDef 2050]
type = S
movetype = A
physics = S
ctrl = 0

[State 2050, changestate]
type = ChangeState
trigger1 = Time = 0
value = 2052 + var(2)

;------------------------------
; Ring Strike (weak: fireball)
[StateDef 2052]
type = S
movetype = A
physics = S
anim = 2050
ctrl = 0

[State 2052, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,2
channel = 0

[State 2053, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = back
priority = 6,Hit
damage = 20,4
sparkno = S9992
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
air.hittime = 20
ground.velocity = -5,-2
guard.velocity = -4.6
air.velocity = -7,-1
sprpriority = 1
kill = 1
numhits = 1

[State 2052, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2051
ID = 2051
pos = 130,-80
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 2052, Projectile]
type = Projectile
trigger1 = Time = 16
ProjID = 2052
projanim = 2052
velocity = 7,0
projpriority = 1
projsprpriority = 3
offset = 130,-80
; HitDef
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 4,Hit
damage = 30,8
pausetime = 4,5
sparkno = S9990
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
air.hittime = 20
ground.velocity = -1.7,0
air.velocity = -1.9,0
sprpriority = 2

[State 2052, changestate]
type = ChangeState
trigger1 = Time = 50
value = 2059


; Ring Strike (medium)
[StateDef 2053]
type = S
movetype = A
physics = S
anim = 2050
ctrl = 0

[State 2053, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,3
channel = 0

[State 2053, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = back
priority = 6,Hit
damage = 20,4
sparkno = S9990
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
air.hittime = 20
ground.velocity = -5,-2
guard.velocity = -4.6
air.velocity = -7,-1
sprpriority = 1
kill = 1
numhits = 1

[State 2053, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2051
ID = 2051
pos = 125,-84
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 2053, beam]
type = Helper
trigger1 = Time = 16
helpertype = normal
name = "beam"
ID = 2057
pos = 125,-80
postype = p1
stateno = 2057
ownpal = 1

[State 2053, changestate]
type = ChangeState
trigger1 = !AnimTime
trigger1 = NumHelper(2057) = 0
value = 2059

;------------------------------
; Ring Strike (heavy)
[StateDef 2054]
type = S
movetype = A
physics = S
anim = 2050
ctrl = 0

[State 2054, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,3
volume = 0
channel = 0
freqmul = 1.0
loop = 0
pan = 0

[State 2054, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2051
ID = 2051
pos = 125,-84
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 2054, beam]
type = Helper
trigger1 = Time = 16
helpertype = normal
name = "beam"
ID = 2058
pos = 125,-80
postype = p1
stateno = 2058
ownpal = 1

[State 2054, changestate]
type = ChangeState
trigger1 = !AnimTime & NumHelper(2058) = 0
value = 2059

;--------
; Ring Strike -- medium beam helper state
[StateDef 2057]
type = A
movetype = A
physics = C
anim = 2057
ctrl = 0
sprpriority = 2

[State 2057, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (125 * parent, facing)
y = parent, Pos Y - 80

[State 2057, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,50
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0

[State 2055, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2055, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2057, hitdef]
type = HitDef
trigger1 = TimeMod = 15,0
attr = S,SP
hitflag = MAF
guardflag = MAF
animtype = Medium
air.animtype = Medium
fall.animtype = Medium
damage = 21,3
guardflag = MA
pausetime = 5,11
hitsound = S9,1
guardsound = S3,0
sparkno = S9991
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 16
ground.velocity = -7
guard.velocity = -4
air.velocity = -3,6
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 15
palfx.add = 0,64,0

[State 2057, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

;--------
; Ring Strike -- heavy beam helper state
[StateDef 2058]
type = A
movetype = A
physics = C
anim = 2058
ctrl = 0
sprpriority = 2

[State 2058, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (125 * parent, facing)
y = parent, Pos Y - 80

[State 2058, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,1
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0

[State 2055, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2055, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2058, hitdef]
type = HitDef
trigger1 = TimeMod = 10,0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Heavy
damage = 18,3
pausetime = 6,12
hitsound = S9,1
guardsound = S3,0
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0

[State 2058, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

;---------
; Ring Strike - end
[StateDef 2059]
type = S
movetype = A
physics = S
anim = 2059

[State 2059, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Icicle Edge (stolen from Ice)
[StateDef 2060]
anim = 2060
ctrl = 0
type    = C
MoveType= A
physics = C
velset = 0,0

[State 2060, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9,60
channel = 0

[State 2060, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2061
ID = 2061
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 2060, spike]
type = Helper
trigger1 = (AnimElemTime(3) >= 0) && (TimeMod = 4, 0) && (Time <= 40)
name = "Spike"
pos = (Time * 4) + 30, 0
postype = p1
StateNo = 2065

[State 2060, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Icicle Edge: helper state for spikes
[StateDef 2065]
type    = C
MoveType= A
physics = N
ctrl = 0
anim = 2065
sprpriority = 2

[State 2065, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9,61
channel = 1
volume = -100

[State 2065, make me unhittable]
type = AssertSpecial
trigger1 = IsHelper
flag = unguardable

[State 2065, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2065, HitDef]
type = HitDef
trigger1 = time = 0
attr = C,SP
damage = 30,10
fall = 1
guardflag = MA
hitflag = MA    ;FD
;pausetime = 6,6
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;sparkxy = 0,-70
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 20
ground.velocity = -1,-7
guard.velocity = -4
air.velocity = 0,-8

[State 2065, done]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Rotgut (stolen from Lobo)
[StateDef 2070]
anim = 0    ;2070
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 2070, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stone Fists (stolen from Plastic Man)
[StateDef 2080]
anim = 2080
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 96

[State 2080, swoosh]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 7
trigger3 = AnimElem = 10
value = 0,2

[State 2080, grunt]
type = Null ;PlaySnd
trigger1 = AnimElem = 1
value = 9,3
channel = 0

[State 2080, HitDef]
type = HitDef
trigger1 = Time > 4 && Time <= 50
attr = S, SA
damage = 16
guardflag = MA
pausetime = 10,8
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
sparkxy = 0,-80
animtype = Heavy
ground.type = High
ground.slidetime = 2
ground.hittime  = 2
ground.velocity = -7
guard.velocity = -9
air.velocity = -5,8

[State 2080, HitDef2]
type = HitDef
trigger1 = Time = 52
attr = S, SA
damage = 16
guardflag = MA
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
sparkxy = 0,-80
animtype = Heavy
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8

[State 2080, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Flaming Charge - stolen from Etrigan
[Statedef 2090]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 120
ctrl = 0
velset = 0,0
anim = 2090
sprpriority = 0

[State 2090, vox]
type = PlaySnd
trigger1 = time = 1
value = 9,90

[State 2090, 2]
type = playsnd
trigger1 = time = 9
value = 9,91

[State 2090, Explod]
type = Explod
trigger1 = !Time
anim = 2094
ID = 2094
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 2090, 1]
type = velset
trigger1 = time = 5
trigger2 = time = 8
trigger3 = time = 11
trigger4 = time = 14
trigger5 = time = 17
trigger6 = time = 20
trigger7 = time = 23
trigger8 = time = 26
trigger9 = time = 29
trigger10 = time = 32
trigger11 = time = 35
trigger12 = time = 38
x = 10
y = 0

[State 2090, 2]
type = velset
trigger1 = time = 41
trigger2 = time = 44
trigger3 = time = 47
x = 5
y = 0

[State 2090, 3]
type = velset
trigger1 = time = 50
trigger2 = time = 53
trigger3 = time = 56
x = 2.5
y = 0

[State 2090, 2]
type = HitDef
trigger1 = AnimElem >= 2
attr = S, NA
animtype  = Hard
damage    = 100
pausetime = 10,10
guardflag = HMAL
hitflag = HMAFL
sparkno = S7003
sparkxy = -20,-70
hitsound   = 5,2
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 6
ground.velocity = -3,-10
guard.velocity = -7
air.velocity = -8,-10
airguard.velocity = -5, -4
palfx.time = 30
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0
fall=1
p2stateno = 2095

[State 2090, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 0,0
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 60
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2090, 3]
type = ctrlset
trigger1 = Time = 56
value = 1

[State 2090, 3]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Charge customthit
[Statedef 2095]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2095, 1]
type = ChangeAnim2
trigger1 = !Time
value = 2095

[State 2095, 1]
type = velset
trigger1 = time = [1,15]
x = 1
y = -5

[State 2095, 2]
type = velset
trigger1 = time = [16,25]
x = 1
y = -3

[State 2095, 3]
type = velset
trigger1 = time = [26,30]
x = 1
y = 0

[State 2095, 3]
type = velset
trigger1 = time = [31,40]
x = 1
y = 3

[State 2095, 4]
type = velset
trigger1 = time = [41,60]
x = 1
y = 5

[State 2095, 3]
type = SelfState
trigger1 = time = 60
value = 5050


;---------------------------------------------------------------------------
; Kryptonite Ray (stolen from Lex Luthor)
[StateDef 2100]
anim = 2100
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 80

[State 2100, playsnd]
type = PlaySnd
trigger1 = !Time
value = 9,100

[State 2100, playsnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 9,101

; AI: choose green kryptonite if fighting someone with a Kryptonian power set
[State 2100, VarSet]
type = VarSet
triggerall = !Time && var(1)   ; with AI
trigger1 = P2Name = "Superman" && PalNo != [8,9]
trigger2 = P2Name = "Superboy" || P2Name = "Kon-El" || P2Name = "KonEl"
trigger3 = P2Name = "Parasite" && (var(50) = 1 || var(50) = 12 || var(51) = 1 || var(51) = 12)
v = 2
value = 0

; AI: choose red kryptonite if fighting anyone else
[State 2100, VarSet]
type = VarSet
triggerall = !Time && var(1)   ; with AI
trigger1 = P2Name != "Superman" && P2Name != "Superboy" && P2Name != "Kon-El" && P2Name != "KonEl"
trigger1 = P2Name != "Bizarro" && P2Name != "Borracha Bizarro"
trigger1 = P2Name != "Parasite" && (var(50) = 1 || var(50) = 12 || var(51) = 1 || var(51) = 12 || var(50) = 14 || var(51) = 14)
v = 2
value = 1

; AI: choose blue kryptonite if fighting a Bizarro
[State 2100, VarSet]
type = VarSet
triggerall = !Time && var(1)   ; with AI
trigger1 = P2Name = "Superman" && PalNo = [8,9]
trigger2 = P2Name = "Bizarro"
trigger3 = P2Name = "Parasite" && (var(50) = 14 || var(51) = 14)
trigger4 = P2Name = "Borracha Bizarro"
v = 2
value = 2

[State 2100, helper]
type = Helper
trigger1 = AnimElem = 3
pos = 126,-88
postype = p1
stateno = 2105
ownpal = 1
layerno = 2

[State 2100, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Kryptonite Beam: beam anim/hitdef
[StateDef 2105]
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 4

[State 2105, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 2105 + parent,var(2)

[State 2105, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 2105, BindToParent]
type = BindToParent
trigger1 = IsHelper
time = 1
pos = 126,-88

[State 2105, hitdef]
type = HitDef
trigger1 = !Time
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
priority = 5,Dodge
damage = 25,0
pausetime = 0,10
guard.pausetime = 0,10
sparkno = S2102
guard.sparkno = S2102
sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.hittime = 12
guard.hittime = 10
;ground.velocity = -10,0
palfx.time = 20
palfx.mul = 255,512,255
p2stateno = 7670 + parent,var(2)

[State 2105, destroyself]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = parent, anim != 2100


;=======
; hit by a green Kryptonite Ray
[Statedef 7670]
type    = A
physics = U
movetype = H
ctrl = 0

[State 7670, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y < 0
statetype = A
physics = A

[State 7670, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y >= 0
statetype = S
physics = S

;-- kryptonian reaction --
[State 7670, ChangeAnim]
type = ChangeAnim
triggerall = !Time
trigger1 = name = "Superman" && PalNo != [8,9]
trigger2 = name = "Superboy" || name = "Kon-El" || name = "KonEl"
trigger3 = name = "Parasite" && (var(50) = 1 || var(50) = 12 || var(51) = 1 || var(51) = 12)
value = 5300

[State 7670, poweradd]
type = PowerAdd
trigger1 = Anim = 5300
value = -5

[State 7670, Super damage]
type = LifeAdd
trigger1 = Anim = 5300 && Time = 1
value = -150
kill = 1

[State 7670, Green_FX]
type = PalFX
trigger1 = Anim = 5300 && Time = 1
time = 200
add = -150,-40,-100
sinadd = 0,80,15,20
color = 0
invertall = 1
;-- end kryptonian reaction --

;-- non-kryptonian reaction --
[State 7670, velset]
type = VelAdd
trigger1 = Anim != 5300 && Time = 1
x = IfElse(Pos Y < 0, -8, -4)
y = IfElse(Pos Y < 0, -3, 0)

[State 7670, Normal damage]
type = LifeAdd
trigger1 = Anim != 5300 && Time = 1
value = -80
kill = 1
;-- end non-kryptonian reaction --

[State 7670, selfstate]
type = SelfState
trigger1 = Anim != 5300 && Time = 10
trigger2 = Time = 200
ctrl = 1
value = 5000


;=======
; hit by a red Kryptonite Ray
[Statedef 7671]
type    = A
physics = U
movetype = H
ctrl = 0

[State 7671, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y < 0
statetype = A
physics = A

[State 7671, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y >= 0
statetype = S
physics = S

[State 7671, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 5300

[State 7671, poweradd]
type = PowerAdd
trigger1 = 1
value = -(Random/300) - 3

[State 7671, lifeadd]
type = LifeAdd
trigger1 = 1    ;TimeMod = 3,1
value = -(Random/400)
kill = 1

[State 7671, Red_FX]
type = PalFX
trigger1 = !Time
time = 200
add = -40,-100,-150
sinadd = 80,0,15,20
color = 0
invertall = 1

[State 7671, velset]
type = VelAdd
trigger1 = !Time
x = IfElse(Pos Y < 0, -6, -3)
y = IfElse(Pos Y < 0, -1, 0)

[State 7671, selfstate]
type = SelfState
trigger1 = Time = 200
ctrl = 1
value = 5000


;=======
; hit by a blue Kryptonite Ray
[Statedef 7672]
type    = A
physics = U
movetype = H
ctrl = 0

[State 7672, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y < 0
statetype = A
physics = A

[State 7672, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y >= 0
statetype = S
physics = S

;-- Bizarro reaction --
[State 7672, ChangeAnim]
type = ChangeAnim
triggerall = !Time
trigger1 = name = "Superman" && PalNo = [8,9]
trigger2 = name = "Bizarro"
trigger3 = name = "Parasite" && (var(50) = 14 || var(51) = 14)
trigger4 = name = "Borracha Bizarro"
value = 5300

[State 7672, poweradd]
type = PowerAdd
trigger1 = Anim = 5300
value = -5

[State 7672, lifeadd]
type = LifeAdd
trigger1 = Anim = 5300 && Time = 1
value = -150
kill = 1

[State 7672, Blue_FX]
type = PalFX
trigger1 = Anim = 5300 && Time = 1
time = 200
add = -150,-100,-40
sinadd = 0,15,80,20
color = 0
invertall = 1
;-- end Bizarro reaction --

;-- non-Bizarro reaction --
[State 7672, velset]
type = VelAdd
trigger1 = Anim != 5300 && Time = 1
x = IfElse(Pos Y < 0, -6, -3)
y = IfElse(Pos Y < 0, -1, 0)

[State 7672, Normal damage]
type = LifeAdd
trigger1 = Anim != 5300 && Time = 1
value = -80
kill = 1
;-- end non-Bizarro reaction --

[State 7672, selfstate]
type = SelfState
trigger1 = Anim != 5300 && Time = 10
trigger2 = Time = 200
ctrl = 1
value = 5000


;---------------------------------------------------------------------------
; Omega Blast (stolen from Darkseid)
[StateDef 2110]
anim = 2110
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 100

[State 2110, voice]
type = PlaySnd
trigger1 = Time = 5
value = 9,110
channel = 0

[State 2110, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
name = "Omega Blast"
ID = 2112 ;2111
stateno = 2112 ;2111
pos = 43, -80 ;55,-85
postype = p1
facing = 1
size.xscale = 0.75
size.yscale = 0.75

[State 2110, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 2113
ID = 2113
pos = 43,-80
postype = p1
facing = 1
bindtime = 9
sprpriority = 2
ignorehitpause = 0
removeongethit = 1

[State 2110, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-----------------
; Omega Blast (beam custom state; adapted from FlowaGirl's Homing Projectiles tutorial)
[StateDef 2111]
type    = A
movetype= A
physics = N
anim = 2111
sprpriority = 2

[State 2111, sfx]
type = PlaySnd
trigger1 = Time = 0
value = 9,111
channel = 0

[State 2111, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2111, Turn]
type = Turn
trigger1 = (P2Dist X < 10)

[State 2111, VelSet]
type = VelSet
trigger1 = (!Time)
x = 3

[State 2111, VarSet]
type = VarSet
trigger1 = IsHelper
fv = 2
value = (EnemyNear, Const(size.mid.pos.y))

[State 2111, VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -1)
x = -0.1

[State 2111, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 1)
x = 0.1

[State 2111, VelAdd]
type = VelAdd
trigger1 = (FVar(2) > Pos Y) && (Vel Y < 1)
y = 0.1

[State 2111, VelAdd]
type = VelAdd
trigger1 = (FVar(2) < Pos Y) && (Vel Y > -1)
y = -0.1

[State 2111, VelSet]
type = VelSet
trigger1 = (FVar(2) = Pos Y)
y = 0

[State 2111, HitDef]
type = HitDef
trigger1 = 1
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 7,Hit
damage = 125,25
;pausetime = 1,8
;sparkno = 0
;guard.sparkno = 0
hitsound = S9,112
sparkno = S9992
;sparkxy = 0,0
priority = 2,Hit
sprpriority = 2
ground.type = Low
ground.slidetime = 2
ground.hittime = 5
ground.velocity = -3, -4
air.velocity = -4, -5
fall = 1
fall.recover = 0
down.bounce = 1
kill = 1
palfx.time = 20
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
;p2stateno = 7697

[State 2111, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow

;Generated by Fighter Factory PalFX Editor
[State 2111, PalFXWiz]
type = PalFX
trigger1 = TimeMod = 10,0
time = 10
add = 7,-200,-200
mul = 256,256,256
sinadd = 30,30,0,10
invertall = 1
color = 0
;ignorehitpause = 0
;persistent = 1

[State 2111, afterimages]
type = AfterImage
trigger1 = Time = 0
time = 300
length = 60
timegap = 5
framegap = 1
palcolor = 256
paladd = 0,-200,-200
palmul = 25.0,1.0,1.0
trans = Add

;-----
; KFM's "angled projectiles" code
[State 2111, blah]
type = AngleSet
trigger1 = time
value = ((atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)) - 90

[State 2111, blah]
type = AngleDraw
trigger1 = 1
;-----

[State 2111, DestroySelf]
type = DestroySelf
trigger1 = MoveContact

;-----------------
; Omega Blast (beam custom state - new)
[StateDef 2112]
type    = A
movetype= A
physics = N
anim = 2112
sprpriority = 2

[State 2112, sfx]
type = PlaySnd
trigger1 = Time = 0
value = 9,111
channel = 0

[State 2112, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2112, HitDef]
type = HitDef
trigger1 = 1
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 7,Hit
damage = 125,25
pausetime = 10,10
hitsound = S9,112
sparkno = S9992
priority = 2,Hit
sprpriority = 2
ground.type = Low
ground.slidetime = 2
ground.hittime = 5
ground.velocity = -3, -4
air.velocity = -4, -5
fall = 1
fall.recover = 0
down.bounce = 1
kill = 1
palfx.time = 20
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10

[State 2112, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow

;Generated by Fighter Factory PalFX Editor
[State 2112, PalFXWiz]
type = PalFX
trigger1 = TimeMod = 10,0
time = 10
add = 7,-200,-200
mul = 256,256,256
sinadd = 30,30,0,10
invertall = 1
color = 0
;ignorehitpause = 0
;persistent = 1

[State 2112, DestroySelf]
type = DestroySelf
trigger1 = MoveContact
trigger2 = !AnimTime


;---------------------------------------------------------------------------
; TK Lift (stolen from Superboy)
[StateDef 2120]
anim = 2120
ctrl = 0
type    = C
MoveType= A
physics = C
velset = 0,0

[State 2120, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9,2
channel = 0

[State 2120, dust]
type = Explod
trigger1 = time = 13
anim = F60
ID = 60
pos = 23,3
scale = 0.5,0.5
sprpriority = -5
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2120, rocks]
type = Helper
trigger1 = AnimElemTime(3) = 10
name = "rocks"
pos = 90 + (40 * var(2)), 20
postype = p1
StateNo = 2121

[State 2120, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; TK Lift: helper state for rocks
[StateDef 2121]
type    = C
MoveType= A
physics = N
ctrl = 0
anim = 2121
sprpriority = 5

[State 2121, quake]
type = EnvShake
trigger1 = time = 0
time = 60

[State 2120, dust]
type = Explod
trigger1 = time = 0
anim = F60
ID = 60
facing = 1
sprpriority = -6
ownpal = 1

[State 2120, dust]
type = Explod
trigger1 = time = 0
anim = F62
ID = 60
facing = 1
scale = 1.25,1
sprpriority = 6
ownpal = 1

[State 2121, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9,121
channel = 1
volume = 100

[State 0, ]
type = VelSet
trigger1 = time = 1
x = 2
y = -6

[State 0, ]
type = Gravity
trigger1 = pos y < 0
ignorehitpause = 1

[State 2121, make me unhittable]
type = AssertSpecial
trigger1 = IsHelper
flag = unguardable

[State 2121, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2121, HitDef]
type = HitDef
trigger1 = time = 0
attr = C,SP
damage = 30,10
fall = 1
guardflag = MA
hitflag = MA    ;FD
;pausetime = 6,6
hitsound = S2,2
guardsound = S3,0
;sparkxy = 0,-70
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 20
ground.velocity = -1,-7
guard.velocity = -4
air.velocity = 0,-8

[State 2121, done]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Ravenous Beam (stolen from Sinestro)
[StateDef 2130]
anim = 2130
ctrl = 0
type    = S
MoveType= A
physics = S
velset = 0,0

[State 2130, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,3
volume = 0
channel = 0
freqmul = 1.0
loop = 0
pan = 0

[State 2130, beam]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "beam"
ID = 2135
pos = 130,-86
postype = p1
stateno = 2135
ownpal = 1

[State 2130, changestate]
type = ChangeState
trigger1 = !AnimTime
trigger1 = NumHelper(2135) = 0
;trigger2 = Time = 31
value = 2139


;--------
; Ravenous Beam -- beam helper state
[StateDef 2135]
type = A
movetype = A
physics = C
anim = 2135
ctrl = 0
sprpriority = 2

[State 2135, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (125 * parent, facing)
y = parent, Pos Y - 86

[State 2135, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,130
volume = 100
channel = -1

[State 2135, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2135, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2135, hitdef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,SP
hitflag = MAF
guardflag = MAF
animtype = Medium
air.animtype = Medium
fall.animtype = Medium
damage = 18,3
guardflag = MA
pausetime = 6,12
hitsound = S9,1
guardsound = S3,0
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 8
guard.velocity = -2
air.velocity = 4,8
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 40,0,-250
palfx.mul = 256,256,256
palfx.sinadd = 20,20,0,10

[State 2135, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
;trigger2 = MoveContact

;---------
; Ravenous Beam - end
[StateDef 2139]
type = S
movetype = A
physics = S
anim = 2139

[State 2139, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Ice Vision (stolen from Bizarro)
[StateDef 2140]
anim = 2140
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2

[State 2140, playsnd]
type = PlaySnd
trigger1 = time = 0
value = 9,140

[State 2140, beam]
type = Helper
trigger1 = AnimElem = 1
name = "beam"
ID = 2140
pos = 54,-84
stateno = 2141
ownpal = 1

[State 2140, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Ice Vision - beam helper
[StateDef 2141]
anim = 2013
ctrl = 0
type = S
movetype = A
physics = N

[State 2141, explod]
type = Explod
trigger1 = Time = 0
anim = 2141
ID = 2141
sprpriority = 5

[State 2141, playsnd]
type = Null ;PlaySnd
trigger1 = time = 0
value = 9,61

[State 2141, noshadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2141, hitdef]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = hard
ground.type = high
air.type = low
priority = 6,Hit
damage = 5,1
p2stateno = 3063
pausetime = 0,20
guard.pausetime = 0,3
sparkno = 0
guard.sparkno = 40
sparkxy = 0,0
hitsound = S9,61
guardsound = S9,61
ground.slidetime = 10
guard.slidetime = 10
ground.hittime = 10
guard.hittime = 10
air.hittime = 25
ground.velocity = -6
guard.velocity = -3
air.velocity = -8,-1

[State 2141, destroyself]
type = DestroySelf
trigger1 = !AnimTime

;---------------------------------------------------------------------------
; Sonic Wave (stolen from Aquaman; originally coded by zvitor, heavily hacked & modified by me)
[Statedef 2150]
type = S
movetype = A
physics = S
poweradd = 69
velset = 0, 0
anim = 2150
ctrl = 0

[State 2150, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,150

[State 2150, 2]
type = Projectile
trigger1 = AnimElemTime(2) = 10
ProjID = 20
ProjAnim = 2155
Projremove = 0
projremanim = 2156
Projhits = 1
velocity = 4,0
remvelocity = 0,0
projremovetime = 30
postype = p1
offset = 82,-50
sparkno = -1
attr = S, SP
damage = 10, 3
hitflag = MA
guardflag = MA
pausetime = 0,20
hitsound = S9,151
guardsound = S3,0
ground.slidetime = 15
ground.velocity = -10
ground.hittime = 15
air.velocity = -3,-2
airguard.velocity = -4,0
p2stateno = 2735
kill = 0

[State 2150, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;--------------------------------
; ???? (stolen from Doomsday)
[Statedef 2160]
type = S
movetype = A
physics = S
anim = 2160
ctrl = 0
velset = 0,0
sprpriority = 2

[State 2160, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;--------------------------------
; Toxic Kiss (stolen from Poison Ivy)
[Statedef 2170]
type = S
movetype = A
physics = S
anim = 2170
ctrl = 0
velset = 0,0
sprpriority = 2

[State 2170, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S9,171

[State 2170, Helper]
type = Helper
trigger1 = AnimElem = 4
name = "toxic kiss"
ID = 2172
stateno = 2172
pos = 85,-100
ownpal = 1
size.xscale = 1.2
size.yscale = 1.2

[State 2170, done]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Toxic Kiss - heart helper
[Statedef 2172]
type = S
movetype = A
physics = N
anim = 2172
ctrl = 0

[State 2172, VelAdd]
type = VelSet
trigger1 = 1
x = (Random*4)/1000       ; 0,1,2,3
y = ((Random*3)/1000)-1   ; -1,0,1

[State 2172, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2172, noreversal2]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2172, hitdef]
type = HitDef
trigger1 = !Time
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
priority = 5,Miss
damage = 20,0
pausetime = 0,10
guard.pausetime = 0,10
sparkno = S9992
;guard.sparkno = S2102
sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.hittime = 12
guard.hittime = 10
;ground.velocity = -10,0
palfx.time = 20
palfx.mul = 255,512,255
p2stateno = 7675

[State 2172, AfterImage]
type = AfterImage
trigger1 = TimeMod = 2,0
time = 4
length = 20
;palcolor = 256
;palinvertall = 0
;palbright = 30,30,30
;palcontrast = 120,120,220
;palpostbright = 0,0,0
;paladd = 10,10,25
;palmul = .65,.65,.75
;timegap = 1
;framegap = 4
trans = "add" ;"none","add1","sub"
;ignorehitpause =
;persistent =

[State 2172, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = MoveHit

;=======
; hit by Poison Ivy's toxic kiss
[Statedef 7675]
type    = A
physics = U
movetype = H
ctrl = 0

[State 7675, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y < 0
statetype = A
physics = A

[State 7675, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y >= 0
statetype = S
physics = S

[State 7675, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 5300

[State 7675, poweradd]
type = PowerAdd
trigger1 = 1
value = -5

[State 7675, hurt]
type = LifeAdd
trigger1 = Time = 1
value = -150
kill = 1

;Generated by Fighter Factory PalFX Editor
[State 7675, Green_FX]
type = PalFX
trigger1 = Time = 1
time = 200
add = -100,-100,-100
mul = 12,250,12
sinadd = -10,-10,-10,10
invertall = 1
color = 0

[State 7675, selfstate]
type = SelfState
trigger1 = Time = 200
ctrl = 1
value = 5000


;---------------------------------------------------------------------------
; Subatomic (stolen from the Atom)
; loosely based on a move originally coded by AngelEcks
; Subatomic (startup)
[Statedef 2180]
type = S
movetype = I
physics = S
anim = 2180
ctrl = 0
velset = 0,0
sprpriority = 2

[State 2180, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,181

[State 2180, AngleDraw]
type = AngleDraw
trigger1 = time > 1
trigger1 = time < 40
scale = 1+(-.02*time),1+(-.02*time)

[State 2180, AfterImage]
type = AfterImage
trigger1 = !Time
time = 5
length = 7
FrameGap = 1
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = Add1

[State 2181, Explod]
type = Explod
trigger1 = TimeMod = 2,0
anim = 2185
ID = 2181
pos = 0,floor(const(size.mid.pos.y)+(Time*1.5))
bindtime = 2
removetime = -2
scale = 1+(-.02*time),1+(-.02*time)
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 2180, AngleDraw]
type = AngleDraw
trigger1 = time > 39
scale = .25,.25

[State 2180]
type = ChangeState
trigger1 = !AnimTime && command = "hold"
value = 2181

[State 2180]
type = ChangeState
trigger1 = !AnimTime && command != "hold"
value = 2182
ctrl = 1


; Subatomic (tiny stance)
[Statedef 2181]
type = S
movetype = I
physics = S
anim = 2181
ctrl = 0
velset = 0,0
sprpriority = 2

[State 2181, Explod]
type = Explod
trigger1 = !Time
anim = 2185
ID = 2181
pos = 0,0
bindtime = -1
removetime = -1
scale = 0.1,0.1
sprpriority = 4
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 2181, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 2181, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 2181, 3]
type = ChangeState
trigger1 = !AnimTime && command != "hold"
value = 2182
ctrl = 1


; Subatomic (end)
[Statedef 2182]
type = S
movetype = I
physics = S
anim = 2180
ctrl = 0
velset = 0,0
sprpriority = 2

[State 2182, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 2181

[State 2182, AfterImage]
type = AfterImage
trigger1  = time = 0
time = 3
length = 10
FrameGap = 1
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = Add1

[State 2182, Explod]
type = Explod
trigger1 = TimeMod = 2,0
anim = 2185
ID = 2182
pos = 0,-floor(Time*1.5)
bindtime = 2
removetime = -2
scale = 0.25+(.02*time),0.25+(.02*time)
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 2182, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,181

[State 2182, AngleDraw]
type = AngleDraw
trigger1 = time < 40
scale = 0.25+(.02*Time),0.25+(.02*Time)

[State 2182, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Intangibility (stolen from Martian Manhunter)
; originally coded by Angelic Charon for Invisible Woman; heavily hacked & modified by me
; Intangibility (startup)
[Statedef 2190]
type = S
movetype = I
physics = S
anim = 2190
ctrl = 0
velset= 0,0

[State 2190, VarSet]
type = VarSet
trigger1 = !AnimTime
trigger1 = power >= 50
trigger1 = var(17) != 2
v = 17
value = 2

[State 2190, sfx]
type = PlaySnd
trigger1 = !Time
value = 9,190

[State 2190, Intangibility Effect]
type = AfterImage
trigger1 = time = 2
trigger1 = var(17) != 2
time = 25
length = 25
timegap = 1
framegap = 1
trans = Add

[State 2190, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[State 2190, ChangeState]
type = ChangeState
trigger1 = !time && var(17) = 2
value = 2191
ctrl = 1


;---------------------------------------------------------------------------
; Intangibility - again
[Statedef 2191]
type = S
movetype = I
physics = S
anim = 2190
ctrl = 0
velset= 0,0

[State 2191, VarSet]
type = VarSet
trigger1 = !AnimTime
v = 17
value = 0

[State 2191, no more afterimage effect]
type = AfterImageTime
trigger1 = !Time
time = 0

[State 2191, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Star Sphere (stolen from Starfire)
[StateDef 2210]
anim = 2210
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
juggle  = 7

[State 2210, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
;physics = A

[State 2210, VelSet]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
x = 15

[State 2210, swoosh]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 0,2

[State 2210, vox]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,210
channel = 0

[State 2210, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
damage = 99,5
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 16, 16
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;guard.sparkno = S8200
sparkxy = 0,-80
animtype = Back
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4,-3
air.hittime = 12
fall = 1
fall.recover = 0

[State 2210, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,HP

[State 2210, 1]
type = ChangeState
trigger1 = Time = 25
value = 52
ctrl = 1

[State 2210, 1]
type = ChangeState
trigger1 = MoveContact
value = 2215
ctrl = 1


; Star Sphere - bounce back after successful hit
[StateDef 2215]
type = A
movetype = I
physics = A
anim = 2215
ctrl = 1

[State 2215, VelSet]
type = VelSet
trigger1 = !Time
x = -3
y = -8


;---------------------------------------------------------------------------
; Flying Punch (stolen from Erradicator)
[StateDef 2230]
anim = 2230
ctrl = 0
type = A
movetype = A
physics = N
juggle = 7
velset = 0,0
poweradd = 25

[State 2230, Width]
type = Width
trigger1 = AnimElem = 2
edge = 30,10
player = 60,10
ignorehitpause = 1
persistent = 1

[State 2230, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 2230, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S1,3
channel = 0
removeongethit = 1

[State 2230, push through]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 2230, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = Add
ignorehitpause = 1
persistent = 1

[State 2230, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 2230, 3]
type = velset
trigger1 = AnimElem = 2
x = 20

[State 2230, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(2) = 4
value = S9,231
channel = -1
ignorehitpause = 1
persistent = 0

[State 2230, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(2) = 6
value = S9,232
channel = -1
ignorehitpause = 1
persistent = 0

[State 2230, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,SA
hitflag = MAF
guardflag = MA
getpower = 45,7
givepower = 50,8
animtype = Diagup
air.animtype = Diagup
fall.animtype = Diagup
priority = 7,Hit
damage = 100+ceil(random/50),0
pausetime = 0,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-50
hitsound = S2,2
guardsound = S3,0
ground.type = Low
air.type = Low
ground.slidetime = 25
ground.hittime = 25
air.hittime = 25
air.slidetime = 25
ground.velocity = 0,-6
air.velocity = 0,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sprpriority = 1
fall = 1

[State 2230, ChangeState]
type = ChangeState
triggerall = frontedgedist <=  -75
trigger1 = time >= 20
trigger2 = frontedgedist <= -250
value = 2235
ctrl = 0
ignorehitpause = 1
persistent = 0

; Flying Punch - aftermath
[Statedef 2235]
type = A
movetype= I
physics = A
juggle = 7
anim = 48
velset = 0,0
ctrl = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = pos y <= 0
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = win
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = win
x = enemynear,pos x
ignorehitpause = 1
persistent = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -300
ignorehitpause = 1
persistent = 0

[State 0, PosAdd]
type = PosAdd
triggerall = !win
trigger1 = time = 0
x = -350
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
x = 0
y = 8
ignorehitpause = 1
persistent = 1


;--------------------------------
; Electric Eel (stolen from Vixen)
[StateDef 2240]
anim = 2240
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 90

[State 2240, Vox]
type = Null ;PlaySnd
trigger1 = !Time
value = S9,23
volume = 150
channel = 0

[State 2240, SFX]
type = PlaySnd
trigger1 = AnimElem = 3
value = S9,240

[State 2240, Explod 0]
type = Explod
trigger1 = AnimElem = 3
anim = 2242
ID = 2242
bindtime = 60
removetime = 60
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1

[State 2240, Explod 1]
type = Explod
trigger1 = AnimElem = 3
anim = 2244
ID = 2244
bindtime = 60
removetime = 60
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1

[State 2240, noshadow]
type = AssertSpecial
trigger1 = 1
flag = unguardable
ignorehitpause = 1

[State 2240, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
hitflag = MAFD
guardflag = MA
animtype = Up
priority = 6,Dodge
damage = 95,0
pausetime = 9,7
;sparkno = S9992
sparkxy = 0,-60
hitsound = S9,13
guardsound = S3,0
ground.type = High
ground.slidetime = 7
ground.hittime = 12
air.hittime = 20
ground.velocity = -4,-8
guard.velocity = -6
air.velocity = -1,-6
sprpriority = 1
fall = 1
p2stateno = 17697

[State 2240, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Plasma Vomit (stolen from Red Lantern)
[StateDef 2260]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2260

[State 2260, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
volume = 0
channel = 0
freqmul = 1.0
loop = 0
pan = 0

[State 2260, beam]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "beam"
ID = 2265
pos = 0,0
postype = p1
stateno = 2265
ownpal = 1

[State 2260, changestate]
type = ChangeState
trigger1 = Time >= 50 & NumHelper(2265) = 0
value = 0
ctrl = 1

;--------
; Plasma Vomit -- beam helper state
[StateDef 2265]
type = A
movetype = A
physics = C
anim = 2265
ctrl = 0
sprpriority = 2

[State 2265, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X
y = parent, Pos Y

[State 2265, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2265, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2265, hitdef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 9
trigger8 = AnimElem = 10
trigger9 = AnimElem = 11
trigger10 = AnimElem = 12
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Heavy
damage = 18,3
pausetime = 0,12
hitsound = S9,611
guardsound = S3,0
sparkno = S9992
sparkxy = 0,-90
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 64,0,0

[State 2265, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Selfish Grab (stolen from Orange Lantern)
[StateDef 2270]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2270

[State 2270, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2272
ID = 2272
bindtime = 24
removetime = 24
sprpriority = -1

[State 2270, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
name = "Plasma Sphere"
ID = 2274
stateno = 2274
pos = 160,-100
postype = p1
facing = 1

[State 2270, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Selfish Grab - construct
[StateDef 2274]
type = S
movetype = A
physics = S
anim = 2274
ctrl = 0

[State 2274, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,270

[State 2274, HitDef]
type = HitDef
trigger1 = IsHelper
attr = S,ST
hitflag = MAF
guardflag = MA
animtype = hard
priority = 5,Hit
damage = 80,25
pausetime = 0,10
sparkno = S9992
sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 14
ground.hit = 12
air.hittime = 20
ground.velocity = 0,0
air.velocity = 0,0
sprpriority = 3
p1stateno = 2275
p2stateno = 2276
kill = 1
guard.kill = 1
numhits = 1

[State 2274, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime


; Selfish Grab - P1 throw action
[StateDef 2275]
anim = 2275
ctrl = 0
type = A
movetype = A
physics = N
velset = -1.6,0

[State 2275, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,2
volume = 0
channel = 0
freqmul = 1.0
loop = 0
pan = 0

[State 2275, 0]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = S9,271

[State 2275, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 0,0

[State 2275, targetdrop]
type = TargetDrop
trigger1 = AnimTime = -1

[State 2275, turn]
type = Turn
trigger1 = AnimTime = -1

[State 2275, destroySelf]
type = DestroySelf
trigger1 = !AnimTime


;-------------------------------------------
; Selfish Grab - P2 being grabbed (custom hit state)
[StateDef 2276]
type = A
movetype = H
physics = N
ctrl = 0
velset = 1.6,0

[State 2276, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 2276

; drained
[State 2276, LifeAdd]
type = LifeAdd
trigger1 = Time % 2
value = -2
kill = 1
absolute = 1

[State 2276, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 2276, 2] ;dropped
type = SelfState
trigger1 = !AnimTime
value = 5050


;---------------------------------------------------------------------------
; Indigo Teleport (stolen from Indigo Lantern)
[StateDef 2280]
anim = 2280
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2280, PlaySnd]
type = PlaySnd
trigger1 = !Time
trigger2 = AnimElem = 3
value = S9,270

[State 2280, Explod]
type = Explod
trigger1 = !Time
anim = 2285
ID = 2285
bindtime = 99
removetime = -2
sprpriority = 2
pos = 0,const(size.mid.pos.y)
ontop = 1
ownpal = 1
removeongethit = 1

; reappear 80 pixels backward
[State 2285, strength 1]
type = PosSet
triggerall = animelem = 3
trigger1 = Var(2) = 0 ; weak punch/kick
x = Pos X - 80 * Facing

; reappear 90 pixels behind P2
[State 2280, strength 3]
type = PosAdd
triggerall = animelem = 3
trigger1 = Var(2) = 2 ; hard punch/kick
x = P2Dist X + 90

[state 2280, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stasis Crystal (stolen from Star Sapphire)
[StateDef 2290]
anim = 2290
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2290, prevent spam]
type = null ;ChangeState
trigger1 = P2StateNo = 2545
trigger2 = P2StateNo = 2295
value = 2002

[State 2290, voice]
type = PlaySnd
trigger1 = Time = 1
value = 9,290
channel = 0

[State 2290, sfx]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,291

[State 2290, helper]
type = Helper
trigger1 = AnimElem = 3
pos = 126,-88
postype = p1
stateno = 2291
ownpal = 1
layerno = 2

[state 2290, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1

; Stasis Crystal: beam anim/hitdef
[StateDef 2291]
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
anim = 2291
sprpriority = 4

[State 2291, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 2291, BindToParent]
type = BindToParent
trigger1 = IsHelper
time = 1
pos = 126,-88

[State 2291, hitdef]
type = HitDef
trigger1 = !Time
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
priority = 5,Dodge
damage = 25,0
pausetime = 0,10
guard.pausetime = 0,10
;sparkno = S2102
;guard.sparkno = S2102
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.hittime = 12
guard.hittime = 10
;ground.velocity = -10,0
sprpriority = 4
palfx.time = 20
palfx.mul = 512,255,512
p1stateno = 2292
p2stateno = 2295

[State 2291, destroyself]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = parent, anim != 2290

;-----------------------------------------------------------------------------------
; Stasis Crystal -- launch helper to handle crystal
[StateDef 2292]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2292, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,61

[State 2292, EnvColor]
type = EnvColor
trigger1 = !Time
value = 255,255,255
time = 4

[State 2292, Helper]
type = Helper
trigger1 = !Time
helpertype = normal
name = "crystal"
ID = 2293
stateno = 2293
pos = 0,10
postype = p2
facing = 0
keyctrl = 0
ownpal = 0
size.xscale = 1.4
size.yscale = 2.2

[State 2292, DestroySelf]
type = DestroySelf
trigger1 = Time = 1

;-----------------------------------------------------------------------------------
; Stasis Crystal -- cocoon helper
[StateDef 2293]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
anim = 2293

[State 2293, bust open]
type = ChangeState
trigger1 = Time = 95
trigger2 = p2movetype = H && p2stateno != 2295
value = 2294

[State 2293, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP
slot = 0
stateno = 2294
time = 1
forceair = 0

[State 2293, HitOverride2]
type = HitOverride
trigger1 = 1
attr = SCA, NT, ST, HT
slot = 1
stateno = 2294
time = 1
forceair = 0

;-----------------------------------------------------------------------------------
; Stasis Crystal -- crystal helper busting open
[StateDef 2294]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
anim = 2294

[State 2293, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,541

[State 2293, destroyself]
type = DestroySelf
trigger1 = !AnimTime

;-----------------------------------------------------------------------------------
; Stasis Crystal -- P2 custom trapped state
[StateDef 2295]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2295, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 2295

[State 2295, PalFXWiz]
type = PalFX
trigger1 = Time = 90
time = 10
add = 256,256,256
mul = 128,128,128
color = 0

[State 2295, break free]
type = SelfState
trigger1 = Time = 90
value = 5030


;---------------------------------------------------------------------------
; Corrupting Touch (stolen from any Black Lantern)
[StateDef 2300]
type = S
movetype = A
physics = S
anim = 2300
ctrl = 0
velset = 0,0

[State 2300, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 2300, vox]
type = null ;PlaySnd
trigger1 = !Time
persistent = 0
value = 9,3
channel = 0

[State 2300, 0]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sparkxy = 0,-75
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 0              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 2302
p2stateno = 2303

[State 2300, missed]
type = ChangeState
trigger1 = !AnimTime
value = 2301
ctrl = 1


;-------------------------------------------
; Corrupting Touch (missed / blocked)
[StateDef 2301]
anim = 2301
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 2301, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Corrupting Touch (successfully grabbed P2)
[StateDef 2302]
anim = 2302
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 2302, absorb explod]
type = Explod
trigger1 = Time = 4
trigger2 = Time = 34
anim = 1015
ID = 1015
facing = 1
bindtime = -1
removetime = 60
sprpriority = 2
ontop = 1
shadow = 0,0,0
ownpal = 1
trans = Sub
removeongethit = 1

[State 2303, PalFX]
type = PalFX
trigger1 = Time = 4
time = 100
add = -60,-60,-30
mul = 256,256,256
sinadd = 40,40,40,40
invertall = 0
color = 256

[State 2302, grab snd]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 2302, draining_snd]
type = PlaySnd
trigger1 = Time = 4
trigger2 = Time = 34
trigger3 = Time = 64
persistent = 1
value = 9,772

[State 2302, powerup]
type = PowerAdd
trigger1 = 1
value = 7

;[State 2302, Bind 1]
;type = TargetBind
;trigger1 = AnimElem = 1
;pos = 100,-130
;
;[State 2302, Bind 2]
;type = TargetBind
;trigger1 = Time = 89
;pos = 100,-10
;
;[State 2302, targetdrop]
;type = TargetDrop
;trigger1 = AnimElem = 2
;
[State 2302, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 100,-130

[State 2302, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -25,-140

[State 2302, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -85,-15

[State 2302, targetdrop]
type = TargetDrop
trigger1 =  AnimElem = 3

[State 2302, turn]
type = Turn
trigger1 = !AnimTime

[State 2302, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Corrupting Touch - P2 being grappled
[StateDef 2303]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2303, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 2303

[State 2303, PalFX]
type = PalFX
trigger1 = Time = 4
time = 100
add = -170,-170,-170
mul = 256,256,256
sinadd = 40,40,40,40
invertall = 1
color = 256

[State 2303, lifedrain]
type = LifeAdd
trigger1 = Alive
value = -2
kill = 1

[State 2303, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1013

[State 2303, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 2303, 2] ; tossed
type = ChangeState
trigger1 = !AnimTime
value = 2304


;-------------------------------------------
; Corrupting Touch - P2 being dropped (custom hit state)
[StateDef 2304]
type = A
movetype = H
physics = A
ctrl = 0
velset = 8,14

[State 2304, Turn]
type = Turn
trigger1 = !Time

[State 2304, 2]
type = SelfState
trigger1 = !Time
value = 5050


;---------------------------------------------------------------------------
; Stars-n-Stripes (stolen from Cap. America)
[StateDef 2510]
anim = 2510
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 2510, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,510
channel = 0

[State 2510, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 2.4
y = -9.8 - (1.5 * Var(2))

[State 2510, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = A
physics = A

[State 2510, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
hitflag = MAFD
guardflag = MA
animtype = Heavy
priority = 5,Hit
damage = 70,15
pausetime = 9,9
sparkxy = 15,-90
sparkno = S9992
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2 - (1.5 * Var(2)), -11 - (2.5 * Var(2))
guard.velocity = -6 - (1.5 * Var(2))
airguard.velocity = -5,-1
air.type = Low
air.velocity = -5,-10
down.bounce = 1
down.velocity = -4,-4
fall = 1
fall.recover = 0

[State 2510, fall back to ground]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Gamma Charge (stolen from Hulk)
[StateDef 2520]
type     = S
movetype = A
physics  = N
ctrl = 0
anim = 2520

[State 2520, gammacharge!]
type = PlaySnd
trigger1 = Time = 0
value = 9,520

[State 2520, woosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,521

[State 2520, velset]
type = VelSet
trigger1 = AnimElem = 2
x = 9

[State 2520, spark]
type = Explod
trigger1 = AnimElem = 2
ID = 10
anim = 2521
bindtime = -1
facing = 1
removetime = -1
sprpriority = 2
removeongethit = 1

[State 2520, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 160
guardflag = MA
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-12
guard.velocity = -4
air.velocity = -4,-8
getpower = 195
givepower = 70
fall = 1

[State 2520, sparkBegone]
type = RemoveExplod
trigger1 = Time = 25
ID = 10

[State 2520, back to stance]
type = ChangeState
trigger1 = Time = 25
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Thunderstrike (stolen from Thor)
[StateDef 2530]
anim = 2530
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 80

[State 2530, playsnd]
type = PlaySnd
trigger1 = Time = 0
value = 1,3
channel = 0

[State 2530, playsnd]
type = PlaySnd
trigger1 = Time = 0
value = 9,532

[State 2531, hitdef]
type = HitDef
triggerall = p2stateno != 17696
trigger1 = AnimElem = 3
attr = S, SA
hitflag = MAFP
guardflag = MA
animtype = medium
priority = 6, Hit
sprpriority = 7
damage = 15,2
pausetime = 0,4
;sparkno = -1;S8570
;guard.sparkno = S8550
sparkxy = 0,-70
hitsound = S9,531
guardsound = S3,0
ground.type = high ;low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -6,-0.8
guard.dist = 320
air.velocity = -3,-2
airguard.velocity = -5
guard.velocity = -5
air.type = Low
air.hittime = 20
palfx.time = 33
palfx.add  = -90,0,140
palfx.sinadd = 100,100,100,10
Palfx.color = 0
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
p2stateno = 2535


[State 2530, helper]
type = Helper
trigger1 = AnimElem = 3
pos = 48,14
postype = p1
stateno = 2531
ownpal = 1
layerno = 2

[State 0, PalFXWiz]
type = PalFX
trigger1 = AnimElem = 3
time = 66
add = 100,100,180
mul = 256,256,256
sinadd = -80,-80,-80,10
invertall = 0
color = 0

[State 2530, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Thunderstrike: lightning anim/hitdef
[StateDef 2531]
anim = 2531
type = S
movetype = A
physics = S
velset = 0,0
juggle = 5
hitcountpersist = 1
sprpriority = 5

[State 2531, BindToParent]
type = BindToParent
trigger1 = IsHelper
time = 1
pos = 48,14

[state 2531, noshadow]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 2531, playsnd]
type = PlaySnd
trigger1 = Time = 0
value = 9,530
channel = 1
volume = -20

[State 2531, hitdef]
type = HitDef
triggerall = p2stateno != 17696
trigger1 = AnimElem = 1 || AnimElem = 6 || AnimElem = 10 || AnimElem = 14 || AnimElem = 18
attr = S, SP
hitflag = MAFP
guardflag = MA
animtype = medium
priority = 6, Hit
sprpriority = 7
damage = 15,2
pausetime = 0,4
sparkno = -1;S8570
;guard.sparkno = S8550
sparkxy = 0,-70
hitsound = S9,531
guardsound = S3,0
ground.type = high ;low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -3
guard.dist = 320
air.velocity = -3,-2
airguard.velocity = -5
guard.velocity = -5
air.type = Low
air.hittime = 20
palfx.time = 33
palfx.add  = -90,0,140
palfx.sinadd = 100,100,100,10
Palfx.color = 0
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
p2stateno = 2535

[State 2531, destroyself]
type = DestroySelf
trigger1 = !AnimTime

[State 2531, 0]
type = Explod
triggerall = movehit
trigger1 = AnimElem = 1 || AnimElem = 6 || AnimElem = 10 || AnimElem = 14 || AnimElem = 18
sprpriority = 7
anim = 2532
postype = P2
pos = 0, -70
random = 40,40
removeongethit = 1

[State 2531, zappy]
type = PlaySnd
triggerall = p2stateno = 17696
trigger1 = AnimElem = 1 || AnimElem = 6 || AnimElem = 10 || AnimElem = 14 || AnimElem = 18
value = 9,531
channel = 1
volume = 100

[State 2531, morehits]
type = hitadd
triggerall = p2stateno = 17696
trigger1 = AnimElem = 1 || AnimElem = 6 || AnimElem = 10 || AnimElem = 14 || AnimElem = 18
value = 1

[State 2531, byebye]
type = Destroyself
trigger1 = parent, MoveType = H
trigger2 = !AnimTime
;trigger3= parent,stateno=2000||parent,stateno=3100||parent,stateno=3200||parent,stateno=3400
;trigger4= parent,stateno=1300||parent,stateno=1310||parent,stateno=1320
;trigger5= parent,stateno=1400||parent,stateno=1410||parent,stateno=1420
;trigger6 = parent, statetype = A
;trigger7 = parent, statetype = C
;trigger8 = parent, stateno = 3500

[State 2531, afterimage]
type = AfterImage
trigger1 = Time = 1
time = 15
length = 18
timegap = 2
framegap = 1
trans = add
paladd = 0,0,0

[State 2531, noreversal]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
ignorehitpause = 1

[State 2531, beam blocker]
type = HitOverride
trigger1 = 1
attr = SCA, SP, HP
stateno = 2532
slot = 0
time = -1

[State 2531, noreversal2]
type = HitBy
trigger1 = 1
value = SCA, SP, HP
ignorehitpause = 1


; Thor's Thunderstrike: beam blocked by enemy special/hyper
[Statedef 2532]
type = A
movetype = A
sprpriority = -1
physics = N

[State 2532, kill sparks]
type = removeExplod
trigger1 = 1
id = 2532

[State 2532, done]
type = Destroyself
trigger1 = 1


; Thor's Thunderstrike: custom P2 state for being-shocked
[Statedef 2535]
type    = A
movetype = H
physics = N
anim = 5000

[State 2535, a1]
type = Velset
trigger1 = time = 0
y = 0
x = 0

[State 2535, a3]
type = ChangeAnim
trigger1 = AnimExist(7696)
value = 7696
persistent = 0

[State 2535, a4]
type = SelfState
trigger1 = Anim != 7696
trigger1 = time = 5
value = 5000

[State 2535, a5]
type = ChangeState
trigger1 = Anim = 7696
value = 17696

;-----------shocked, continued
[Statedef 17696]
type    = A
movetype= H
physics = N
anim = 7696

[State 17696, a1]
type = lifeadd
trigger1 = time = 16
trigger2 = time = 24
trigger3 = time = 32
trigger4 = time = 38
trigger5 = time = 46
value = -13

[State 17696, a2]
type = PalFX
trigger1 = time = 32
time = 33
add = -90,0,140
sinadd = 100,100,100,10

[State 17696, a3]
type = Velset
trigger1 = time = 0
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
x = -2

[State 17696, a4]
type = Velset
trigger1 = time = 5
trigger2 = time = 15
trigger3 = time = 25
trigger4 = time = 35
trigger5 = time = 45
trigger6 = time = 55
trigger7 = time = 65
x = 0

[State 17696, a5]
type = Veladd
trigger1 = time = 0
y = -.1

[State 17696, a6]
type = EnvShake
trigger1 = time = 0
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
time = 5
ampl = -4
freq = 40

[State 17696, a7]
type = changestate;SelfState
trigger1 = 1
value = 17697

[State 17696, a8]
type = SelfState
trigger1 = p2movetype = H
value = 5030

;---shockend cancel for hypers
[Statedef 17697]
type    = A
movetype= H
physics = N
anim = 7696

[State 17697, a1]
type = ChangeAnim
trigger1 = time = 10
value = 5030

[State 17697, a2]
type = SelfState
trigger1 = time = 15
value = 5030



;---------------------------------------------------------------------------
; Web Ball (stolen from Spiderman)
[StateDef 2540]
anim = 2540
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2540, ChangeState]
type = ChangeState
trigger1 = P2StateNo = 2545
trigger2 = P2StateNo = 2295
value = 2002

[State 2540, voice]
type = PlaySnd
trigger1 = Time = 1
value = 9,540
channel = 0

[State 2540, webshooters]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,541

[State 2540, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2546
ID = 2546
pos = 107,-51
bindtime = 8
removetime = 8
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1

[State 2540, Projectile]
type = Projectile
trigger1 = AnimElemTime(3) = 8
ProjID = 2540
projanim = 2541
projhitanim = 2542
projremanim = 2542
projcancelanim = 2542
projremovetime = -1
velocity = 5,0
projpriority = 1
projsprpriority = 3
offset = 107,-51
; HitDef
attr = S,SP
hitflag = MAF
guardflag = MA
getpower = 45
givepower = 22
animtype = light
priority = 5,Hit
damage = 45,5
pausetime = 0,0
guard.pausetime = 4,3
sparkno = -1
guard.sparkno = 0
sparkxy = 0,0
hitsound = S9,542
guardsound = S3,0
sprpriority = 1
p1stateno = 2541
p2stateno = 2545

[state 2540, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
; Web Ball -- launch helper to handle cocoon
[StateDef 2541]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2541, EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
time = 4

[State 2541, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "web cocoon"
ID = 2543
stateno = 2543
pos = 0,10
postype = p2
facing = 0
keyctrl = 0
ownpal = 0
;size.xscale = (target, const(size.width)) / 90
;size.yscale = (target, const(size.height)) / 127
;size.ground.back (int)
;size.ground.front (int)

[State 2541, back2normal]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
; Web Ball -- cocoon helper
[StateDef 2543]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
anim = 2543

[State 2543, bust open]
type = ChangeState
trigger1 = Time = 95
trigger2 = p2movetype = H && p2stateno != 2545
value = 2544

[State 2543, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP
slot = 0
stateno = 2544
time = 1
forceair = 0


;-----------------------------------------------------------------------------------
; Web Ball -- cocoon helper busting open
[StateDef 2544]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
anim = 2544

[State 2543, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,541

[State 2543, destroyself]
type = DestroySelf
trigger1 = Anim = 2544 && !AnimTime


;-----------------------------------------------------------------------------------
; Web Ball -- P2 custom "webbed" state
[StateDef 2545]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2545, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2545

[State 2545, PalFXWiz]
type = PalFX
trigger1 = Time = 90
time = 10
add = 256,256,256
mul = 128,128,128
color = 0

[State 2545, break free]
type = SelfState
trigger1 = Time = 90
value = 5030


;---------------------------------------------------------------------------
; Unibeam (stolen from Iron Man, thanks Magus for the code & sprites)
[Statedef 2550]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 2550
ctrl = 0
sprpriority = 1

[State 2550, dust]
triggerall = !NumExplod(918)
type = Explod
trigger1 = Time = 0
id = 918
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 2550, snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 9,551

[State 2550, swoosh]
type = PlaySnd
trigger1 = !time
value = 0,2

[State 2550, vox]
type = PlaySnd
trigger1 = !time
value = 1,3  ;9,550

[State 2550, Explod]
type = Explod
triggerall = !NumExplod(2551)
trigger1 = AnimElem = 3
anim = 2551
ID = 2551
bindtime = 100
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 2550, splash]
type = Explod
triggerall = !NumExplod(2552)
trigger1 = animelem = 3
ID = 2552
anim = 2552
name = "unibeamSplash"
postype = P1
pos = 40,-20
ownpal = 1
bindtime= -1
sprpriority = 6
facing = 1

[State 2550, helper]
type = Helper
triggerall = !Numhelper(2555)
trigger1 = AnimElemTime(3) = 4
name = "unibeam"
StateNo = 2555
postype = p1
pos = 40, -20
ownpal = 1

[State 2550, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Unibeam helper
[Statedef 2555]
type = A
movetype = A
physics = N
anim = 2555
juggle = 4
hitdefpersist = 1
sprpriority = 2

[State 2555, 3]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2555, 4]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 2555
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2555, 5]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 2555, 6]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2555, beam]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 4
trigger3 = animelem = 8
trigger4 = animelem = 12
trigger5 = animelem = 16
trigger6 = animelem = 20
trigger7 = animelem = 24
attr = S, SP
projID = 2555
projanim = 2555
projhitanim = 2555
damage = 18,1
hitflag= MAFD
hitsound   = S2,1
sparkno = -1
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = -1
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -2
air.animtype = Back
air.velocity = -2.5,-5
air.hittime = 20
air.fall = 1
givepower = 50
getpower = 60
sprpriority = 2
envshake.time = 10
envshake.freq = 180
envshake.ampl = 2

[State 2555, 8]
type = DestroySelf
trigger1 = !AnimTime

[State 2555, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Bubble Trap (stolen from Crystal)
[Statedef 2560]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 2560
ctrl = 0
sprpriority = 2

[State 2560,helper]
type = Helper
triggerall = P2StateNo != 2569
trigger1 = StateNo = 2560
trigger1 = animelem = 3
ID = 2565
pos = 0,0
stateno = 2565
helpertype = normal
name = "bubble"
keyctrl = 0
ownpal = 1

[State 2560,sound]
type = Playsnd
trigger1 = time = 0
value = 0,2

[State 2560,sound]
type = Playsnd
trigger1 = time = 0
value = 1,2

[State 2560, SmallB]
type = Explod
trigger1 = AnimElem = 2
anim = 2561
pos = -100, 0
postype = p1
sprpriority = 6
bindtime = -1
ownpal = 1
ontop = 1

[State 2560, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 27
guardflag = MA
pausetime = 12,12
ground.type = High
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -0
guard.velocity = -0
air.velocity = -0,-5
airguard.velocity = -10
ground.cornerpush.veloff = 0
air.fall = 1
fall.recovertime = 28

[State 2560, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 2560, 2]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;--------Bubble--------
[statedef 2565]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2565
velset = 8,0

[state 2565, snd]
type = playsnd
trigger1 = time = 0
value = 9,560

[State 2565, 3]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2565, 4]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 2565
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2565, 5]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 2565, shadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 2565, Small_Bubbles]
type = Explod
trigger1 = StateNo = 2565
anim = 2561
ID = 2561
removeongethit = 1
removetime = 2
vel = -10-ceil(random/10), 0
postype = p1
pos = 5, 0
random = 5,25
sprpriority = -3
bindtime = 1
ownpal = 1

[state 2565, hit]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 5,1
hitflag= MAFD
hitsound   = 30,3
sparkno = -1
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = -1
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -2
air.animtype = Back
air.velocity = -2.5,-5
p2stateno = 2569

[state 2565, snd]
type = playsnd
trigger1 = movehit = 1
value = 9,561

[State 2565, Big_bub_jaja]
type = Explod
trigger1 = movehit = 1
anim = 2563
pos = -70, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
bindtime = 999
removetime = 60
ownpal = 1

[State 2565, sma_size1]
type = Explod
trigger1 = moveguarded = 1
anim = 2561
velocity = 0.9, -2
pos = -60, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
removetime = 15
ownpal = 1

[State 2565, sma_size2]
type = Explod
trigger1 = moveguarded = 1
anim = 2561
velocity = 0.9, 2
pos = -60, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
removetime = 15
ownpal = 1

[State 2565, sma_size3]
type = Explod
trigger1 = moveguarded = 1
anim = 2561
velocity = 1.5, 3
pos = -60, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
removetime = 15
ownpal = 1

[State 2565, sma_size4]
type = Explod
trigger1 = moveguarded = 1
anim = 2561
velocity = 1.2, -3
pos = -60, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
removetime = 15
ownpal = 1

[State 2565, med1]
type = Explod
trigger1 = moveguarded = 1
anim = 2562
velocity = 1, 0
pos = -80, 0
postype = p2
sprpriority = 6
ontop = 1
removeongethit = 1
removetime = 15
ownpal = 1

[state 2565, sndx]
type = playsnd
trigger1 = moveguarded = 1
value = 9,560

[state 2565, destroy]
type = Destroyself
trigger1 = movecontact = 1

; P2 hit by bubble trap
[Statedef 2569]
type    = A
physics = N
movetype = H
ctrl = 0
anim = 5300

[State 0, ]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 0, ]
type = PowerAdd
trigger1 = 1
value = -5

[State 2569, Blue_FX]
type = PalFX
trigger1 = Anim = 5300
trigger1 = Time = 1
time = 70
add = 50,50,200
mul = 140,254,160
;sinadd = 85,55,110,10
color = 0
;invertall = 1

[State 2569, 6]
type = SelfState
trigger1 = Time = 70
ctrl = 1
value = 5070


;---------------------------------------------------------------------------
; Sand Blast (stolen from Sandman)
[Statedef 2570]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 70
sprpriority = 2
juggle = 4
velset = 0,0

[State 2570, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 2570
ctrl = 1

[State 2570, es]
type = Explod
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 2570, grunt]
type = PlaySnd
trigger1 = !time
value = 1,3
channel = 0

[State 2570, A4]
type = PlaySnd
trigger1 = animelem=3
value = 9,570
channel = 10
ignorehitpause=1
volume=200

[State 2570, A3]
type = Helper
trigger1 = animelem = 3
ID = 2572
name = "sandshower"
StateNo = 2572
postype = p1
pos = -30, -30
ownpal = 1

[State 2570, close]
type = HitDef
trigger1 = !Time
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = hard
priority = 5,hit
damage = ceil(ifelse(fvar(10)*50<7,7,fvar(10)*50)),5
pausetime = 1,1
sparkno = S9992
guard.sparkno = 40
sparkxy = -26,(enemynear,const(size.mid.pos.y))
hitsound   = S5,4
guardsound = S7,1
ground.type = low
ground.slidetime = 30
ground.hittime = 6
ground.velocity = -14
air.velocity = -14, -2
air.hittime = 30
envshake.time = 6
envshake.freq = 127
envshake.ampl = -5
ground.cornerpush.veloff = -25
air.cornerpush.veloff = -25
down.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = -25
guard.dist = 320

[State 2570, 0]
type = envcolor
trigger1 = movehit
time = 2
value = 255,255,255
ignorehitpause = 1
persistent=0

[State 2570, ee]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; Sand Blast - sand shower (helper)
[Statedef 2572]
type    = A
movetype= A
physics = N
anim = 2572
juggle  = 12
velset = 0,0
ctrl = 0
sprpriority = 4

[State 2572, 1]
type = null ;hitoverride
trigger1 =1
attr = SCA,AP
stateno = 1115
ignorehitpause = 1
slot = 1

[State 2572, 2]
type = nothitby
trigger1 = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 2572, 3]
type = null ;hitby
trigger1 = 1
value = SCA,AP
ignorehitpause = 1

[State 2572, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 2572, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 2572, 0]
type = BindToParent
trigger1 = 1
pos = -30, -30

[State 2572, v0]
type = VarSet
trigger1 = AnimElemtime(2)>=0 &&  AnimElemtime(5)<=3
v = 7
value =(enemynear,const(size.head.pos.y))+15
ignorehitpause = 1

[State 2572, v1]
type = VarSet
trigger1 = AnimElemtime(6)>=0 &&  AnimElemtime(7)<=3
v = 7
value =(enemynear,const(size.mid.pos.y))
ignorehitpause = 1

[State 2572, v2]
type = VarSet
trigger1 = AnimElemtime(8)>=0 &&  AnimElemtime(9)<=0
v = 7
value =-25
ignorehitpause = 1

[State 2572, hc]
type = parentvaradd
trigger1 = movehit && numtarget
var(15)=1
ignorehitpause = 1
;persistent = 0

[State 2572, 6]
type = HitDef
trigger1 =  AnimElem = 3 || AnimElem = 5||AnimElem = 7 || AnimElem = 9
attr = A, SP
hitflag = MAFD
guardflag = MA
pausetime = 2, 2
animtype = medium
damage = ceil(ifelse(root,fvar(10)*40<7,7,root,fvar(10)*40)),2
priority = 5, Hit
sprpriority =4
sparkno = S9992
guard.sparkno = 40
sparkxy = ifelse(!var(1),0,-15),Var(7)
hitsound = S2,0
guardsound = S3,0
ground.type = low
air.type = low
ground.velocity = -6
ground.slidetime = 10
ground.hittime = 10
air.velocity = -4, -4
air.hittime = 30
guard.slidetime = 10
guard.hittime = 6
guard.velocity = -5
down.velocity = -4, -5
down.hittime = 15
envshake.time = 7
envshake.ampl = 4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 10
givepower = 5
guard.dist = 320

[State 2572, 6]
type = HitDef
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 6||AnimElem = 8
attr = A, SP
hitflag = MAFD
guardflag = MA
pausetime = 2, 2
animtype = medium
damage = ceil(ifelse(root,fvar(10)*40<7,7,root,fvar(10)*40)),10
priority = 5, Hit
sprpriority =4
sparkno = S9992
guard.sparkno = 40
sparkxy = ifelse(!var(1),0,-15),Var(7)
hitsound = S2,0
guardsound = S3,0
ground.type = high
air.type = high
ground.velocity = -6
ground.slidetime = 10
ground.hittime = 10
air.velocity = -4, -4
air.hittime = 30
guard.slidetime = 10
guard.hittime = 6
guard.velocity = -5
down.velocity = -4, -5
down.hittime = 15
envshake.time = 7
envshake.ampl = 4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 10
givepower = 5
guard.dist = 320

[State 2572, A4]
type = VarSet
trigger1 = animelem = 8
v = 10
value = 300
ignorehitpause = 1

[State 2572, A4]
type = VarSet
trigger1 = animelem=10||animelem=11||animelem=12||animelem=13
v = 10
value = Var(10)-50
ignorehitpause = 1

[State 2572, A6]
type = DestroySelf
trigger1 = !animtime
trigger2 = parent,stateno != 2570


;---------------------------------------------------------------------------
; Berserker Barrage (stolen from Wolverine)
[Statedef 2580]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd = 84
ctrl = 0
anim = 2580

[State 2580, motion blur]
type = Explod
trigger1 = AnimElem = 2
anim = 2581
ID = 2581
bindtime = 999
removetime = -1
sprpriority = 1
removeongethit = 1

[State 2580, RemoveExplod]
type = RemoveExplod
trigger1 = !AnimTime
id = 2581

[State 2580, mash counter]
type = VarSet
trigger1 = !Time
v = 6
value = 0

[State 2580, VelSet]
type = Velset
trigger1 = Time > 0
x = ifelse(var(2)=0, 3, ifelse(var(2)=1, 4, 4.5))
y = 0

[State 2580, Vox]
type = PlaySnd
trigger1 = Animelem = 1
value = 9,580
channel = 0

[State 2580, SFX]
type = PlaySnd
trigger1 = animElem = 4
trigger2 = animElem = 7
value = 9,581

[State 2580,HitDef]
type = HitDef
trigger1 =  AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 20,10
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 4,10
sparkno = S77
sparkxy = -10,-58
hitsound = S9,592
guardsound = S3,0
ground.type = low
ground.slidetime = 9
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -7,-6
air.velocity = -7,-6

[State 2580,HitDef]
type = HitDef
trigger1 =  AnimElem = 7
attr = S, SA
animtype  = Hard
damage    = 20,10
guardflag = MA
priority = 3
pausetime = 4,10
sparkno = S77
sparkxy = -10,-58
hitsound = S9,592
guardsound = S1900,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -7,-6
air.velocity = -7,-6

[State 2580, slash1]
type = Explod
trigger1 = AnimElem = 7
anim = 2582
pos = -70,-120
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
pausemovetime = -1
ownpal = 1

[State 2580, slash2]
type = Explod
trigger1 = AnimElem = 4
anim = 2583
pos = -25,50
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
pausemovetime = -1
ownpal = 1

[State 2580,varset]
type = VarSet
triggerall = Time > 1
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = var(1) = 1
v = 6
value = 1

[State 2580, Mashing Hits]
type = ChangeState
triggerall = !AnimTime
triggerall = movecontact
trigger1 = var(6) = 1
value = 2585

[State 2580, Finish]
type = ChangeState
trigger1 = !AnimTime
value = 2589


; Berserker Barrage (extra hits from mashing)
;----------------------------------------------------------------------------
[Statedef 2585]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 50
ctrl = 0
anim = 2585

[State 2580, motion blur]
type = Explod
trigger1 = AnimElem = 2
anim = 2581
ID = 2581
bindtime = 999
removetime = -1
sprpriority = 1
removeongethit = 1

[State 2580, RemoveExplod]
type = RemoveExplod
trigger1 = !AnimTime
id = 2581

[State 2585,Var]
type = VarSet
trigger1 = !Time
v = 6
value = 0

[State 2585,Var]
type = VarAdd
trigger1 = !Time
v = 21
value = 1

[State 2585,vel]
type = Velset
trigger1 = Time > 0
x = 4.5
y = 0

[State 2585,Snd]
type = PlaySnd
trigger1 = animElem = 1
trigger2 = animElem = 4
value = 9,581

[State 2585,HitDef]
type = HitDef
trigger1 =  AnimElem = 1
attr = S, SA
animtype  = Hard
damage    = 20,10
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 4,10
sparkno = S77
sparkxy = -10,-58
hitsound = S9,592
guardsound = S3,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -7,-6
air.velocity = -7,-6

[State 2585,hitDef]
type = HitDef
trigger1 =  AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 20,10
guardflag = MA
priority = 3
pausetime = 4,10
sparkno = S77
sparkxy = -10,-58
hitsound = S9,592
guardsound = S3,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -7,-6
air.velocity = -7,-6

[State 2585,Exp]
type = Explod
trigger1 = AnimElem = 1
anim = 2583
pos = -25,50
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
pausemovetime = -1
ownpal = 1

[State 2585,Exp]
type = Explod
trigger1 = AnimElem = 4
anim = 2582
pos = -70,-120
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
pausemovetime = -1
ownpal = 1

[State 2585,varset]
type = VarSet
triggerall = var(21) < 3
triggerall = movecontact
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
v = 6
value = 1

[State 2585,Change]
type = ChangeState
triggerall = var(21) < 3
trigger1 = !AnimTime
trigger1 = var(6)
value = 2585

[State 2585, finish]
type = ChangeState
triggerall = !AnimTime
trigger1 = !var(6)
trigger2 = var(21) >= 3  ; no more looping
value = 2589


; Berserker Barrage - end
;----------------------------------------------------------------------------
[Statedef 2589]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 2589

[State 2589, reset loop counter]
type = Varset
trigger1 = !Time
v = 21
value = 0

[State 2589, nothit]
type = NotHitBy
;triggerall = Var(3) != 2
trigger1 = Time >= 0
value = SCA
time = 5

[State 2589,  7]
type = AfterImage
trigger1 = AnimElem = 1
Time = 1

[State 2589,  0]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Symbiote Shards (stolen from Carnage)
[StateDef 2590]
type = S
movetype = A
physics = S
anim = 2590
poweradd = 25
velset = 0,0
ctrl = 0

[State 0, ]
type = PosSet
trigger1 = time = 0
y = 0

[State 2590, grunt]
type = PlaySnd
trigger1 = Time = 0
value = S1,3
channel = 0

[State 0, ]
type = PlaySnd
trigger1 = animelem = 3
value = S9,591

[State 0, ]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "spike"
ID = 2591
pos = 60,-47
postype = p1
facing = 1
stateno = 2591
ownpal = 1

[State 0, ]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "spike"
ID = 2591
pos = 50,-53
postype = p1
facing = 1
stateno = 2591
ownpal = 1

[State 0, ]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "spike"
ID = 2591
pos = 50,-62
postype = p1
facing = 1
stateno = 2591
ownpal = 1

[State 0, ]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "spike"
ID = 2591
pos = 50,-68
postype = p1
facing = 1
stateno = 2591
ownpal = 1

[State 0, ]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Carnage - Shard flying
[Statedef 2591]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2591
velset = 8,0
juggle = 4
sprpriority = 5

[State 0, ]
type = Nothitby
trigger1 = stateno = 2591
value = SCA,NA,SA,HA,NT,ST,HT

[State 0, ]
type = HitBy
trigger1 = stateno = 2591
value = SCA,NP,SP,HP
time = 1

[State 0, ]
type = HitOverride
trigger1 = stateno = 2591
slot = 1
time = 2
stateno = 2592
attr = SCA, NP, SP, HP
ignorehitpause = 0

[State 0, ]
type = ScreenBound
trigger1 = stateno = 2591
value = 0

[State 0, ]
type = VelSet
trigger1 = stateno = 2591
x = 7
y = 0

[State 0, ]
type = VelMul
trigger1 = time >= 0
x = 1.5

[State 0, ]
type = AfterImage
trigger1 = time = 0
time = 999
length = 20
framegap = 1
palcolor = 256
palbright = 20,20,20
palcontrast = 250,250,250
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .75,.6,.75
trans = Add

[State 0, ]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 2
under = 0
ignorehitpause = 1
persistent = 0

[State 0, ]
type = HitDef
trigger1 = movecontact = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = light
ground.type = high
air.type = low
priority = 6,Hit
damage = 15,5
pausetime = 0,20
guard.pausetime = 0,3
sparkno = S9992
guard.sparkno = 40
sparkxy = 0,0
hitsound = s9,592
guardsound = s3,0
ground.slidetime = 10
guard.slidetime = 10
ground.hittime = 10
guard.hittime = 10
air.hittime = 25
ground.velocity = -6
guard.velocity = -3
air.velocity = -2,-1
air.fall = 1

[State 0, ]
type = ChangeState
trigger1 = movecontact = 1
value = 2592

[State 0, ]
type = DestroySelf
trigger1 = frontedgedist <= -15


; Carnage - Shard hit
[Statedef 2592]
type = S
movetype = I
physics = S
ctrl = 0
anim = 2592
velset = 0,0
sprpriority = 5

[State 0, ]
type = DestroySelf
trigger1 = !AnimTime



;---------------------------------------------------------------------------
; Teleport (stolen from Dr. Doom)
[StateDef 2600]
anim = 2600
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2600, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S9,600

; reappear 100 pixels backward
[State 2600, strength 1]
type = PosSet
triggerall = animelem = 6
trigger1 = Var(2) = 0 ; weak punch/kick
x = Pos X - 100 * Facing

; appear immediately behind the opponent
[State 2600, strength 2]
type = PosAdd
triggerall = animelem = 6
trigger1 = Var(2) = 1 ; medium punch/kick
x = P2Dist X + 40

; reappear up in the air and moving toward P2 (jump-in style)
[state 2600, air reappear]
type = changestate
trigger1 = Var(2) = 2
trigger1 = AnimElemTime(7) = -1
value = 2601

[state 2600, back to stance]
type = changestate
trigger1 = Var(2) < 2
trigger1 = !AnimTime
value = 0
ctrl = 1


; Teleport - reappear in mid-air
[StateDef 2601]
anim = 2601
ctrl = 0
type = S
movetype = I
physics = A
velset = 0,0

[State 2601, posadd]
type = PosAdd
trigger1 = !Time
x = P2Dist X - 120
y = Pos Y - 90

[State 2601, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[state 2601, falling toward P2]
type = VelSet
trigger1 = AnimTime = -1
x = 4

[state 2601, falling]
type = changestate
trigger1 = !AnimTime
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Flame Breath (stolen from Ghost Rider)
[StateDef 2610]
anim = 2610
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2615, playsnd]
type = PlaySnd
trigger1 = time = 0
value = 9,610
channel = 0

[State 2610, flames]
type = Helper
trigger1 = AnimElem = 2
name = "flamebreath"
ID = 2615
pos = 69,-58
stateno = 2615
ownpal = 1

[state 2610, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1

; flame breath - fire helper
[StateDef 2615]
anim = 2615
ctrl = 0
type = S
movetype = A
physics = N

[State 2615, no moving]
type = BindToParent
trigger1 = Time = 0
time = 64
pos = 69, -58

[State 2615, playsnd]
type = PlaySnd
trigger1 = time = 1
value = 9,611

[State 2615, noshadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2615, 2]
type = HitDef
trigger1 = AnimElem >= 1
attr = S, SA
animtype  = Hard
damage    = 40
pausetime = 12,12
hitsound   = 15,0
guardflag = MA
hitflag = MAF
sparkno = -1
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = -3,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
palfx.time = 15
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0

[State 2615, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2615, destroyself]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Pinhead (stolen from Strong Guy)
[StateDef 2620]
type     = S
movetype = A
physics  = N
ctrl = 0
anim = 2620

[State 2620, vox]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,620

[State 2620, woosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,521

[State 2620, velset]
type = VelSet
trigger1 = AnimElem = 2
x = 9.2

[State 2620, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 130
guardflag = MA
pausetime = 9,9
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9995
animtype = Back
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7,-4
guard.velocity = -4
air.velocity = -8,-5
getpower = 195
givepower = 70
fall = 1

[State 2620, back to stance]
type = ChangeState
trigger1 = Time = 25
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Fire Stomp (stolen from Thanos)
[Statedef 2630]
type = S
ctrl = 0
anim = 2630
velset = 0,0

[State 2630, dust]
type = Explod
trigger1 = Time = 0
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 2630, fire]
type = Helper
trigger1 = (Time >= 15) && (Time % 5 = 0)
name = "fire spike"
pos = (Time * 6) + 20, 0
postype = p1
StateNo = 2635

[State 2630, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Fire Stomp: helper state for flames
[StateDef 2635]
type    = C
MoveType= A
physics = N
ctrl = 0
anim = 2635
sprpriority = 2

[State 2635, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9,635
channel = 1
volume = -100

[State 2635, make me unhittable]
type = AssertSpecial
trigger1 = IsHelper
flag = unguardable

[State 2635, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2615, 2]
type = HitDef
trigger1 = AnimElem >= 1
attr = C, SA
animtype  = Hard
damage    = 40
pausetime = 0,9
hitsound   = S2,2
guardsound = S3,0
guardflag = MA
hitflag = MAFD
sparkno = 2
guard.sparkno = 40
sparkxy = -10, -10
ground.type = Low
ground.slidetime = 15
ground.hittime  = 16
ground.velocity = -6,0
guard.velocity = -8
air.velocity = -7,-1
airguard.velocity = -9, 0
palfx.time = 15
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0

[State 2615, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2635, done]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Healing Taunt (stolen from Deadpool)
[Statedef 2640]
type = S
ctrl = 0
anim = 2640
velset = 0,0

; put a random value 0-5 in var(8), and use it to trigger both the snd and the explod
[State 2640, VarSet]
type = VarSet
trigger1 = !Time
v = 8
value = (Random * 6) / 1000

[State 2640, 1]
type = PlaySnd
trigger1 = !Time
value = 9,640 + Var(8)
channel = 0

[State 2640, speech bubble]
type = Explod
trigger1 = Time = 3
anim = 2641
facing = 1
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 0

[State 2640, speech]
type = Explod
trigger1 = Time = 3
anim = 2642 + Var(8)
facing = Facing
pos = IfElse(Facing=1, 0, 104), 0
postype = p1
bindtime = -1
sprpriority = 1

[State 2640, 2]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = NoAutoTurn

[State 2640, LifeAdd]
type = LifeAdd
trigger1 = AnimTime < 0
value = 3
absolute = 1

[State 2640, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Earthquake (stolen from Juggernaut)
[Statedef 2650]
type = S
ctrl = 0
anim = 2650
velset = 0,0

[State 2650, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 9,650
channel = 0

[State 2650, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 2650, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 30
freq = 80
ampl = -9
phase = 45

[State 2650, ground]
type = Helper
trigger1 = (AnimElemTime(3) >= 0) && (TimeMod = 10, 0) && (Time <= 40)
name = "groundswell"
pos = (Time * 4) + 50, 0
postype = p1
StateNo = 2655

[State 2650, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Earthquake: helper state for ground swells
[StateDef 2655]
type    = C
MoveType= A
physics = N
ctrl = 0
anim = 2655
sprpriority = 2

[State 2655, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9,655
channel = 1
volume = -100

[State 2655, make me unhittable]
type = AssertSpecial
trigger1 = IsHelper
flag = unguardable

[State 2655, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2655, HitDef]
type = HitDef
trigger1 = time = 0
attr = C,SP
damage = 30,10
fall = 1
guardflag = MA
hitflag = MAFD
pausetime = 6,6
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;sparkxy = 0,-70
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 20
ground.velocity = -1,-7
guard.velocity = -4
air.velocity = 0,-8

[State 2655, done]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Elastic Slam (stolen from Mr. Fantastic)
[StateDef 2660]
anim = 2660
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 50

[State 2660, 0]
type = HitDef
trigger1 = !Time
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sparkxy = 0,-80
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 2662
p2stateno = 2663

[State 2660, missed]
type = ChangeState
trigger1 = !AnimTime
value = 2661
ctrl = 1


;-------------------------------------------
; Elastic Slam (missed / blocked)
[StateDef 2661]
anim = 2661
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 2661, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Elastic Slam (successfully grabbed P2)
[StateDef 2662]
anim = 2662
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 2662, snd0]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 2662, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
trigger2 = AnimElem = 7
trigger3 = AnimElem = 13
pos = 130,-140

[State 2662, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
trigger3 = AnimElem = 14
pos = 75,-160

[State 2662, Bind 3]
type =  TargetBind
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
trigger3 = AnimElem = 15
pos = -135,15

[State 2662, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
pos = -90,-70

[State 2662, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
pos = -75,-160

[State 2662, Bind 6]
type =  TargetBind
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
pos = 135,15

[State 2662, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
value = F7,2

[State 2662, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
time = 6

[State 2662, sparkFront]
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
anim = 8400
ID = 8400
pos = 0,0
postype = p2
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 2662, sparkBack]
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
anim = 8401
ID = 8401
pos = 0,0
postype = p2
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
ownpal = 1

[State 2662, freeze]
type = PosFreeze
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15

[State 2662, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
value = 1

[State 2662, targetdrop]
type = TargetDrop
trigger1 = !AnimTime

[State 2662, turn]
type = null ;Turn
trigger1 = !AnimTime

[State 2662, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Elastic Slam - smashed around (p2 custom hit state)
[StateDef 2663]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2662, falldmg]
type = LifeAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
value = -20

[State 2663, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 2663

[State 2663, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = 1 ;AnimElem = 3
movecamera = 0,0 ;160,0

[State 2663, 2] ; release
type = ChangeState
trigger1 = !AnimTime
value = 2664


;-------------------------------------------
; Elastic Slam - Being released (p2 custom hit state)
[StateDef 2664]
type = A
movetype = H
physics = A
ctrl = 0
velset = 5,12

[State 2664, Turn]
type = Turn
trigger1 = !Time

[State 2664, 2] ;released
type = SelfState
trigger1 = !Time
value = 5101 ;5050


;---------------------------------------------------------------------------
; Invisibility (stolen from Invisible Woman; coded by Angelic Charon, modified by me)
[Statedef 2670]
type = S
movetype = I
physics = S
anim = 2670
ctrl = 0
velset= 0,0

[State 2670, VarSet]
type = VarSet
trigger1 = !AnimTime
trigger1 = power >= 50
trigger1 = var(17) != 1
v = 17
value = 1

[State 2670, sfx]
type = PlaySnd
trigger1 = Time = 0
value = 9,670

[State 2670, Invisibility Effect]
type = AfterImage
trigger1 = time = 2
trigger1 = var(17) != 1
time = 25
length = 25
palcolor = 0
palinvertall = 1
timegap = 1
framegap = 1
trans = add

; boost defense
[State -2, DefenceMulSet2]
type = DefenceMulSet
trigger1 = Var(17) = 1
value = 2.5 ; Defence value, multiplied by 2.5.

; boost speed a bit
[State -2, VelSet2]
type = VelMul
trigger1 = Var(17) = 1
x = 1.2 ; Speed value, multiplied by 1.2

[State 2670, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[State 2670, ChangeState]
type = ChangeState
trigger1 = !time && var(17) = 1
value = 2671
ctrl = 1


;---------------------------------------------------------------------------
; Stolen Special Invisibility: re-visibility
[Statedef 2671]
type = S
movetype = I
physics = S
anim = 2670
ctrl = 0
velset= 0,0

[State 2671, VarSet]
type = VarSet
trigger1 = !AnimTime
v = 17
value = 0

; back to normal defence
[State -2, DefenceMulSet1]
type = DefenceMulSet
trigger1 = Time = 0
value = 1

; back to normal speed
[State -2, VelSet1]
type = VelMul
trigger1 = Time = 0
x = 1

[State 2671, no more Invisibility Effect]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 2671, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Charge (stolen from Thing)
[StateDef 2680]
type     = S
movetype = A
physics  = N
ctrl = 0
anim = 2680

[State 2680, woosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,521

[State 2680, velset]
type = VelSet
trigger1 = AnimElem = 2
x = 9.8

[State 2680, spark]
type = Explod
trigger1 = AnimElem = 2
ID = 10
anim = 2521
bindtime = -1
facing = 1
pos = -40,0
removetime = -1
sprpriority = 2
removeongethit = 1

[State 2680, HitDef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S, SA
damage = 16
guardflag = MA
pausetime = 0,2
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -3
air.velocity = -5,-1
getpower = 15
givepower = 10
fall = 1

[State 2680, sparkBegone]
type = RemoveExplod
trigger1 = Time = 40
ID = 10

[State 2680, back to stance]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Fireball (stolen from Human Torch)
[Statedef 2690]
type = S
ctrl = 0
anim = 2690
velset = 0,0

;Generated by Fighter Factory PalFX Editor
[State 2690, PalFXWiz]
type = PalFX
trigger1 = AnimElem = 1
time = 25
add = 40,-70,-200
mul = 256,256,256
sinadd = 40,30,0,10
invertall = 1
color = 0

[State 2690, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 2690, Helper]
type = Helper
trigger1 = AnimELem = 3
name = "Fireball"
ID = 2695
stateno = 2695
pos = 130,-80
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
size.ground.back = 28
size.ground.front = 12
size.air.back = 28
size.air.front = 12
size.height = 24
;size.proj.doscale (int)

[State 2690, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Human Torch fireball
[StateDef 2695]
anim = 2695
ctrl = 0
type = S
movetype = A
physics = N
velset = 6,0

[State 2695, playsnd]
type = PlaySnd
trigger1 = time = 1
value = 9,611

[State 2695, noshadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2695, 1]
type = HitDef
trigger1 = AnimElem >= 1
attr = S, SA
animtype  = Hard
damage    = 40
pausetime = 0,12
hitsound   = S10,660
guardflag = MA
hitflag = MAF
sparkno = -1
guardsound = S10,660
ground.type = Low
ground.slidetime = 60
ground.hittime  = 20
ground.velocity = -3,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
p2stateno = 7697

[State 2695, 2]
type = Explod
trigger1 = MoveContact
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 20
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 2695, destroyself]
type = DestroySelf
trigger1 = MoveContact
trigger2 = Time = 100


; Burned - custom P2 state
[Statedef 7697]
type    = A
physics = N
movetype = H
ctrl = 0
anim = 5002

[State 7696, 5]
type = VelAdd
trigger1 = Time = 0
x = -3
y = ifelse((vel y < 1 && vel Y >= 0), -5, 0)

[State 7697, changeAnim]
type = ChangeAnim
trigger1 = AnimExist(7697) && Anim != 7697
value = 7697

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
trigger1 = Time = 0
time = 25
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 0

[State 7696, gravity]
type = VelAdd
trigger1 = Time > 2
y = 0.45

[State 7696, 6]
type = SelfState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 5100


;---------------------------------------------------------------------------
; Power Cosmic (stolen from Silver Surfer)
[Statedef 2700]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2700
velset = 0,0

[State 2700, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,700
channel = 0

[State 2700, 2]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "ray"
pos = 40, -86
postype = P1
stateno = 2705
ownpal = 1

[State 2700, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; power cosmic - helper
[Statedef 2705]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 2705
sprpriority = 5
trans = add

[State 2705, 0]
type = AssertSpecial
trigger1 = anim = 2705
flag = noshadow

[State 3101, 1]
type = BindToParent
trigger1 = time = 0
time = -1
pos = 40, -86

[State 2705, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,701

[State 2705, 2]
type = HitDef
trigger1 = AnimElem <= 5
attr = A, SP
animtype  = Heavy
damage    = 30
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy =  0,-30
hitsound   = S12,6
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -5,0
guard.velocity = -11
air.velocity =  -5,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100

[State 2705, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = A, NP
animtype  = Heavy
damage    = 30
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy =  0,-30
hitsound   = S12,6
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -5,0
guard.velocity = -11
air.velocity =  -5,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100

[State 2705, 4]
type = HitDef
trigger1 = AnimElem >= 8
attr = A, NP
animtype  = Heavy
damage    = 30
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy =  0,-30
hitsound   = S12,6
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -5,0
guard.velocity = -11
air.velocity =  -5,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100

[State 2705, 5]
type = DestroySelf
Trigger1 = time = 22 ;removed when the spark times out
Trigger2 = parent, movetype = H ; goes away if we get hit
ignorehitpause = 0


;---------------------------------------------------------------------------
; Cyclone Kick (stolen from Cyclops)
[Statedef 2720]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 2720
ctrl = 0

[State 2720, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 3.6
y = -4.1

[State 2720, grunt]
type = PlaySnd
trigger1 = !Time
value = 1,1
channel = 0

[State 2720, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = A,SA
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = back
priority = 6,Dodge
damage = 70,8
pausetime = 10,10
sparkno = S9992
sparkxy = 0,-10
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
guard.velocity = -6
air.velocity = -3,-1
;fall = 0
;fall.xvelocity = 0
;fall.yvelocity = -4.5
;fall.recover = 1
;fall.recovertime = 4
;fall.damage = 0
;air.fall = 0
;down.bounce = 0

[State 2720, Gravity]
type = Gravity
trigger1 = 1

[State 2720, ChangeState]
type = ChangeState
trigger1 = Pos Y >= -5 && Time > 15
value = 2722
ctrl = 0

; cyclone kick, part 2
[Statedef 2722]
type    = A
movetype= A
physics = C
velset = 1,0
anim = 2722
ctrl = 0

[State 2722, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 2722, grunt]
type = PlaySnd
trigger1 = !Time
value = 1,2
channel = 0

[State 2722, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, SA
damage = 45,5
guardflag = L
pausetime = 10,10
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-50
sparkno = S9992
animtype = Heavy
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -4.3
guard.velocity = -2.1
air.velocity = -3.2,-3.8

[State 2722, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Nerve Strike (stolen from Elektra)
[Statedef 2730]
type    = A
movetype= A
physics = N
velset = backedgedist/-5 * (.35),-10
anim = 2730
ctrl = 0
sprpriority = 1

[State 2730, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 2730, adjust velX]
type = VelSet
trigger1 = vel x = 0
trigger1 = backedgedist < 25
x = .45

[State 2730, adjust velY]
type = VelAdd
trigger1 = vel y <= 0
y = .6

[State 2730, no playerpush]
type = Playerpush
trigger1 = 1
value = 0

[State 2730, ChangeState]
type = ChangeState
trigger1 = pos y < -65
trigger1 = backedgebodydist <= 10
trigger2 = vel y > 1
value = 2731


; Nerve Strike - dive & attack
[Statedef 2731]
type    = A
movetype= A
physics = N
anim = 2731
ctrl = 0
sprpriority = 1

[State 2731, still]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = 0

[State 2731, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,2

[State 2731, dive]
type = VelSet
trigger1 = AnimElem = 2
x = 12 + var(2)*5

[State 2731, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
physics = A

[State 2731, HitDef]
type = HitDef
trigger1 = !Time
attr = S,SA
hitflag = MA
guardflag = MA
animtype = hard
priority = 6,Hit
damage = 80,5
pausetime = 9,9
sparkno = S9992
guard.sparkno = 0
sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 12
guard.slide = 16
ground.hit = 8
air.hittime = 20
ground.velocity = 2,0
guard.velocity = 4
air.velocity = 5,3
ground.cornerpush.veloff = 5
sprpriority = 1
p2stateno = 2735
kill = 1

[State 2731, ChangeState]
type = ChangeState
trigger1 = MoveContact
value = 2732
ctrl = 1


; Nerve Strike - bounce back after successful hit
[StateDef 2732]
type = A
movetype = I
physics = A
anim = 2732
ctrl = 1

[State 2732, VelSet]
type = VelSet
trigger1 = !Time
x = -2
y = -5


; Nerve Strike - P2 custom state decider (dizzy if on ground, fall back if in air)
[StateDef 2735]
type = A
movetype = I
physics = A
ctrl = 0

[State 2735, ChangeState]   ; dizzy if on ground
type = ChangeState
trigger1 = !Time && Pos Y >= 0
value = 5300

[State 2735, VelSet]
type = VelSet
trigger1 = Time = 1
x = -4
y = 6

[State 2735, ChangeState]   ; fall if in air
type = ChangeState
trigger1 = Time = 2
value = 5050


;---------------------------------------------------------------------------
; Brimstone Teleport (stolen from Nightcrawler)
[StateDef 2740]
anim = 2740
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0
sprpriority = 2
poweradd = 15

[State 2740, PlaySnd]
type = PlaySnd
trigger1 = !Time
trigger2 = AnimElem = 3
value = S9,740

[State 2740, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 2745
ID = 2745
bindtime = 11
removetime = -2
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

; reappear 100 pixels backward
[State 2740, strength 1]
type = PosSet
triggerall = animelem = 3
trigger1 = Var(2) = 0 ; weak punch/kick
x = Pos X - 100 * Facing

; appear immediately behind the opponent
[State 2740, strength 2]
type = PosAdd
triggerall = animelem = 3
trigger1 = Var(2) >= 1 ; medium punch/kick (and hard too, for the moment)
x = P2Dist X + 60

; reappear up in the air and moving toward P2 (jump-in style)
[state 2740, air reappear]
type = null ;changestate
trigger1 = Var(2) = 2
trigger1 = AnimElemTime(3) = -1
value = 2741

[State 2740, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2745
ID = 2745
bindtime = 11
removetime = -2
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 1

[state 2740, back to stance]
type = changestate
;trigger1 = Var(2) < 2
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Bonerang (stolen from Marrow)
[StateDef 2750]
type = S
movetype = A
physics = S
anim = 2750
poweradd = 25
velset = 0,0
ctrl = 0

[State 2750, grunt]
type = PlaySnd
trigger1 = !Time
value = S1,2
channel = 0

[State 2750, proj]
type = Projectile
trigger1 = AnimElem = 3
projid = 2755
projanim = 2755
projscale = 1,1
projremove = 1
projremovetime = 120
attr = A,SP
hitflag = MAF
guardflag = MA
velocity = 0,0
;velocity = 4,-0.6
animtype = Hard
ground.type = High
ground.hittime = 20
guard.hittime = 6
ground.slidetime = 5
guard.slidetime = 3
damage = 30,10
offset = 188,-78
postype = p1
hitsound = S2, 2
guardsound = S3,0
guard.sparkno=S910
sparkno= S900
projhits = 3
projmisstime =18
projshadow = -1,0,0
remvelocity = 0,4
projremanim = 2756
ground.velocity = 8 - 16 * (p2dist x < 188),0
air.velocity = 1 - 2 * (p2dist x < 188),-2
air.type = low

[State 2750, grunt]
type = PlaySnd
trigger1 = Time % 6 = 0
value = S0,0

[State 2750, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Decibel Barrage (stolen from Songbird)
[StateDef 2760]
type = S
movetype = A
physics = S
anim = 2760
poweradd = 25
velset = 0,0
ctrl = 0

[State 2760, Vox]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,2
channel = 0

[State 2760, SFX]
type = PlaySnd
trigger1 = AnimElem = 2
value = S9,762

[State 2760, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = -4.6

[State 2760, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = A

[State 2760, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
name = "Retreating Guard"
ID = 2761
stateno = 2761
pos = 0,0
postype = p1
keyctrl = 0
size.air.back = 95
size.air.front = 0

[State 2760, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal
name = "Advancing Guard"
ID = 2762
stateno = 2762
pos = 0,0
postype = p1
keyctrl = 0
size.air.back = 0
size.air.front = 95

[State 2760, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Decibel Barrage - rear wave
[Statedef 2761]
type = A
movetype = I
physics = N
anim = 2761
velset = -12,0
sprpriority = 3
ctrl = 0

[State 2761, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2761, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 2761, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

; Decibel Barrage - front wave
[Statedef 2762]
type = A
movetype = I
physics = N
anim = 2762
velset = 12,0
sprpriority = 3
ctrl = 0

[State 2762, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2762, PlayerPush]
type = PlayerPush
trigger1 = P2Dist X < 90
value = 1

[State 2762, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Deadly Spores -- Omega Red Stolen Special
[StateDef 2770]
anim = 2770
type = A
movetype = A
physics = S
ctrl = 0
velset = 0,0
poweradd = 50

[State 2770, vox]
type = null ;PlaySnd
trigger1 = !Time
value = 9,770
channel = 0
removeongethit = 1

[State 2770, Helper]
type = Helper
trigger1 = AnimElem = 2
name = "death spore"
ID = 2775
stateno = 2775
pos = 60,-100
ownpal = 1

[State 2770, 1]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Deadly Spores -- helper state
[StateDef 2775]
type    = A
movetype= A
physics = N
anim = 2775
sprpriority = 6

[State 2775, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,771

[State 2775, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2775, VelSet]
type = VelSet
trigger1 = (!Time)
x = 2

[State 2775, VarSet]
type = VarSet
trigger1 = IsHelper
fv = 2
value = (EnemyNear, Const(size.mid.pos.y))

[State 2775, VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -3)
x = -0.2

[State 2775, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 3)
x = 0.2

[State 2775, VelAdd]
type = VelAdd
trigger1 = (FVar(2) > Pos Y) && (Vel Y < 3)
y = 0.2

[State 2775, VelAdd]
type = VelAdd
trigger1 = (FVar(2) < Pos Y) && (Vel Y > -3)
y = -0.2

[State 2775, VelSet]
type = null ;VelSet
trigger1 = (FVar(2) = Pos Y)
y = 0

[State 2775, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow

[State 2775, AfterImage]
type = AfterImage
trigger1 = TimeMod = 15,0
time = 15
length = 8
palcolor = 85
palbright = 30,60,30
paladd = 10,50,10
palmul = .65,1.25,.65
timegap = 1

[State 2775, hit flash]
type = EnvColor
trigger1 = movecontact = 1
value = 128,255,128
time = 4
ignorehitpause = 1
persistent = 0

[State 2775, hit]
type = HitDef
trigger1 = TimeMod = 75,0
attr = S,HA
hitflag = MAF
guardflag = MAF
;damage = 25,3
pausetime = 0,0
hitsound = S9,772
guardsound = -1
sparkno = -1
sparkxy = 0,75
animtype = Heavy
ground.type = Low
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 2
guard.velocity = 2
air.velocity = 2,-2
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0
;p1stateno = 2776
p2stateno = 2777

[State 2775, back to stance]
type = ChangeState
trigger1 = parent, var(9) > 0
value = 2778

[State 2775, end]
type = DestroySelf
trigger1 = Time = 800


; Deadly Spores -- helper state (active)
[StateDef 2776]
type    = A
movetype= A
physics = N
sprpriority = 6

[State 2776, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2776, VarSet]
type = VarSet
trigger1 = !Time
fv = 2
value = P2BodyDist X / 2

[State 2776, VarSet]
type = VarSet
trigger1 = !Time
fv = 3
value = Const(size.head.pos.y) - Pos Y

[State 2776, PosSet]
type = PosSet
trigger1 = Time > 0
x = (EnemyNear,Pos X) - FVar(2)
y = (EnemyNear,Pos Y) + EnemyNear,Const(size.mid.pos.y) ;FVar(3)

[State 2776, hit]
type = HitDef
trigger1 = TimeMod = 100,0 && EnemyNear,MoveType != H
attr = S,HA
hitflag = MAF
guardflag = MAF
;damage = 25,3
pausetime = 0,0
hitsound = -1
guardsound = -1
sparkno = -1
sparkxy = 0,75
animtype = Heavy
ground.type = Low
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 2
guard.velocity = 2
air.velocity = 2,-2
kill = 0
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0
p1stateno = 2776
p2stateno = 2777

[State 2776, back to stance]
type = ChangeState
trigger1 = parent, var(9) > 0
value = 2778

[State 2776, end]
type = DestroySelf
trigger1 = Time = 800


; P2 custom hitstate - hurt by Death Spore (adapted from Zvitor's Omega Red)
[Statedef 2777]
type = U
movetype = H
ctrl = 1

[State 2777, PalFXWiz]
type = PalFX
trigger1 = !Time
time = 25
add = -100,-90,-100
mul = 224,250,120
sinadd = -10,-10,-10,10
invertall = 1
color = 0

[State 2777, LifeAdd]
type = LifeAdd
trigger1 = !Time
value = -1
kill = 0

; am I dead?
[State 2777, ChangeState]
type = SelfState
trigger1 = Life <= 0
value = IfElse(StateType = A, 5020,5000)

[State 2777, End]
type = SelfState
trigger1 = Time >= 2
value = IfElse(StateType = A, 50,0)
ctrl = 1


; Deadly Spores -- "potential unlocked" helper state
[StateDef 2778]
type    = A
movetype= A
physics = N
anim = 2775
sprpriority = 6

[State 2778, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2778, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow

[State 2778, hit]
type = HitDef
trigger1 = !Time
attr = S,HA
hitflag = MAF
guardflag = MAF
damage = 50,50
pausetime = 20,20
hitsound = S9,772
guardsound = -1
sparkno = -1
sparkxy = 0,75
animtype = Heavy
ground.type = Low
ground.slidetime = 4
ground.hittime  = 4
ground.velocity = 1
guard.velocity = 0
air.velocity = 0,-2
fall = 1
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,128,0

[State 2778, end]
type = DestroySelf
trigger1 = movecontact
trigger2 = time > 0


;---------------------------------
; P2 custom state: dizzied/stunned (e.g. from Elektra's Nerve Strike)
[Statedef 5300]
type = S
ctrl = 0
physics = N
velset = 0,0

[State 5300, dizzy anim]
type = ChangeAnim
trigger1 = !Time && SelfAnimExist(5300)
value = 5300

[State 5300, custom dizzy anim]
type = ChangeAnim2
trigger1 = !Time && !SelfAnimExist(5300)
value = 5310

; reddish color effect when no button is pressed
[State 5300: PalFX]
type = PalFX
trigger1 = !Time
time = 100
add = 64,0,0

; Button mash counter.
[State 5300: VarSet]
type = VarSet
trigger1 = !Time
var(0) = 21

; button mash trigger
[State 5300: VarAdd]
type = VarAdd
trigger1 = (Command = "a") || (Command = "b") || (Command = "c")
trigger2 = (Command = "x") || (Command = "y") || (Command = "z")
var(0) = -1

; color effect when button is pressed
[State 5300: PalFX]
type = PalFX
trigger1 = (Command = "a") || (Command = "b") || (Command = "c")
trigger2 = (Command = "x") || (Command = "y") || (Command = "z")
time = 3
add = 0,54,0

[State 5300, SelfState]
type = SelfState
trigger1 = !Var(0)
trigger2 = Time = 110
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Charge (stolen from Rhino)
[StateDef 2780]
type     = S
movetype = A
physics  = N
ctrl = 0
anim = 2780

[State 2780, vox]
type = PlaySnd
trigger1 = !Time
value = 9,780

[State 2780, sfx]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,781

[State 2780, velset]
type = VelSet
trigger1 = AnimElem = 2
x = 9

[State 2780, HitDef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S, SA
damage = 20
guardflag = MA
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Back
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,0
guard.velocity = -4
air.velocity = -4,-2
fall = 1

[State 2780, back to stance]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Ice Boulder (stolen from Iceman)
[StateDef 2790]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2790
poweradd = 20

[State 2790, Explod]
type = Explod
trigger1 = !Time
anim = 2791
ID = 2791
bindtime = -1
removetime = -2
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 2790, Helper]
type = Helper
trigger1 = Time = 5
name = "ice boulder"
ID = 2795
stateno = 2795
pos = 100-(Random/5),-240
postype = p2
ownpal = 1

[State 2790, end]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;------------------------------------------
; Ice Boulder -- helper state (falling)
[StateDef 2795]
type    = A
movetype= A
physics = N
sprpriority = 3
ctrl = 0
anim = 2794

[State 2795, VelSet]
type = VelSet
trigger1 = !Time
x = ifelse(parent,var(2)=0,1.6,ifelse(parent,var(2)=1,0,-1.6))
y = 3.5

[State 2795, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,790

[State 2795, hitdef]
type = HitDef
trigger1 = !Time
attr = A,HA
damage = 80
animtype = heavy
guardflag = MA
hitflag = MAFD
pausetime = 2,10
hitsound = S2,2
sparkxy = 0,0
guardsound = S3,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 2795, end]
type = ChangeState
trigger1 = MoveContact
trigger2 = Pos Y >= -10
value = 2796
ctrl = 0


;------------------------------------------
; Ice Boulder -- helper state (crashing)
[StateDef 2796]
type    = A
movetype= A
physics = N
anim = 2795
sprpriority = 3

[State 2796, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,791

[State 2796, Explod]
type = Explod
trigger1 = !Time
anim = 2796 + (Random/250)
ID = 2796
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 8-(Random/125), 8-(Random/125)
sprpriority = 2
ownpal = 1

[State 2796, Explod]
type = Explod
trigger1 = !Time
anim = 2796 + (Random/250)
ID = 2796
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 8-(Random/125), 8-(Random/125)
sprpriority = 2
ownpal = 1

[State 2796, Explod]
type = Explod
trigger1 = !Time
anim = 2796 + (Random/250)
ID = 2796
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 8-(Random/125), 8-(Random/125)
sprpriority = 2
ownpal = 1

[State 2796, Explod]
type = Explod
trigger1 = !Time
anim = 2796 + (Random/250)
ID = 2796
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 8-(Random/125), 8-(Random/125)
sprpriority = 2
ownpal = 1

[State 2796, Explod]
type = Explod
trigger1 = !Time
anim = 2796 + (Random/250)
ID = 2796
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 8-(Random/125), 8-(Random/125)
sprpriority = 2
ownpal = 1

[State 2796, end]
type = DestroySelf
trigger1 = Time = 800


;---------------------------------------------------------------------------
; Typhoon (stolen from Storm)
[StateDef 2800]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2800
poweradd = 20

[State 2800, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S9,800

[State 2800, 1]
type = Projectile
trigger1 = Time = 5
projanim = 2805
projhitanim = 2805
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
offset = 50,0
velocity = 3
attr = S, SP
damage   = 35
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
sparkxy = 500,500
hitsound   = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 2800, 2]
type = Projectile
trigger1 = Time = 9
projanim = 2805
projhitanim = 2805
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
offset = 90,0
velocity = 3
attr = S, SP
damage   = 35
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
sparkxy = 500,500
hitsound   = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 2800, 3]
type = Projectile
trigger1 = Time = 13
projanim = 2805
projhitanim = 2805
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
offset = 130,0
velocity = 3
attr = S, SP
damage   = 35
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
sparkxy = 500,500
hitsound   = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 2800, 4]
type = Projectile
trigger1 = Time = 17
projanim = 2805
projhitanim = 2805
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
offset = 130,0
velocity = 3
attr = S, SP
damage   = 35
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
sparkxy = 500,500
hitsound   = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 2800, end]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Psimitar (stolen from Cable)
[StateDef 2810]
type = S
movetype = A
physics = S
anim = 2810
ctrl = 0
velset = 0,0

; voice
[State 2810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,3
channel = 0

; woosh
[State 2810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S9,810

[State 2810, Helper]
type = Helper
trigger1 = AnimElem = 2
name = "psimitar"
ID = 2815
stateno = 2815
pos = 10,30
ownpal = 1

[State 2810, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Psimitar - spear helper
[Statedef 2815]
type = S
movetype = A
physics = N
anim = 2815
ctrl = 0
;velset = 2, -5

[State 2815]
type = VelSet
trigger1 = !Time && Parent,var(2) = 0
x = 2
y = -9

[State 2815]
type = VelSet
trigger1 = !Time && Parent,var(2) = 1
x = 3
y = -10

[State 2815]
type = VelSet
trigger1 = !Time && Parent,var(2) = 2
x = 4
y = -11

[State 2815, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2815, noreversal2]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2815, hitdef]
type = HitDef
triggerall = p2stateno != 17696
trigger1 = !Time
attr = A,SP
hitflag = MAFD
guardflag = MA
animtype = DiagUp
priority = 3,Miss
damage = 25 + (Parent,var(2) * 5), 8
pausetime = 7,7
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -1,-12
air.velocity = -2,-14
fall = 1
palfx.time = 33
palfx.add  = -90,0,140
palfx.sinadd = 100,100,100,10
Palfx.color = 0
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
p2stateno = 2535

; sfx
[State 2815, PlaySnd]
type = PlaySnd
trigger1 = MoveHit
value = S9,531

[State 2185, Done]
type = ChangeState
trigger1 = MoveHit
value = 2817

[State 2185, Done]
type = DestroySelf
trigger1 = ScreenPos Y < 0


; Psimitar - spear helper (finish)
[Statedef 2817]
type = S
movetype = A
physics = N
anim = 2815
ctrl = 0
velset = 4, -11

[State 2815, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2815, noreversal2]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

; sfx
[State 2817, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,531

[State 2817, hitdef]
type = HitDef
trigger1 = !Time
attr = A,SP
hitflag = MAFD
guardflag = MA
animtype = Back
priority = 3,Miss
damage = 30 + (Parent,var(2) * 6), 8
pausetime = 7,7
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -5,-10
air.velocity = -8,-13
fall = 1
palfx.time = 33
palfx.add  = -90,0,140
palfx.sinadd = 100,100,100,10
Palfx.color = 0
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
p2stateno = 2535

[State 2187, Done]
type = DestroySelf
trigger1 = ScreenPos Y < 0


;---------------------------------------------------------------------------
; Heightened Senses (stolen from Daredevil)
[Statedef 2900]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2900
velset = 0,0

[State 2900, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 918

[State 2900, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime <= 0
flag = noBG
flag2 = noFG
flag3 = noBarDisplay

[State 2900, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Mirror Dance (stolen from Spiral)
[Statedef 2990]
type = S
movetype = A
physics = S
ctrl = 0
anim = 2990
velset = 0,0

[State 2990, VarSet]
type = VarSet
trigger1 = Time = 0
fv = 0
value = Pos X

[State 2990, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SA
hitflag = MAFD
guardflag = D
animtype = light
priority = 5,Hit   ;Hit,Miss,Dodge
ground.type = None
sparkno = -1
ground.slide = 0
ground.hit = 0
air.hittime = 0
ground.velocity = 0,0
air.velocity = 0,0
p1stateno = 2991
p2stateno = 2992

[State 2990, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 2991

; Mirror Dance P1 state
[Statedef 2991]
type = S
ctrl = 0
anim = 2990
velset = 0,0

[State 2991, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,980

[State 2991, PosSet]
type = PosSet
trigger1 = Time = 0
x = Pos X + (P2Dist X * Facing)
y = 0

[State 2991, Turn]
type = Turn
trigger1 = Time = 1

[State 2991, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Mirror Dance P2 state
[Statedef 2992]
type = S
ctrl = 0
velset = 0,0

[State 2992, PosSet]
type = PosSet
trigger1 = Time = 0
x = enemyNear, fvar(0)
y = 0

[State 2992, Turn]
type = Turn
trigger1 = Time = 1

[State 2992, ChangeState]
type = SelfState
trigger1 = Time = 10
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; Finish Hit Explod (based on FlowaGirl and Ethan Lives codes)
; (taken with permission from McCready's StrongGuy char)
[Statedef 8900]
type = S
movetype = I
physics = N
anim = 8930

;[State 8900, 1]
;type = Pause
;trigger1 = (!Time)
;time = 12
;movetime = 12

[State 8900, 1]
type = EnvShake
trigger1 = (!Time)
time = 12
freq = 120;10
ampl = -3;2
phase = 90

[State 8900, 2]
type = Explod
triggerall = (NumExplod(8900) < 1)
trigger1 = Time = 0
persistent = 0
anim = 8900
ID = 8900
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
bindtime = -1
ontop = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State 8900, 3]
type = PlaySnd
trigger1 = (NumExplod(8900) != 0)
value = 30, 0
persistent = 0
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State 8900, done]
type = DestroySelf
trigger1 = RoundState = 4
