; States file for Parasite -- Hypers
;
;-------------- Generated by Fighter Factory -------------
;--------------------- Variable List ----------------------
; Var(0) - StateDef 5300
; Var(1) - StateDef 760,761 (flight)
; Var(2) - StateDef 2000, 2001 (stolen power button choice: W/M/S)
; Var(3) - StateDef -3
; Var(4) - StateDef 761
; Var(6) - Statedef 2100 (kryptonite ray color selection)
; Var(7) - StateDef 2572
; Var(8) - StateDef 2640 (deadpool taunt selection)
; Var(9) - StateDef 2775, 3770 (Omega Red spore unlock)
; Var(10) - StateDef 2572, 3075, 3079, -2
; Var(11) - StateDef 9000 (super armor)
; Var(13) - StateDef 3730, -2 (Elektra Ninjitsu timer)
; Var(15) - StateDef 3641, 3645
; Var(16) - StateDef 40, 45, 699
; Var(17) - StateDef 2190, 2191, 2670, 2671, -3
; Var(18) - StateDef -3
; Var(20) - StateDef 3062
; Var(45) - StateDef 4502 (Quick Snack)
; Var(48) - StateDef -3
; Var(49) - StateDef 1000, 1001, 1011, 1012, 3611 - Feeding Time slot determiner (50=slot 1, 51=slot 2)
; Var(50) - StateDef 5900 - Power Set slot #1
; Var(51) - StateDef 5900 - Power Set slot #2
;--------------------- Float Variable List ----------------------
; fVar(0) - StateDef 2980
; fVar(2) - StateDef 2111, 3055, 3132
; fVar(3) - StateDef 3055, 3132, 3601
;
;---------------------------------------------------------------------------
; States in this file:
;
; Stolen Hyper - Slot 1 (QCF + PP) - state 3000
; Stolen Hyper - Slot 2 (QCF + KK) - state 3001
; Quick Snack (QCB + PP/KK) - states 4500-4510
;
;----------------------------
; DC POWER SETS
;01 - Superman: SPEED FURY (3010-3015)
;02 - Batman: BAT PLAGUE (3020-3025)
;03 - Wonder Woman: Themyscira Great Rising (3030-3035)
;04 - Flash: speed force
;05 - GL: RING SLINGING (3050-3055)
;06 - Ice: ABSOLUTE ZERO (3060-3066)
;07 - Lobo: MAIN MEN (3070-3079)
;08 - Plastic Man: PLASTIC BALL (3080-3081)
;09 - Etrigan: wind from hell
;10 - Lex Luthor: FAILSAFE EMISSION (3100-3106)
;11 - Darkseid: omega sanction? (3110-
;12 - Superboy: SUPERIOR TK (3120-3127)
;13 - Sinestro: NEEDLE STORM (3130-3133)
;14 - Bizarro: FLAME BREATH (3140-3145)
;15 - Aquaman: whale/shark summon
;16 - Doomsday: asteroid smash
;17 - Poison Ivy: EXPLOSIVE GROWTH (3170-3175)
;18 - The Atom: subatomic adventure
;19 - Martian Manhunter: Fernus the Burning (3190-3195
;20 - Shazam/Cap.Marvel: Lightning Summon
;21 - Starfire: Koriand'r Special
;22 - Bane: bat breaker
;23 - Eradicator: PLASMA BEAM (3230-3235)
;24 - Vixen: elephant stampede
;25 - Mongul: Mongul's insanity
;26 - Red Lantern (Atrocitus): CHAINS OF RAGE (3260-3261)
;27 - Agent Orange (Larfleeze): Orange Corps
;28 - Indigo Lantern: ENFORCED EMPATHY (3280-3284)
;29 - Star Sapphire: Love Conquers All
;30 - Black Lantern: rise!
;31-50:(open)
;----------------------------
; MARVEL POWER SETS
;51 - Captain America: FINAL JUSTICE (3510-3511)
;52 - Savage Hulk: HULK SMASH (3520-3525)
;53 - Thor: Mystic Rainfall
;54 - Spider-Man: Maximum Spider (3540-
;55 - Iron Man: Nano Assault (3550-
;56 - Crystal: element storm
;57 - Sandman: SPIRAL SLASH (3570-3571)
;58 - Wolverine: weapon x
;59 - Carnage: INDIGO SLAUGHTER (3590)
;60 - Dr. Doom: Photon Array (3600-3601)
;61 - Ghost Rider: PENANCE STARE (3610)
;62 - Strong Guy: HYPER BLANKA ENVY (3620-3622)
;63 - Thanos: ROCK WALLS (3630-3636)
;64 - Deadpool: RESURRECTION (3640-3645)
;65 - Juggernaut: head crush? power up?
;66 - Mr. Fantastic: ???
;67 - Invisible Woman: BUBBLE SPRAY (3670)
;68 - The Thing: CLOBBERIN' TIME (3680-3681)
;69 - Human Torch: SUPERNOVA (3690-3699)
;70 - Silver Surfer: GALACTIC MIGHT (3700-3705)
;71 - Venom: death bite
;72 - Cyclops: MEGA OPTIC BLAST (3720-3725)
;73 - Elektra: NINJITSU (3730-3739)
;74 - Nightcrawler: teleport attack
;75 - Marrow: STINGER BONES (3750-3757)
;76 - Songbird: Shatter Scream
;77 - Omega Red: Spore Unlock (3770) -- was Death Aura (3770-3776)
;78 - Rhino: rampage
;79 - Iceman: Arctic Attack (3790)
;80 - Storm: Lightning Attack
;81 - Namor: Mariner Combo
;82-89: (open)
;90 - Daredevil:
;91 - Miss Marvel: prism blast
;92-98: (open)
;99 - Spiral: metamorphosis (autocombo w/ all chars)
;----------------------------


;---------------------------------------------------------------------------
; Stolen Hyper - Slot 1 (power set determiner)
[StateDef 3000]
type    = S
physics = S
velset = 0,0
ctrl = 0

[State 3000, changeState]
type = ChangeState
trigger1 = !Time && AnimExist(3000 + (Var(50) * 10))
value = 3000 + (Var(50) * 10)

[State 3000, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 3002

;---------------------------------------------------------------------------
; Stolen Hyper - Slot 2 (power set determiner)
[StateDef 3001]
type    = S
physics = S
velset = 0,0
ctrl = 0

[State 3001, changeState]
type = ChangeState
trigger1 = !Time && AnimExist(3000 + (Var(51) * 10))
value = 3000 + (Var(51) * 10)

[State 3001, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 3002


;---------------------------------------------------------------------------
; Stolen Hyper - missing power set
[StateDef 3002]
type    = S
physics = S
anim = 2000
ctrl = 0
velset = 0,0

[State 3002, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3002, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9, IfElse(Random<500,4,5)
channel = 0

[State 3002, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Speed Fury (stolen from Superman)
[StateDef 3010]
type = S
movetype= A
physics = N
juggle  = 9
velset = 0,0
ctrl = 0
anim = 3010
sprpriority = 2

[State 3010, Vox] ; let's see you handle this!
type = PlaySnd
trigger1 = !Time
value = S10,10
volume = 125
channel = 0

;-------------------
; superpause & DCvM hyper stuff
[State 3010, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 90
sound = S10,1
pos = -25,-55
darken = 1
poweradd = -1000

[State 3010, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3010, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3010, hyperBG2]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3010, Width]
type = Width
trigger1 = AnimElem = 3
edge = 30,10
player = 60,10
ignorehitpause = 1
persistent = 1

[State 3010, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 3010, push through]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 3010, AfterImage]
type = AfterImage
trigger1 = AnimElem = 3
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = add
ignorehitpause = 1
persistent = 1

[State 3010, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3010, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3010, 3]
type = velset
trigger1 = AnimElem = 3
x = 20

[State 3010, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 4
value = S9,231
channel = -1
ignorehitpause = 1
persistent = 0

[State 3010, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 6
value = S9,232
channel = -1
ignorehitpause = 1
persistent = 0

[State 3010, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 50,8
animtype = Hard          ;light,medium,hard,back,up,diagup
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit   ;Hit,Miss,Dodge
damage = 25+ceil(random/50),0
pauseTime = 0,40
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-65
hitsound = F5,1
guardsound = F6,0
ground.type = High
air.type = Low
ground.slidetime = 25
ground.hittime = 25
air.hittime = 25
air.slidetime = 25
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sprpriority = 1
p2facing = 1
kill= 0

[State 3010, ChangeState]
type = ChangeState
triggerall = frontedgedist <=  -75
trigger1 = time >= 20
trigger2 = frontedgedist <= -250
value = 3011
ctrl = 0
ignorehitpause = 1
persistent = 0


; Speed Fury - push P2 to the wall
[StateDef 3011]
anim = 3011
ctrl = 0
type = A
movetype = A
physics = N
juggle = 7

[State 3011, Width]
type = Width
trigger1 = 1
edge = 30,10
player = 60,10
ignorehitpause = 1
persistent = 1

[State 3011, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3011, push back]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1
persistent = 1

[State 3011, PosAdd]
type = PosAdd
trigger1 = !time
x = -350
ignorehitpause = 1
persistent = 0

[State 3011, AfterImage]
type = AfterImage
trigger1 = !Time
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = add
ignorehitpause = 1
persistent = 1

[State 3011, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3011, VelSet]
type = VelSet
trigger1 = 1
x = 20
ignorehitpause = 1
persistent = 1

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = A,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 50,8
animtype = Hard          ;light,medium,hard,back,up,diagup
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit   ;Hit,Miss,Dodge
damage = 80+ceil(random/50),0
pausetime = 4,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-65
hitsound = F5,1
guardsound = F6,0
ground.type = High
air.type = Low
ground.slidetime = 25
ground.hittime = 25
air.hittime = 25
air.slidetime = 25
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sprpriority = 1
kill= 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movecontact
time = 10
pos = 70,-10
ignorehitpause = 1
persistent = 1

[State 3011, ChangeState]
type = ChangeState
triggerall = movehit
trigger1 = time >= 20
trigger2 = target,backedgedist <= 15
value = 3012
ctrl = 0
ignorehitpause = 1
persistent = 0

[State 3011, ChangeState]
type = ChangeState
trigger1 = time >= 25
value = 50
ctrl = 0
ignorehitpause = 1
persistent = 0



; Speed Fury - autocombo
[Statedef 3012]
type = S
movetype= A
physics = S
anim = 3012
velset = 0,0

[State 3012, TargetBind]
type = TargetBind
trigger1 = !time
time = 10
pos = 70,-10
ignorehitpause = 1
persistent = 1

[State 3012, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
persistent = 0

[State 3012, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3012, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 7
trigger4 = Animelem = 9
trigger5 = Animelem = 13
trigger6 = Animelem = 18
trigger7 = Animelem = 22
trigger8 = Animelem = 27
trigger9 = Animelem = 32
trigger10 = Animelem = 36
value = S10,11
volume = 0
channel = -1
ignorehitpause = 1
persistent = 1

[State 3012, Explod]
type = Explod
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 7
trigger4 = Animelem = 9
trigger5 = Animelem = 13
trigger6 = Animelem = 18
trigger7 = Animelem = 22
trigger8 = Animelem = 27
trigger9 = Animelem = 32
trigger10 = Animelem = 36
anim = 3014
ID = 3014
pos = -100,-10
postype = p1
bindtime = 1
vel = 10,0
supermovetime = 99999
pausemovetime = 99999
sprpriority = 10
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1


[State 0, HitDef]
type = HitDef
trigger1 = Animelem = 18
trigger2 = Animelem = 27
attr = S,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 50,8
animtype = Hard          ;light,medium,hard,back,up,diagup
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit   ;Hit,Miss,Dodge
damage = 10+ceil(random/50),0
pausetime = 2,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,0
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 70,0
sprpriority = 1
kill= 0

[State 0, HitDef]
type = HitDef
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 9
trigger4 = Animelem = 36
attr = S,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 12,12
animtype = Medium          ;light,medium,hard,back,up,diagup
air.animtype = Medium
fall.animtype = Diagup
priority = 7,Hit   ;Hit,Miss,Dodge
damage = 12+ceil(random/50),0
pausetime = 2,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,1
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 80,0
sprpriority = 1
kill= 0

[State 0, HitDef]
type = HitDef
trigger1 = Animelem = 7
trigger2 = Animelem = 13
trigger3 = Animelem = 22
trigger4 = Animelem = 32
attr = S,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
getpower = 0,0
givepower = 12,8
animtype = Hard          ;light,medium,hard,back,up,diagup
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit   ;Hit,Miss,Dodge
damage = 13+ceil(random/50),0
pausetime = 2,35;+(ceil(fvar(30))*5)
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-50
hitsound = F5,0
guardsound = F6,0
ground.type = Low
air.type = Low
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-6
air.velocity = 0.5,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = 0.20
snap = 60,0
sprpriority = 1
kill= 0

[State 3012, ChangeState]
type = ChangeState
triggerall = !animtime
trigger1 = time >= 100
;trigger2 = command != "holdx" && command !="holdy" && command !="holdz"
value = 3013
ctrl = 0
ignorehitpause = 1
persistent = 0


; Speed Fury - launching finisher
[StateDef 3013]
anim = 3013
ctrl = 0
type = S
movetype = A
physics = S

[State 3013, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 2020, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 0.5
y = -15

[State 2020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1
statetype = A
movetype = A
physics = A

[State 2020, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = Heavy
priority = 7,Hit
damage = 70,15
pausetime = 9,9
sparkno = S9992
sparkxy = 15,-90
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2 - (1.5 * Var(2)), -11 - (2.5 * Var(2))
guard.velocity = -6 - (1.5 * Var(2))
airguard.velocity = -5,-1
air.type = Low
air.velocity = -5,-10
down.bounce = 1
down.velocity = -4,-4
fall = 1
fall.recover = 0

[State 2020, fall back to ground]
type = ChangeState
trigger1 = Pos Y < -240
value = 3015
ctrl = 0


; Speed Fury - aftermath
[Statedef 3015]
type = A
movetype= I
physics = A
juggle = 7
anim = 48
velset = 0,0
ctrl = 0

[State 3015, ScreenBound]
type = ScreenBound
trigger1 = pos y <= 0
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 3015, PlayerPush]
type = PlayerPush
trigger1 = win
value = 0

[State 3015, PosSet]
type = PosSet
trigger1 = win
x = enemynear,pos x
ignorehitpause = 1
persistent = 0

[State 3015, PosAdd]
type = PosAdd
trigger1 = !time
y = -300
ignorehitpause = 1
persistent = 0

[State 3015, PosAdd]
type = PosAdd
triggerall = !win
trigger1 = !Time
x = -350
ignorehitpause = 1
persistent = 0

[State 3015, VelSet]
type = VelSet
trigger1 = time >= 0
x = 0
y = 8
ignorehitpause = 1
persistent = 1


;---------------------------------------------------------------------------
; Bat Plague (stolen from Batman)
[StateDef 3020]
type = S
movetype = A
physics = S
anim = 3020
ctrl = 0
velset = 0,0

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3020, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3020, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3020, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 40
sound = S10,1
pos = 25,-25
darken = 1
poweradd = -1000

[State 3020, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3020, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3020, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3020, Helper]
type = Helper
trigger1 = AnimElemTime(3) % 3 = 1 && NumHelper(3025) < 30
name = "bat"
ID = 3025
stateno = 3025
pos = -(Random/50), -(Random/4)
postype = back
facing = 1
keyctrl = 0
ownpal = 0
supermove
pausemove
size.xscale = 0.75
size.yscale = 0.75

[State 3020, Helper]
type = Helper
trigger1 = AnimElemTime(3) %4 = 1 && NumHelper(3025) < 30
name = "bat"
ID = 3025
stateno = 3025
pos = -(Random/50), -(Random/4)
postype = back
facing = 1
keyctrl = 0
ownpal = 0
supermove
pausemove
size.xscale = 0.85
size.yscale = 0.85

[State 3020, Helper]
type = Helper
trigger1 = AnimElemTime(3) %3 = 2 && NumHelper(3025) < 30
name = "bat"
ID = 3025
stateno = 3025
pos = -(Random/50), -(Random/9)
postype = back
facing = 1
keyctrl = 0
ownpal = 0
supermove
pausemove
size.xscale = 0.5
size.yscale = 0.5

[State 3020, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Bat plague - bat helper state
[StateDef 3025]
type = A
movetype = A
physics = N
anim = 3025
ctrl = 0
velset = 6,0

[State 3025, VelAdd]
type = VelAdd
trigger1 = Time % 5 = 0
y = -(Random / 500)

[State 3025, VelAdd]
type = VelAdd
trigger1 = Time % 11 = 0
x = (Random / 300)
y = (Random / 500)

[State 3025, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,21
pan = 1

[State 3025, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,HP
hitflag = MAF
guardflag = MA
;getpower = 0,0
;givepower = 0,0
animtype = back
priority = 3,Hit   ;Hit,Miss,Dodge
damage = 3,1
pausetime = 6,6
;sparkno = 0
;guard.sparkno = 0
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
;air.type = High
ground.slide = 8
;guard.slide = 0
ground.hit = 9
;guard.hit = 0
air.hittime = 20
;guard.ctrl  = 0
;guard.dist = 320
;yaccel = 0.5
ground.velocity = -4,-2
;guard.velocity = 0
air.velocity = -7,1
;airguard.velocity = 0,0
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;down.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;airguard.ctrl = 0
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 2
fall = 1
down.bounce = 1
palfx.time = 5
palfx.mul = 255,255,255
;palfx.add = 0,0,0

[State 3025, DestroySelf]
type = DestroySelf
trigger1 = ScreenPos X > 340
trigger2 = ScreenPos X < -20


;---------------------------------------------------------------------------
; Themyscira Great Fall (stolen from Wonder Woman)
[StateDef 3030]
type = S
movetype = A
physics = S
anim = 3030
ctrl = 0
velset = 0,0

[State 3030, VelSet]
type = Veladd
trigger1 = AnimElem = 2
trigger1= (p2bodydist X) >= 0
x = ifelse(p2bodydist X >0,5,0)
y = -6.6

[State 3030, StateTypeSet]
type = Null; StateTypeSet
trigger1 = AnimElem = 2
physics = A

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3030, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3030, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3030, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

[State 3030, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3030, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3030, superBG]
type = Helper
trigger1 = AnimElem = 4
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3030, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3035
ID = 3035
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 100
removetime = -1
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1

[State 3030, VelSet]
type = VelSet
trigger1 = AnimElem = 4 && Pos Y < 0
x = 3.8
y = 4.4

[State 3030, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 3030, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 3030, HitDef]
type = HitDef
trigger1 = AnimElemTime(4) % 2 = 0
attr = S,HA
hitflag = MAF
guardflag = MA
animtype = hard
priority = 6,Hit
damage = 30,0
pausetime = 2,4
;guard.pause,0
sparkno = S9992
;guard.sparkno = 0
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High

[State 3030, VelSet]
type = VelSet
trigger1 = AnimElem = 4 && Pos Y > 0
x = 0
y = 0

[State 3030, ChangeState]
type = ChangeState
trigger1 = AnimElem = 4 && Pos Y >= 0
value = 3035
ctrl = 0

[State 3030, ChangeState]
type = ChangeState
trigger1 = Time >25 && Pos Y >= 0
value = 3035
ctrl = 0


; Themyscira Great Fall - move ending
[Statedef 3035]
type    = S
movetype = I
physics = S
ctrl = 0
anim = 47

[State 3035, 1]
type = VelSet
trigger1 = !Time
y = 0

[State 3035, 2]
type = PosSet
trigger1 = !Time
y = 0

[State 3035, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 3035, 4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[State 3035, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 3035


;---------------------------------------------------------------------------
; Speed Force (stolen from Flash)
[StateDef 3040]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3040
sprpriority = 2

[State 3040, Vox] ; anything to say here?
type = null ;PlaySnd
trigger1 = !Time
value = S10,40
channel = 0

;-------------------
; superpause & DCvM hyper stuff
[State 3040, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 90
sound = S10,1
pos = 8,-100
darken = 1
poweradd = -1000

[State 3040, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3040, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3040, hyperBG2]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------


; run forward
[State 3040, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 40

[State 3040, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 3040, push through]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 3040, AfterImage]
type = AfterImage
trigger1 = AnimElem = 3
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = add
ignorehitpause = 1
persistent = 1

[State 3040, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3040, superpause]
type = null ;SuperPause
trigger1 = P2BodyDist X < 50
time = 30
sound = S10,41
pos = 0,-85
darken = 1

[State 3040, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Hard
damage    = 100
pausetime = 10,10
guardflag = HMAL
hitflag = HMAFL
sparkno = S7003
sparkxy = -20,-70
hitsound   = 5,2
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 6
ground.velocity = -3,-10
guard.velocity = -7
air.velocity = -8,-10
airguard.velocity = -5, -4
palfx.time = 30
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0
fall=1
p2stateno = 2095

[State 3040, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3040, ChangeState]
type = ChangeState
triggerall = frontedgedist <=  -75 && HitCount < 5
trigger1 = time >= 20
trigger2 = frontedgedist <= -250
value = 3042
ctrl = 0
ignorehitpause = 1
persistent = 0


; Speed Force - subsequent (2nd, 3rd, etc) run-by
[StateDef 3042]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3040
sprpriority = 2

[State 3042, PosAdd]
type = PosAdd
trigger1 = !time
x = -350
ignorehitpause = 1
persistent = 0

; run forward
[State 3042, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 40

[State 3042, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 3042, push through]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 3042, AfterImage]
type = AfterImage
trigger1 = AnimElem = 3
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = add
ignorehitpause = 1
persistent = 1

[State 3042, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3042, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Hard
damage    = 100
pausetime = 10,10
guardflag = HMAL
hitflag = HMAFL
sparkno = S7003
sparkxy = -20,-70
hitsound   = 5,2
guardsound = 15,0
ground.type = Low
ground.slidetime = 60
ground.hittime  = 6
ground.velocity = -3,-10
guard.velocity = -7
air.velocity = -8,-10
airguard.velocity = -5, -4
palfx.time = 30
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0
fall=1
p2stateno = 2095

[State 3042, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3042, end]
type = ChangeState
trigger1 = HitCount >= 5
value = 3044

[State 3042, ChangeState]
type = ChangeState
triggerall = frontedgedist <=  -75 && HitCount < 5
trigger1 = time >= 20
trigger2 = frontedgedist <= -250
value = 3042
ctrl = 0
ignorehitpause = 1
persistent = 0


; Speed Force - end
[StateDef 3044]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 45
sprpriority = 2

[State 3044, PosAdd]
type = PosAdd
trigger1 = !time
x = -350
ignorehitpause = 1
persistent = 0

[State 3044, end]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Ring Sling (stolen from Green Lantern)
[StateDef 3050]
type = S
movetype = A
physics = S
anim = 3050
ctrl = 0
velset = 0,0

[State 3050, voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = S10,50
channel = 0

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3050, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3050, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3050, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

[State 3050, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3050, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3050, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3050, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 0
trigger2 = AnimElemTime(3) = 1
trigger3 = AnimElemTime(3) = 2
trigger4 = AnimElemTime(3) = 3
trigger5 = AnimElemTime(3) = 4
trigger6 = AnimElemTime(3) = 5
helpertype = normal
name = "ringsling"
ID = 3055
stateno = 3055
size.xscale = 0.5
size.yscale = 0.5
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0

[State 3050, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-----------------
;(adapted from FlowaGirl's Homing Projectiles tutorial)
; Ring Slinging - construct custom state for beams
[StateDef 3055]
type    = A
movetype= A
physics = N
anim = 3055
sprpriority = 6

[State 3055, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,51

[State 3055, VelSet]
type = VelSet
trigger1 = !Time
x = (Random / 50) - 10
y = (Random / 100) - 10

[State 3055, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3055, Turn]
type = Turn
trigger1 = (P2Dist X < 10)

[State 3055, VarSet]
type = VarSet
trigger1 = IsHelper
fv = 2
value = (EnemyNear, Pos Y) + IfElse((EnemyNear, StateType != A), (EnemyNear, Const(size.mid.pos.y)), 0)

[State 3055, VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -6)
x = -0.2

[State 3055, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 6)
x = 0.2

[State 3055, VelAdd]
type = VelAdd
trigger1 = (FVar(2) > Pos Y) && (Vel Y < 6)
y = 0.2

[State 3055, VelAdd]
type = VelAdd
trigger1 = (FVar(2) < Pos Y) && (Vel Y > -6)
y = -0.2

[State 3055, VelSet]
type = VelSet
trigger1 = (FVar(2) = Pos Y)
y = 0

[State 3055, HitDef]
type = HitDef
trigger1 = TimeMod = 4, 0
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 7,Hit
damage = 16,1
sparkno = S9992
guard.sparkno = 0
hitsound = S10,52
sparkxy = 0,0
priority = 2,Hit
sprpriority = 6
ground.type = Low
ground.slidetime = 2
ground.hittime = 5
ground.velocity = -0.5
air.velocity = -1, 0.5
fall = 1
fall.recover = 0
down.bounce = 1
kill = 1
palfx.time = 20
palfx.add = -104,15,-104
palfx.mul = 192,384,192
palfx.sinadd = 0,56,0,10

[State 3055, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow
ignorehitpause = 1

;-----
; KFM's "angled projectiles" code
[State 3055, blah]
type = VarSet
trigger1 = Vel X != 0
fv = 3
value = ((atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)) - 90

[State 3055, blah]
type = VarSet
trigger1 = Vel X = 0
fv = 3
value = ((atan(Vel Y) + (3*pi/2)) *(-180/Pi)) - 90

[State 3055, blah]
type = AngleSet
trigger1 = 1
value = FVar(3)

[State 3055, blah]
type = AngleDraw
trigger1 = 1
;-----

[State 3055, AfterImage]
type = AfterImage
trigger1 = !Time
time = -1
length = 60
palcolor = 85
palbright = 30,60,30
paladd = 10,50,10
palmul = .65,1.25,.65
timegap = 1

[State 3055, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 80
value = 3056

[State 3055, done]
type = DestroySelf
trigger1 = Time = 110


;---------------------------------------------------------------------------
; Absolute Zero (stolen from Ice)
[StateDef 3060]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3060
velset = 0,0
sprpriority = 1

[State 3060, playsnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,60
channel = 0

[State 3060, superpause]
type = SuperPause
trigger1 = animelem = 2
time = 40
sound = S10,1
pos = 44,-73
darken = 1
poweradd = -1000

[State 3060, orb]
type = Explod
trigger1 = animelem = 2
name = "Orb"
pos = 44,-73
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3060, super portrait]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3060, super bg]
type = Explod
trigger1 = animelem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3060, playsnd]
type = PlaySnd
trigger1 = Time = 5
value = 10,61

; spawn the helper that will handle the snow, iceballs, bgpalfx, etc
[State 3060, helper]
type = Helper
trigger1 = Time = 6
ID = 3065
stateno = 3061

[State 3060, back to normal]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;--------------------------
; Absolute Zero snow (helper state)
[StateDef 3061]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 3065

[State 3061, flying snow]
type = Explod
trigger1 = !Time
anim = 3066
ID = 3066
pos = 0,0
postype = back
bindtime = 999
removetime = 350
supermove = 350
pausemove!Time
sprpriority = 2
ownpal = 1

[State 3061, playsnd]
type = PlaySnd
trigger1 = TimeMod = 100,0
value = 10,61
channel = 2
pan = 1

[State 3061, consume power]
type = PowerAdd
trigger1 = Alive
value = -6

; helper iceball projectiles
[State 3061, iceballs]
type = Projectile
trigger1 = Random >= 850
ProjID = 1
projanim = 3061
attr = S,SP
hitflag = MAF
guardflag = MA
projhitanim = 3062
projremanim = 3062
projcancelanim = 3062
velocity = (((Random*21)/1000))-10, ((Random*6)/1000)+8
projheightbound = -300,1
offset = (((Random*320)/1000)-160),-250
postype = left
damage = 5,1
p2stateno = 3063
projpriority = 1
sparkno = -1
guard.sparkno = -1
hitsound = S10,62
guardsound = S10,63

[State 3061, BGPalfx]
Type = BGPalfx
Trigger1 = !Time
Add = 150,150,170
IgnoreHitPause = 1
time = 750
color = 0

; remove when finished
[State 3061, stop snowing]
type = ChangeState
trigger1 = Power <= 0
trigger2 = RoundState > 2
trigger3 = Var(20) = 1
value = 3062


;--------------------------
; Remove Absolute Zero snow (helper state)
[StateDef 3062]
type    = S
physics = S
ctrl = 0
anim = 3065
sprpriority = 3

[State 3062, 0]
type = VarSet
trigger1 = Var(20) > 0
v =  20
value = 0

[State 3062, remove snow]
type = RemoveExplod
trigger1 = !Time
ID = 3065

[State 3062, stopsnd]
type = StopSnd
trigger1 = !Time
channel = 2

[State 3062, BGPalfx]
Type = BGPalfx
Trigger1 = !Time
!Time

[State 3062, destroyself]
type = DestroySelf
trigger1 = Time = 1



; frozen (i.e. by an iceball): P2 custom state, air/ground anim determiner
;  Frozen: anim 7990
;  Frozen in midair: anim 7991
[StateDef 3063]
type    = U
MoveType = H
physics = U
ctrl = 0
VelSet = 0,0

[State 3063, PalFXWiz] ;Generated by MEE PalFX Editor
type = PalFX
trigger1 = (!Time) && (!AnimExist(7990))
time = 60
add = 0,64,128
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 3063, consume power]
type = PowerAdd
trigger1 = !Time
value = -500

[State 3063, falling (if frozen in air)]
type = ChangeState
trigger1 = pos y < 0
value = 3064

[State 3063, KOed by iceball]
type = ChangeState
trigger1 = life <= 0
value = 5050

[State 3063, ground freeze, has anim]
type = ChangeAnim
triggerall = AnimExist(7990)
trigger1 = (!Time) && (pos y >= 0)
value = 7990

[State 3063, ground freeze, no anim]
type = ChangeAnim2
triggerall = !AnimExist(7990)
trigger1 = (!Time) && (pos y >= 0)
ctrl = 0
value = 7990

[State 3063, back to normal]
type = ChangeState
trigger1 = time = 60
value = 3066
ctrl = 1

; Iceball: P2 custom falling state (if frozen in air)
[StateDef 3064]
type    = A
MoveType = H
physics = N
ctrl = 0
VelSet = 0,0

[State 3064, 0]
type = VelSet
trigger1 = time = 10
x = -3
y = 2

[State 3064, 1]
type = VelSet
trigger1 = time = 20
x = -3
y = 5

[State 3064, air freeze, has anim]
type = ChangeAnim
trigger1 = (!Time) && (AnimExist(7991))
value = 7991

[State 3064, air freeze, no anim]
type = ChangeAnim2
trigger1 = (!Time) && (!AnimExist(7991))
ctrl = 0
value = 7991

[State 3064, ice shatters when hit ground]
type = ChangeState
trigger1 = (pos y >= 10)
value = 3066


; Iceball: P2 custom falling state (if KO'ed by the ball)
[StateDef 3065]
type    = A
MoveType = H
physics = A
ctrl = 0
VelSet = -4,-3

[State 3065, air freeze, has anim]
type = ChangeAnim
trigger1 = (!Time) && (AnimExist(7991))
value = 7991

[State 3065, air freeze, no anim]
type = ChangeAnim2
trigger1 = (!Time) && (!AnimExist(7991))
ctrl = 0
value = 7991


; P2 custom state: coming "unfrozen"
[StateDef 3066]
type    = U
MoveType = H
physics = U
ctrl = 0
VelSet = 0,0
sprpriority = 0

[State 3066, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3066, flat on yer back]
type = SelfState
trigger1 = (time = 5) && (PrevStateNo = 3064)
value = 5100

[State 3066, back to standing]
type = SelfState
trigger1 = (time = 5) && (PrevStateNo != 3064)
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Main Men (stolen from Lobo)
[StateDef 3070]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3070
velset = 0,0
sprpriority = 1

[State 3070, no extra dupes]
type = ChangeState
triggerall = !Time
trigger1 = NumHelper(10) > 0
trigger2 = NumHelper(11) > 0
value = 3002

[State 3070, ouchie]
type = LifeAdd
trigger1 = Time = 16    ;AnimElem = 4
value = -250
kill = 0
absolute = 1
ignorehitpause = 1

[State 3070, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3070, superpause]
type = SuperPause
trigger1 = Time = 26    ;AnimElem=8   ;time = 2
time = 40
sound = S10,1
pos = 0,-70
darken = 1
poweradd = -2000

;-------------------
; DCvM hyper portrait/BG
[State 3070, orb1]
type = Explod
trigger1 = Time = 26    ;AnimElem=8   ;time = 2
name = "Orb"
pos = -23,0
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3070, orb2]
type = Explod
trigger1 = Time = 26    ;AnimElem=8   ;time = 2
name = "Orb"
pos = 60,0
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3070, superportrait]
type = Explod
trigger1 = Time = 26    ;AnimElem=8   ;time = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3070, superbg]
type = Explod
trigger1 = Time = 26   ;AnimElem=8   ;time = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3070, superBG]
type = Helper
trigger1 = Time = 30
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3070, Clone #1 (Abbott)]    ; (a bit faster & taller)
type = Helper
trigger1 = Time = 30    ;AnimElem=9
helpertype = player
name = "LoboClone"
id = 10
pos = -30,0
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3075
size.xscale = 0.95
size.yscale = 1.05

[State 3070, Clone #2 (Costello)]  ; (a bit slower & shorter)
type = Helper
trigger1 = Time = 30    ;AnimElem=9
helpertype = player
name = "LoboClone"
id = 11
pos = 60,0
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3075
size.xscale = 1.05
size.yscale = 0.95

[State 3070, back to normal]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-----------------
; Clone "birth"
[Statedef 3075]
type = S
movetype = H
physics = S
ctrl = 0
anim = 3075

[State 3075, start clone timer]
type = VarSet
trigger1 = AnimTime = -1    ;!Time
v = 10
value = 0   ;300

[state 3075, abbottlobo] ; a little lightbronze
type = palfx
triggerall = ishelper(10)
trigger1 = !time
add = 25,25,6
time = -1

[state 3075, costellolobo] ; a little dark
type = palfx
triggerall = ishelper(11)
trigger1 = !time
add = -30,-38,-20
time = -1

[State 3075, playsnd]
type = PlaySnd
trigger1 = Time = 1
value = 10,75

[State 3075, goto stance]
type = ChangeState
trigger1 = !AnimTime ;Time = 1
value = 0
ctrl = 1


;-----------------
; Clone gethit          ; this thing isn't working right yet...
[Statedef 3078]
type = S
movetype = H
physics = S
anim = 5000

[State 3078, back to stance]
type = ChangeState
trigger1 = Time = 15
value = 0
ctrl = 1

;-----------------
; Clone "death"
[Statedef 3079]
type = S
movetype = H
physics = S
anim = 3079
ctrl = 0

[State 3079, varset]
type = VarSet
trigger1 = !Time
v =  10
value = -1

[State 3079, byebye clonie!]
type = DestroySelf
trigger1 = !AnimTime ;Time = 10    ; timing may need to be tweaked a bit...
trigger1 = ishelper


;---------------------------------------------------------------------------
; Plastic Ball (stolen from Plastic Man)
[StateDef 3080]
type    = S
physics = S
ctrl = 0
anim = 3080
velset = 0,0

[State 3080, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3080, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,80
channel = 0

[State 3080, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 0,-20
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3080, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3080, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1
; end DCvM stuff
;-------------------

[State 3080, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 3081


; Plastic Ball - attack state
[StateDef 3081]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 3081
velset = 6,5

[State 3081, superBG]
type = Helper
trigger1 = AnimElem = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3081, bounce]
type = PlaySnd
trigger1 = ScreenPos Y > 239
trigger2 = ScreenPos Y < 40
trigger3 = BackEdgeBodyDist < 1
trigger4 = FrontEdgeBodyDist < 1
persistent = 1
value = 10,81

[State 3081, 1]
type = HitDef
trigger1 = (time%6)=0;!movecontact
attr = S, HA                     ;Attribute: Standing, Normal Attack
damage = 23, 9                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -36               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S2,2                  ;Sound to play on hit
guardsound = S3,0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 3081, 0]
type = AfterImage
trigger1 = (time%30) = 0
time = 30
TimeGap  = 1
FrameGap = 2
length = 6
PalBright   = 0,0,0
PalContrast = 128,128,128;190
PalAdd      = 0,0,0
PalMul      = 1,1,1
trans = add1

[State 3081, Super D]
type = ScreenBound;NotHitBy
trigger1 = anim=3081;!Time;1;AnimElem = 2
value = 0;SCA;, NA, SA, AT
;time = 12

[State 3081, 3]
type = velset
trigger1 = BackEdgeBodyDist < 1 && vel x < 0
trigger2 = FrontEdgeBodyDist < 1 && vel x > 0
x= (vel x)*-1.1
y = vel y

[State 3081, 3]
type = velset
trigger1 = ScreenPos Y > 235 && vel y > 0
trigger2 = ScreenPos Y < 40 && vel y < 0
y= (vel y)*-1.005
x = vel x

[State 3081, VarSet]
type = VarSet
trigger1 = Time = 249
sysvar(3) = 0

[State 3081, ChangeState]
type = ChangeState
trigger1 = Time = 250
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Failsafe Emission (stolen from Lex Luthor)
[StateDef 3100]
type = S
movetype = A
physics = S
ctrl = 1
anim = 3100
velset = 0,0

[State 3100, PlaySnd] ; you're mine now...
type = PlaySnd
trigger1 = !Time
value = S10,2
channel = 0

[State 3100, jump]
type = VelAdd
trigger1 = AnimElem = 1
y = -5.3

[State 3100, pos freeze]
type = PosFreeze
trigger1 = Time = [15,85]
value = 1

[State 3100, VelAdd]
type = VelAdd
trigger1 = Time = [86,99]
y = -0.4

[State 3100, jump sound]
trigger1 = AnimElem = 1
type = PlaySnd
persistent = 0
value = 8,0

[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1
statetype = A
physics = A

[State 3100, superpause]
type = SuperPause
trigger1 = AnimElem = 4
time = 40
sound = S10,1
pos = 8,-100
darken = 1
poweradd = -1000

[State 3100, orb]
type = Explod
trigger1 = AnimElem = 4
name = "Orb"
pos = 8,-100
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1

[State 3100, superportrait]
type = Explod
trigger1 = AnimElem = 4
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3100, superbg]
type = Explod
trigger1 = AnimElem = 4
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3100, helper]
type = Helper
triggerall = NumHelper(3105) = 0
trigger1 = AnimElem = 5
name = "Failsafe"
ID = 3105
pos = 8,-100
postype = p1
stateno = 3105
layerno = 3

[State 3100, end]
type = ChangeState
trigger1 = Time > 100
value = 3101


; Failsafe Emission - player end
[StateDef 3101]
type = A
movetype = I
physics = A
anim = 3101

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimTime < 0
y = -0.4

[State 3101, safefall]
type = ChangeState
trigger1 = !AnimTime
value = 948


; Failsafe Emission: explosion anim/hitdef
[StateDef 3105]
anim = 3105
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 4

[State 3105, BindToParent]
type = BindToParent
trigger1 = IsHelper && parent,anim=3100
time = 1
pos = 8,-100

[State 3132, no shadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3105, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,100
;volume = 0
freqmul = 0.75
pan = 50

[State 3105, hitdef]
type = HitDef
trigger1 = TimeMod = 4,1
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = Heavy
priority = 7,Hit
damage = 10,2
pauseTime = 0,10
guard.pauseTime = 0,10
;sparkno = -1 ;S802
guard.sparkno = S802
sparkxy = -90,90
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.hittime = 32
guard.hittime = 30
ground.velocity = -10,-10
palfx.time = 20
palfx.mul = 255,512,255

[State 3105, ChangeState]
type = ChangeState
trigger1 = parent, anim != 3100
value = 3106


; Failsafe Emission: explosion end
[StateDef 3106]
anim = 3106
ctrl = 0
type = U
movetype = I
physics = N
sprpriority = 4

[State 3106, destroyself]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Superior TK (stolen from Superboy)
[StateDef 3120]
type    = S
physics = S
ctrl = 0
anim = 3120
velset = 0,0

[State 3120, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3120, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3120, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3120, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3120, afterimg]
type = AfterImage
trigger1 = animelem = 1
time = 2
length = 28
framegap = 7
trans = add1
removeongethit = 1

[State 3120, change afterimg]
type = AfterImageTime
trigger1 = time >= 0
time = 2

[State 3120, voice]
type = PlaySnd
trigger1 = !Time
value = S20,5
channel = 2

[State 3120, swoosh]
type = PlaySnd
trigger1 = animelem = 7
value = S0,2
channel = 1

[State 3120, smack]
type = PlaySnd
trigger1 = animelem = 8
value = S1,1
channel = 3

[State 3120, big rock]
type = Helper
trigger1 = time = 15
name = "Rock Lift"
stateno = 3125
ID = 3125
pos = 75,0
ownpal = 1
ignorehitpause = 1

[State 3120, big dust]
type = Explod
trigger1 = animelem = 8
anim = F2
ID = 2
pos = 95,-75
random = 2,2
supermove = 9999
pausemovetime = 9999
sprpriority = 10
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3120, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Superior TK - Big Rock helper
[statedef 3125]
type = S
movetype = A
physics = N
anim = 3125
sprpriority = 5
ctrl = 0

[State 3125, ]
type = EnvShake
trigger1 = !Time
time = 60

[State 3125, ]
type = PosSet
trigger1 = !Time
y = 0

[State 3125, back dust]
type = Explod
trigger1 = !Time
anim = F60
ID = 60
facing = 1
sprpriority = -6
ownpal = 1

[State 3125, front dust]
type = Explod
trigger1 = !Time
anim = F62
ID = 60
facing = 1
scale = 1.25,1
sprpriority = 6
ownpal = 1

[State 3125, ]
type = VelSet
trigger1 = time = 1
y = -3

[State 3125, ]
type = veladd
trigger1 = vel Y < 5 && parentdist Y >= 20
y = 1

[State 3125, ]
type = veladd
trigger1 = vel Y > -5 && parentdist Y < 20
y = -1

[State 3125, quake snd]
type = PlaySnd
trigger1 = !Time
value = 9,121

[State 3125, ]
type = EnvColor
trigger1 = movecontact = 1
value = 255,255,255
time = 4
ignorehitpause = 1
persistent = 0

[State 3125, ]
type = HitDef
trigger1 = movecontact = 0
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Medium
air.animtype = Medium
fall.animtype = Up
damage = 100+ceil(random/20),5
pausetime = 2,25
guard.pauseTime = 0,5
sparkno = 3
guard.sparkno = 41
sparkxy = 0,-10
hitsound = S2,2
guardsound = S3,0
ground.type = High
air.type = Low
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -4,-2
guard.velocity = -5
air.velocity = -6,-3
sprpriority = 5
persistent = 0

[State 3125, ]
type = ChangeState
trigger1 = parent,animelem = 9
value = 3126

; TK rock helper state
[statedef 3126]
type = S
movetype = A
physics = N
anim = 3125
sprpriority = 5
ctrl = 0

[State 3126, ]
type = EnvShake
trigger1 = !Time
time = 20

[State 3126, ]
type = VelSet
trigger1 = !Time
x = 12
y = 0

[State 3126, swish2]
type = PlaySnd
trigger1 = !Time
value = S0,2
freqmul = 0.5

[State 3126, ]
type = EnvColor
trigger1 = movecontact = 1
value = 255,255,255
time = 4
ignorehitpause = 1
persistent = 0

[State 3126, ]
type = HitDef
trigger1 = movecontact = 0
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
fall.animtype = Back
ground.type = High
air.type = Low
damage = 150+ceil(random/10),5
pausetime = 2,12
guard.pauseTime = 0,5
sparkno = 3
guard.sparkno = 41
sparkxy = 0,-10
hitsound = S2,2
guardsound = S3,0
ground.slidetime = 25
ground.hittime = 25
ground.velocity = -10,-2
guard.velocity = -5
air.velocity = -12,-3
sprpriority = 5
fall = 1
persistent = 0

[State 3126, end state]
type = ChangeState
trigger1 = frontedgedist <= -100
trigger2 = movecontact = 1
value = 3127

; TK rock end state
[statedef 3127]
type = S
movetype = I
physics = S
anim = 3126
ctrl = 0

[State 3127, no more]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Needle Storm (stolen from Sinestro)
[StateDef 3130]
anim = 3130
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2

[State 3130, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
anim = S3135
sound = S10,1
pos = 40,-90
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3130, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3130, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3130, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3130, Helper]
type = Helper
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
helpertype = normal
name = "needle storm"
ID = 3132
stateno = 3132
pos = 50,-110 ;+ (Random/50)
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = 0.75
size.yscale = 0.25

[state 3130, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1

;-----------------
;(adapted from FlowaGirl's Homing Projectiles tutorial)
; Needle Storm - construct custom state
[StateDef 3132]
type    = A
movetype= A
physics = N
anim = 3132
sprpriority = 6

[State 3132, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,591

[State 3132, VelSet]
type = VelSet
trigger1 = !Time
x = (Random*3.5/1000)
y = (Random*5/1000) - 2.5

[State 3132, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3132, Turn]
type = Turn
trigger1 = (P2Dist X < 10)

[State 3132, VarSet]
type = VarSet
trigger1 = IsHelper
fv = 2
value = (EnemyNear, Pos Y) + (EnemyNear, Const(size.mid.pos.y))

[State 3132, VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -6)
x = -0.2

[State 3132, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 6)
x = 0.2

[State 3132, VelAdd]
type = VelAdd
trigger1 = (FVar(2) > Pos Y) && (Vel Y < 6)
y = 0.1 + (Random/1000)

[State 3132, VelAdd]
type = VelAdd
trigger1 = (FVar(2) < Pos Y) && (Vel Y > -6)
y = -0.1 - (Random/1000)

[State 3132, VelSet]
type = VelSet
trigger1 = (FVar(2) = Pos Y)
y = 0

[State 3132, HitDef]
type = HitDef
trigger1 = TimeMod = 25,0
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = Back
priority = 7,Hit
damage = 6,1
;sparkno = S9995
guard.sparkno = 0
hitsound = S9,592
guardsound = S3,0
sparkxy = 0,0
priority = 2,Hit
sprpriority = 6
pausetime = 3,18
ground.type = Low
ground.slidetime = 18
ground.hittime = 15
ground.velocity = -0.5
air.velocity = -1, 0.5
fall = 1
fall.recover = 0
down.bounce = 1
kill = 1
palfx.time = 20
palfx.add = -104,15,-104
palfx.mul = 192,384,192
palfx.sinadd = 0,56,0,10

[State 3132, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow

;-----
; KFM's "angled projectiles" code
[State 3132, blah]
type = VarSet
trigger1 = Vel X != 0
fv = 3
value = ((atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)) - 90

[State 3132, blah]
type = VarSet
trigger1 = Vel X = 0
fv = 3
value = ((atan(Vel Y) + (3*pi/2)) *(-180/Pi)) - 90

[State 3132, blah]
type = AngleSet
trigger1 = 1
value = FVar(3)

[State 3132, blah]
type = AngleDraw
trigger1 = 1
;-----

;Generated by Fighter Factory PalFX Editor
[State 3132, PalFXWiz]
type = AfterImage
trigger1 = !Time
time = -1
add = 128,128,0
mul = 256,256,256
sinadd = -50,-50,40,10
invertall = 1
color = 0

[State 3132, done]
type = ChangeState
trigger1 = Time = 160
trigger2 = HitCount = 1
trigger3 = MoveGuarded
value = 3133

;-----------------
; Needle Storm - construct custom state (end)
[StateDef 3133]
type    = A
movetype= A
physics = N
anim = 3133
sprpriority = 6
velset = 0,0

[State 3132, blah]
type = AngleDraw
trigger1 = 1

[State 3133, done]
type = DestroySelf
trigger1 = !AnimTime



;---------------------------------------------------------------------------
; Flame Breath (stolen from Bizarro)
[StateDef 3140]
anim = 3140
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 2

[State 3140, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3140, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3140, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3140, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3140, afterimg]
type = AfterImage
trigger1 = animelem = 1
time = 96
length = 28
framegap = 7
trans = add1
removeongethit = 1

[State 3140, playsnd]
type = Null ;PlaySnd
trigger1 = !Time
value = 9,610
channel = 0

[State 3140, flames]
type = Helper
trigger1 = AnimElemTime(2) % 8 = 1
name = "flamebreath"
ID = 3145
pos = 69,-58
vel = 5,0
stateno = 3145
ownpal = 1

[state 3140, back to stance]
type = changestate
trigger1 = !AnimTime
value = 0
ctrl = 1

; Flame Breath - fire helper
[StateDef 3145]
anim = 3145
ctrl = 0
type = S
movetype = A
physics = N
sprpriority = 3
velset = 3, (4 - Random/160)

[State 3145, playsnd]
type = PlaySnd
trigger1 = time = 1
value = 9,611

[State 3145, noshadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3145, AfterImage]
type = AfterImage
trigger1 = !Time
time = 50
palbright = 30,30,30

[State 3145, 2]
type = HitDef
trigger1 = AnimElem >= 1
attr = S, SA
animtype  = Hard
damage    = (Random/25)
pauseTime = 0,15
hitsound   = 15,0
guardflag = MA
hitflag = MAF
sparkno = -1
guardsound = 15,0
fall = 1
ground.type = Low
ground.slidetime = 70
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -8
air.velocity = -9,-8
airguard.velocity = -6, -5
palfx.time = 20
palfx.add = 255,125,0
palfx.sinadd = 40,40,0,0
palfx.color = 0

[State 3145, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 3145, destroyself]
type = DestroySelf
trigger1 = !AnimTime


;--------------------------------
; Stolen Hyper - Explosive Growth (Poison Ivy)
[Statedef 3170]
type = S
movetype = A
physics = C
anim = 3170
ctrl = 0
velset = 0,0
sprpriority = 2

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3020, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3020, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3020, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 40
sound = S10,1
pos = 25,-25
darken = 1
poweradd = -1000

[State 3020, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3020, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3020, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3170, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "vines"
ID = 3175
stateno = 3175
pos = 120,0
ownpal = 1

[State 3170, done]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Explosive Growth - vines helper
[Statedef 3175]
type = S
movetype = A
physics = S
anim = 3175
ctrl = 0
velset = 0,0

[State 3175, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,171

[State 3175, HitDef]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
attr = C,H
hitflag = MAFD
guardflag = MA
animtype = up
air.animtype = diagup
fall.animtype = Back
pausetime = 7,9
priority = 6,Hit
damage = 35,3
sparkno = S9992
sparkxy = 0, -50
hitsound = S2,2
guardsound = S3,0
ground.slide = 4
ground.hit = 4
air.hittime = 20
ground.velocity = -1,-6
;guard.velocity = 0
air.velocity = -1.2,-6.5
sprpriority = 1
fall = 1
down.bounce = 1

[State 3175, HitDef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
attr = C,HA
hitflag = MAFD
animtype = back
damage = 45,5
sparkno = S9992
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slide = 10
ground.hit = 10
pausetime = 7,9
ground.velocity = -4.1,-2.2
air.velocity = -2.4,-5.5
;airguard.velocity = 0,0
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;down.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
fall = 1
down.bounce = 1

[State 3175, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Fernus the Burning: flaming beam hyper from Martian Manhunter
[StateDef 3190]
type    = S
physics = S
ctrl = 0
anim = 3190
velset = 0,0

;Generated by Fighter Factory PalFX Editor
[State 3190, PalFXWiz]
type = PalFX
trigger1 = Time %50 = 0
time = 50
add = 40,-70,-200
mul = 256,256,256
sinadd = 40,30,0,10
invertall = 1
color = 0
;add = 240,60,0
;mul = 255,204,110
;sinadd = 130,65,85,10

[State 3190, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3190, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3190, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3190, superBG]
type = Helper
trigger1 = Time = 5
trigger2 = Time = 25
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3190, afterimg]
type = AfterImage
trigger1 = animelem = 1
time = 2
length = 28
framegap = 7
trans = add1
removeongethit = 1

[State 3190, change afterimg]
type = AfterImageTime
trigger1 = time >= 0
time = 2

[State 3190, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "Flame Blast"
ID = 3191
stateno = 3191
pos = 50,-65
postype = p1
facing = 1
ownpal = 1
supermove

[State 3190, persistHyperBG]
type = VarSet
trigger1 = AnimElem = 3
sysvar(3) = 1

[State 3190, end anim]
type = ChangeState
triggerall = AnimElemTime(3) >= 0
trigger1 = NumHelper(3191) = 0
value = 3192


; Inferno Blast -- flame beam helper state
[StateDef 3191]
type = A
movetype = A
physics = C
anim = 3191
ctrl = 0
sprpriority = 2

[State 3191, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (55 * parent, facing)
y = parent, Pos Y - 65

[State 3191, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,611
channel = -1

[State 3191, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3191, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3191, hitdef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Medium
air.animtype = Medium
fall.animtype = Medium
damage = 25,2
pausetime = 6,12
hitsound = S10,660
guardsound = S10,660
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,0
kill = 1
guard.kill = 1
fall.kill = 1
p2stateno = 7697

[State 3191, 3]
type = Explod
triggerall = MoveContact
trigger1 = 11
anim = 2618
pos = 18,-70
ontop = 1
postype = p2
bindtime = -1
persistent = 0
removetime = 84
ignorehitpause = 1
ownpal = 1
trans=addalpha
alpha=192,256

[State 3191, killHyperBG]
type = VarSet
trigger1 = AnimTime = -1
sysvar(3) = 0

[State 3191, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime


; Inferno Blast - end
[StateDef 3192]
type = S
movetype = A
physics = S
anim = 3192

[State 3192, killHyperBG]
type = VarSet
trigger1 = !Time
sysvar(3) = 0

[State 3192, changestate]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Plasma Beam (stolen from Eradicator)
[StateDef 3230]
type    = S
physics = S
ctrl = 0
anim = 3230
velset = 0,0

[State 3230, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3230, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3230, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3230, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3230, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3230, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "Plasma Beam"
ID = 3235
stateno = 3235
pos = 55,-86
size.xscale = 1.2
ownpal = 1
supermove

[State 3230, back to stance]
type = ChangeState
trigger1 = !AnimTime && NumHelper(3235) = 0
value = 3237


; Plasma Beam - beam helper
[StateDef 3235]
type = A
movetype = A
physics = C
anim = 3235
ctrl = 0
sprpriority = 2

[State 3235, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (55 * parent, facing)
y = parent, Pos Y - 86

[State 3235, PlaySnd]
type = Null ;PlaySnd
trigger1 = !Time
value = S9,112

[State 3235, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3235, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3235, hitdef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S,SP
hitflag = MAF
guardflag = MA
damage = 20,2
pauseTime = 0,10
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
animtype = Heavy
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0

[State 3235, DestroySelf]
type = DestroySelf
trigger1 = Time = 80
trigger2 = parent,StateNo != 3230


;-----------------
; Plasma Beam (Eradicator) - end of move
[Statedef 3237]
type = S
movetype = H
physics = S
anim = 3237
ctrl = 0

[State 3237, goto stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Chains of Rage (stolen from Red Lantern)
[StateDef 3260]
type    = S
physics = S
ctrl = 0
anim = 3260
velset = 0,0

[State 3000, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3000, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3000, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3000, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3260, vox1]
type = PlaySnd
trigger1 = AnimElem = 2
value = S10,260
channel = 0

[State 3260, vox2]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,3  ;0,260
channel = 0

[State 3260, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "tentacles"
ID = 3261
stateno = 3261
pos = 0,0
sprpriority = 3
supermove

[State 3260, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "tentacles"
ID = 3262
stateno = 3261
pos = -30,13
sprpriority = 3
supermove
facing = -1


[State 3260, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Chains of Rage - chain helper
[StateDef 3261]
type = A
movetype = A
physics = C
anim = 3261
ctrl = 0
sprpriority = 3

[State 3261, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,260

[State 3261, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3261, AfterImage]
type = AfterImage
trigger1 = TimeMod = 10,0
time = 10
;length = 20
;palcolor = 256
;palinvertall = 0
palbright = 30,0,0
;palcontrast = 120,120,220
;palpostbright = 0,0,0
;paladd = 10,10,25
;palmul = .65,.65,.75
;timegap = 1
framegap = 5
;trans = "add" ;"none","add1","sub"

[State 3261, PosSet]
type = PosSet
trigger1 = ID = 3261
x = parent, Pos X
y = parent, Pos Y
sprpriority = 3

[State 3261, PosSet]
type = PosSet
trigger1 = ID = 3262
x = parent, Pos X-30
y = parent, Pos Y+13
sprpriority = 3

[State 3261, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3261, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3261, hitdef]
type = HitDef
trigger1 = TimeMod = 12,0
attr = S,HA
hitflag = MAF
guardflag = MAF
damage = 25,3
pauseTime = 0,0
hitsound = S10,260
guardsound = S3,0
sparkno = S9992
sparkxy = -10,-70
animtype = Heavy
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -2,-3
guard.velocity = -2
air.velocity = -2,-2
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 64,0,0

[State 3261, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime
trigger2 = parent,StateNo != 3260


;---------------------------------------------------------------------------
; Enforced Empathy (Indigo Lantern)
[StateDef 3280]
anim = 3280
ctrl = 0
type = S
movetype = A
physics = S

[State 3060, superpause]
type = SuperPause
trigger1 = animelem = 1
time = 40
sound = S10,1
pos = 44,-73
darken = 1
poweradd = -1000

[State 3060, orb]
type = Explod
trigger1 = animelem = 1
name = "Orb"
pos = 44,-73
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3060, super portrait]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3060, super bg]
type = Explod
trigger1 = animelem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3280, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 16

[State 3280, 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 0              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 3282
p2stateno = 3283

[State 3280, missed]
type = ChangeState
trigger1 = !AnimTime
value = 3281
ctrl = 1


;-------------------------------------------
; Enforced Empathy (missed / blocked)
[StateDef 3281]
anim = 3281
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 3281, varset]
type = VarSet
trigger1 = !Time
v = 49
value = 0

[State 3281, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Enforced Empathy (successfully grabbed P2)
[StateDef 3282]
anim = 3282
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 3282, grab snd]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 3282, energy snd]
type = Null ;PlaySnd
trigger1 = Time = 1
persistent = 0
value = 9,1

[State 3282, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 100,-130

[State 3282, Bind 2]
type = TargetBind
trigger1 = Time = 89
pos = 100,-10

[State 3282, targetdrop]
type = TargetDrop
trigger1 = AnimElem = 2

[State 3282, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------
; Enforced Empathy - P2 being grappled
[StateDef 3283]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 3283, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 3283

[State 3283, scream]
type = PlaySnd
trigger1 = Time = 50
persistent = 1
value = S11,0
channel = 0

;Generated by Fighter Factory PalFX Editor
[State 3283, PalFXWiz]
type = PalFX
trigger1 = Time = 50
time = 40
add = -70,-70,69
mul = 256,256,256
sinadd = 10,10,40,10
invertall = 1
color = 256

[State 3283, poweradd]
type = PowerAdd
trigger1 = Alive
value = -2
kill = 1

[State 3283, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 3283, 2] ; tossed
type = ChangeState
trigger1 = !AnimTime
value = 3284


;-------------------------------------------
; Enforced Empathy - P2 being dropped
[StateDef 3284]
type = A
movetype = H
physics = A
ctrl = 0
velset = 0,0

[State 3284, 2]
type = ChangeState
trigger1 = !Time
value = 5050


;---------------------------------------------------------------------------
; Final Justice (stolen from Captain America)
[StateDef 3510]
type = S
movetype= A
physics = N
juggle  = 9
velset = 0,0
ctrl = 0
anim = 3510
sprpriority = 2

[State 3510, Vox]
type = PlaySnd
trigger1 = !Time
value = S10,510
volume = 125
channel = 0

;-------------------
; superpause & DCvM hyper stuff
[State 3510, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 90
sound = S10,1
pos = 45,-82
darken = 1
poweradd = -1000

[State 3510, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3510, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3510, hyperBG2]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3510, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3510, woosh]
type = PlaySnd
trigger1 = AnimElem = 4
value = 9,521

[State 3510, velset]
type = VelSet
trigger1 = AnimElem = 4
x = 10.4

[State 3510, spark]
type = null ;Explod
trigger1 = AnimElem = 4
ID = 510
anim = 3512
bindtime = -1
facing = 1
pos = -40,0
removetime = -1
sprpriority = 2
removeongethit = 1

[State 3510, HitDef]
type = HitDef
triggerall = AnimElemTime(4) >= 0
triggerall = AnimElemTime(5) < 0
trigger1 = TimeMod = 5,0
attr = S, SA
damage = 16
guardflag = MA
pausetime = 0,2
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -3
air.velocity = -5,-1
getpower = 15
givepower = 10
fall = 1

[State 3510, sparkBegone]
type = null ;RemoveExplod
trigger1 = AnimElem = 5
ID = 510

[State 3510, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S,HA
hitflag = MAF
guardflag = MA
affectteam = B
animtype = medium
damage = 10,0
pause = 4,4
sparkno = S9992
hitsound = S2,0
guardsound = S3,0
ground.type = Low
ground.slidetime = 3
ground.hittime = 3
air.hittime = 20
ground.velocity = -3,0
air.velocity = 2,0
kill = 0
guard.kill = 0
p1stateno = 3511

[State 3510, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Final Justice - autocombo
[Statedef 3511]
type = S
movetype= A
physics = S
anim = 3511
velset = 0,0

[State 3511, TargetBind]
type = TargetBind
trigger1 = !time
time = 10
pos = 70,-10
ignorehitpause = 1
persistent = 1

[State 3511, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
persistent = 0

[State 3511, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3511, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 8
trigger4 = Animelem = 12
trigger5 = Animelem = 14
trigger6 = Animelem = 18
trigger7 = Animelem = 24
trigger8 = Animelem = 28
trigger9 = Animelem = 35
trigger10 = Animelem = 39
value = S0,1
volume = 0
channel = -1
ignorehitpause = 1
persistent = 1

[State 3511, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 43
value = S0,2
volume = 0
channel = -1
ignorehitpause = 1
persistent = 1

[State 3511, HitDef]
type = HitDef
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 8
trigger4 = Animelem = 12
trigger5 = Animelem = 14
trigger6 = Animelem = 18
trigger7 = Animelem = 35
trigger8 = Animelem = 39
attr = S,HA
hitflag = MAF
guardflag = MA
getpower = 0,0
givepower = 12,12
animtype = Medium
air.animtype = Medium
fall.animtype = Diagup
priority = 7,Hit
damage = 12+ceil(random/50),0
pausetime = 2,30
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,1
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 80,0
sprpriority = 1
kill = 0
fall = 0

[State 3511, HitDef]
type = HitDef
trigger1 = Animelem = 24
trigger2 = Animelem = 28
attr = S,HA
hitflag = MAF
guardflag = MA
getpower = 0,0
givepower = 50,8
animtype = Hard
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit
damage = 10+ceil(random/50),0
pausetime = 2,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,0
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 70,0
sprpriority = 1
kill = 0
fall = 0

[State 3511, HitDef]
type = HitDef
trigger1 = AnimElem = 43
attr = S, HA
damage = 50
guardflag = HA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-60
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,5
guard.velocity = -4
air.velocity = -1,6
fall = 1

[State 3511, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0
ignorehitpause = 1
persistent = 0


;---------------------------------------------------------------------------
; Hulk Smash! (stolen from Savage Hulk)
[StateDef 3520]
type    = S
physics = S
ctrl = 0
anim = 3520
velset = 0,0

[State 3520, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,520
channel = 0

[State 3520, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 0,-130
darken = 1
poweradd = -1000

[State 3520, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3520, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3520, rock]
type = Helper
trigger1 = (Time = 15) || (Time = 30) || (Time = 45) || (Time = 60)
trigger2 = (Time = 75) || (Time = 90) || (Time =115) || (Time =130)
name = "rock"
pos = -22 + ((Time / 15) * 72), 20
postype = p1
StateNo = 3525

[State 3520, screenBound]
type = ScreenBound
trigger1 = Alive
value = 0

[State 3520, back to normal]
type = ChangeState
trigger1 = !AnimTime
value = 100
ctrl = 0

;---
; Gamma Slam: helper state for rocks
[StateDef 3525]
type    = C
MoveType= A
physics = N
ctrl = 0
anim = 3525
sprpriority = 2
velset = 0,-4.8

[State 3525, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 10,521
channel = 1

[State 3525, gravity]
trigger1 = Time % 4 = 3
type = VelAdd
y = 0.45

[State 3525, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3525, HitDef]
type = HitDef
trigger1 = !Time
attr = C,SP
damage = 25,6
givepower = 1
guardflag = MA
hitflag = MAFD
pauseTime = 0,5
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
animtype = Heavy
ground.type = Low
ground.slidetime = 8
ground.hittime  = 20
ground.velocity = -5,-5
fall = 1
guard.velocity = -8
air.velocity = -5,-3

[State 3525, done]
type = DestroySelf
trigger1 = !AnimTime


;---------------------------------------------------------------------------
; Maximum Spider (stolen from Spider-Man)
[Statedef 3540]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3540
ctrl = 0
sprpriority = 1

[State 3540, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -(BackEdgeBodyDist / 20)
y = -6 + (4 * (BackEdgeBodyDist / 100))

[State 3540, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 3540, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
value = 3541


; Maximum Spider - superpause & attack #1
[Statedef 3541]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3541
ctrl = 0
sprpriority = 1

[State 3541, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,540
volume = 0
channel = 0

[State 3541, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 0,-90
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3541, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3541, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3541, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3541, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1
persistent = 1

[State 0, ]
type = AfterImage
trigger1 = time = 2
trigger1 = palno != 10
time = 2
length = 32
framegap = 8
trans = add1
ignorehitpause = 0

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 2
time = 2
ignorehitpause = 1
persistent = 1

[State 3541, VarSet]
type = VarSet
trigger1 = AnimElem = 2
fv = 2
value = (EnemyNear, Const(size.mid.pos.y))

[State 3541, VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -6) && !HitCount
x = -0.5

[State 3541, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 6) && !HitCount
x = 0.5

[State 3541, VelAdd]
type = VelAdd
trigger1 = (FVar(2) > Pos Y) && (Vel Y < 6) && !HitCount
y = 0.5

[State 3541, VelAdd]
type = VelAdd
trigger1 = (FVar(2) < Pos Y) && (Vel Y > -6) && !HitCount
y = -0.5

[State 3541, VelSet]
type = VelSet
trigger1 = (FVar(2) = Pos Y)
y = 0

[State 3541, HitDef]
type = HitDef
trigger1 = AnimElem = 2 && !MoveHit
attr = A,HA
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = hard
fall.animtype = up
ground.type = low
air.type = low
priority = 7,Hit
damage = 100,5
pausetime = 5+((hitcount>=4)*20),5+((hitcount>=4)*20)
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = 41
sparkxy = 0,-40
hitsound = S5,6
guardsound = S5,8
ground.slidetime = 50
ground.hittime = 50
air.hittime = 100
ground.velocity = 0,-10
guard.velocity = -4
air.velocity = 0-((hitcount>=4)*10),-10
airguard.velocity = -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 0
;p2stateno = 2050

[State 3541, back to normal]
type = null ;ChangeState
trigger1 = !AnimTime
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Nano Assault (stolen from Iron Man)
[Statedef 3550]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3550
ctrl = 0
sprpriority = 1

[State 3550, Width]
type = Width
trigger1 = 1
value = 33,33

[State 3550, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = -10,-45
darken = 1
poweradd = -1000

[State 3550, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1


[State 3550, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3550, hyperBg]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3550, hyperBG2]
type = Explod
trigger1 = !Time
anim = 9999
ID = 9999
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = -1
vel = 0, 0
postype = back
pos = 0, 0
sprpriority = -999995
bindtime = -1
ownpal = 1

[State 440, vel]
type=velset
trigger1=animelem=3
x=0 ;10
y=-3 ;-3

[State 440, sts]
type=statetypeset
trigger1=animelemtime(3)>=0
statetype=S
physics=S

[State 440, push]
type=playerpush
trigger1=animelemtime(4)>=0&&animelemtime(18)<0&&movehit
value=660
ignorehitpause=1

[State 3550, 2]
type = RemoveExplod
trigger1 = !Time

[State 3550, 3]
type = PlaySnd
trigger1 = time  = 0
value = 50,1

[State 3550, 3]
type = PlaySnd
trigger1 = animelem = 3
value = 30,1

[State 3550, 3]
type = PlaySnd
trigger1 = animelem = 3
value = 30,2

[State 3550, explod1]
type = explod
trigger1 = animelem = 2
ID = 3551
anim = 3551 ;3103
name = "WAVES"
postype = P1
pos = 0, 0
ownpal = 1
bindtime= -1
sprpriority = 6
facing = 1

[State 3550, explod2]
type = explod
trigger1 = animelem = 2
ID = 3552
anim = 3552 ;3104
name = "WAVES2"
postype = P1
pos = 0, 0
ownpal = 1
bindtime= -1
sprpriority = -4
facing = 1

[State 3550, explod3]
type = explod
trigger1 = animelem = 3
ID = 3553
anim = 3553 ;3107
name = "WAVES2"
postype = P1
pos = 31, -66
ownpal = 1
bindtime= -1
sprpriority = 6
facing = 1

[State 3550, dust]
type = Explod
trigger1 = animelem  = 1
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3550,helper1]
type = Helper
trigger1 = StateNo =3550
trigger1 = animelem = 3
ID =3551
postype = P1
pos = 0,-45
helpertype = normal
name = "nano_wave"
stateno = 3551
sprpriority = 6
facing = 1
bindtime = -1
pausemovetime = 1

[State 3550, 5]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = 1

;---------Nano Assault: helper-------------
[statedef 3551]
type = S
movetype = A
physics = N
juggle  = 6
ctrl = 0
anim = 3551
sprpriority = 6

[State 3551, 1]
type = BindToParent
trigger1 = 1
pos = 0,-40

[State 3551, 3]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3551, 4]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 3551
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 3551, 5]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 3551, shadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 3551, snd]
type = playsnd
triggerall = anim = 3551
trigger1 = animelem  = 1
trigger2 = animelem  = 2
trigger3 = animelem  = 3
trigger4 = animelem  = 4
trigger5 = animelem  = 5
value = 30,6

[State 3551, explod]
type = Explod
triggerall = !NumExplod(3111)
trigger1 = animelem  = 1
anim = 3111
ontop = 1
pos = 0,0
bindtime= -1
sprpriority = 6
trans= add1
flag = noshadow
ownpal = 1

[State 3551, explod2]
type = Explod
triggerall = !NumExplod(3102)
trigger1 = animelem  = 1
anim = 3102
ontop = 1
pos = 0,20
bindtime= -1
sprpriority = -4
trans= add1
flag = noshadow
ownpal = 1

[State 3551, explods2]
type = Explod
triggerall = !NumExplod(3102)
trigger1 = animelem  = 1
anim = 3102
ontop = 1
pos = 0,50
bindtime= -1
sprpriority = -4
trans= add1
flag = noshadow
ownpal = 1

[State 3551, explod3]
type = Explod
triggerall = !NumExplod(3111)
trigger1 = animelem  = 1
anim = 3111
ontop = 1
pos = 0,50
bindtime= -1
sprpriority = -4
trans= add1
flag = noshadow
ownpal = 1

[state 3551, hit]
type = HitDef
trigger1 = animelem  = 1
trigger2 = animelem  = 2
trigger3 = animelem  = 3
trigger4 = animelem  = 4
trigger5 = animelem  = 5
attr = S,S
damage = 10,1
animtype  = Medium
hitflag= MAFD
hitsound   = 30,7
ground.velocity = -2, -10
pausetime = 1,12
sparkno = 1
sparkxy = -10,-55
fall = 1
fall.recover = 0

[state 3551, destroy]
type = Destroyself
trigger1 = time = 52


;---------------------------------------------------------------------------
; Buzzsaw (stolen from Sandman)
[StateDef 3570]
type    = S
MoveType= A
physics = S
ctrl = 0
anim = 3570
velset = 0,0

[State 3570, superpause]
type = SuperPause
trigger1 = Time = 4
time = 40
sound = S10,1
pos = 0,-130
darken = 1
poweradd = -1000

[State 3570, superportrait]
type = Explod
trigger1 = Time = 4
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3570, superbg]
type = Explod
trigger1 = Time = 4
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3570, HitDef]
type = HitDef
trigger1 = TimeMod = 2,1
attr = S,HA
hitflag = MAFD
guardflag = MA
;getpower = 0,0
;givepower = 0,0
animtype = hard
priority = 6,Hit
damage = 50,0
pausetime = 2,9
;sparkno = 0
;guard.sparkno = 0
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slide = 14
ground.hit = 9
air.hittime = 20
ground.velocity = -9,0
air.velocity = -9,1
sprpriority = 1
fall = 1
fall.yvelocity = -4.5
fall.recover = 0
fall.damage = 20
down.bounce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1

[State 3570, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 3570, VelAdd]
type = VelAdd
trigger1 = Time > 4 && TimeMod = 2,1
x = 5

[State 3570, back to normal]
type = ChangeState
trigger1 = Time = 60
trigger2 = HitCount > 8
value = 3571

;-----------------
; Buzzsaw (Sandman) - end of move
[Statedef 3571]
type = S
movetype = H
physics = S
anim = 3571
ctrl = 0

[State 3571, goto stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Indigo Slaughter (Carnage)
[Statedef 3590]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 60
ctrl = 0
anim = 3590
sprpriority = 3

[State 3000, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3000, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 40
sound = S10,1
pos = 0,-85
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3000, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3000, superBG]
type = Helper
trigger1 = AnimElem = 4
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 0, ]
type = AfterImage
trigger1 = animelem = 4
time = 2
length = 28
framegap = 7
trans = add1
removeongethit = 1

[State 0, ]
type = PlaySnd
trigger1 = AnimElem >= 4
trigger1 = timemod = 8,6
value = S1,1

[State 0, ]
type = EnvColor
trigger1 = movehit = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 1

[State 0, ]
type = MoveHitReset
trigger1 = movehit = 1
ignorehitpause = 0
persistent = 1

[State 3590, slash]
type = Explod
trigger1 = movehit = 1
anim = 9995
pos = 40,-80
postype = p2
facing = IfElse(random<500,1,-1)
sprpriority = 2
ownpal = 1
ignorehitpause = 1

[State 0, ]
type = HitDef
trigger1 = timemod = 6,4
attr = S,HA
hitflag = MAF
guardflag = MA
animtype = Medium
air.animtype = Medium
ground.type = High
air.type = Low
fall.animtype = Diagup
damage = 15,2
pausetime = 4,2
guard.pausetime = 4,2
sparkno = 2
guard.sparkno = 40
sparkxy = 10,-80
hitsound = S9,592+ifelse(HitCount<1,1,2)
guardsound = S3,0
ground.slidetime = 10
guard.slidetime = 10
ground.hittime = 10
guard.hittime = 10
ground.velocity = -3,0
guard.velocity = -5
air.velocity = -3,-2
airguard.velocity = -5,-3
ground.cornerpush.veloff = 2
air.cornerpush.veloff = 2
down.cornerpush.veloff = 2
guard.cornerpush.veloff = 5
airguard.cornerpush.veloff = 5
forcestand = 1

[State 20, 1]   ; move forward: Flash speed-boost
type = VelSet
triggerall = command = "holdfwd"
trigger1 = Var(50) = 4 || Var(51) = 4
x = const(velocity.walk.fwd.x) * 2

[State 20, 1]   ; move forward: regular
type = VelSet
triggerall = command = "holdfwd"
trigger1 = Var(50) != 4 && Var(51) != 4
x = const(velocity.walk.fwd.x)

[State 20, 2]   ; move back: Flash speed-boost
type = VelSet
triggerall = command = "holdback"
trigger1 = Var(50) = 4 || Var(51) = 4
x = const(velocity.walk.back.x) * 2

[State 20, 2]   ; move back: normal
type = VelSet
triggerall = command = "holdback"
trigger1 = Var(50) != 4 && Var(51) != 4
x = const(velocity.walk.back.x)

[State 3590, ChangeState]
type = ChangeState
trigger1 = Time = 110
value = 3595
ctrl = 0


; Indigo Slaughter - end
[StateDef 3595]
anim = 3595
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 65

[State 3595, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 3595, grunt]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,2
channel = 0

[State 3595, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,HA
damage = 45
guardflag = L
pausetime = 11,11
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
priority = 6,Hit
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 0,-13
guard.velocity = -6
air.velocity = -1,-14
air.juggle = 8
fall = 1
down.bounce = 1

[State 3595, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Photon Array (Dr. Doom)
[Statedef 3600]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 50
ctrl = 0
anim = 3600
sprpriority = 2

[State 3600, photonArray!]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,600
channel = 0

[State 3600, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3600, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3600, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3600, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3600, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3600, 5]
type = Helper
trigger1 = Time >= 14 && TimeMod = 4,0
ownpal = 1
pos = 0,-70
postype = p1
ID = 3601
bindtime = -1
name = "Photon Effect"
stateno = 3601
ontop = 1

[State 3600, 4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Photon Array - spark/helper
[Statedef 3601]
type    = S
movetype= A
physics = N
poweradd= 65
ctrl = 0
anim = 3601
sprpriority = 3

[State 3601, 2]
type = PlaySnd
trigger1 = !Time
value = 10, 601

[State 3601, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA,NA,SA,HA,NT,ST,HT,NP,SP,HP
ignorehitpause = 1

[State 3601, VelSet]
type = null ;VelSet
trigger1 = !Time
x = ((Random / 333) + 5) * ((Random / 500) - 1)
y = ((Random / 333) + 1) * ((Random / 500) - 1)

[State 3601, HitDef]
type = HitDef
trigger1 = !Time
attr = S,HP
damage = 15,8
animtype = hard
getpower = 20
givepower = 20
hitflag = MAF
guardflag = MA
pausetime = 2,2
;sparkno = 0
;guard.sparkno = 0
sparkxy = 100, 30
hitsound = S10,602
guardsound = S3,0
ground.type = High
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -8
airguard.velocity = -3.5,-2.75
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
sprpriority = 4
priority = 6,Dodge

;-----
; KFM's "angled projectiles" code
[State 3055, blah]
type = VarSet
trigger1 = Vel X != 0
fv = 3
value = ((atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)) - 90

[State 3055, blah]
type = VarSet
trigger1 = Vel X = 0
fv = 3
value = ((atan(Vel Y) + (3*pi/2)) *(-180/Pi)) - 90

[State 3055, blah]
type = AngleSet
trigger1 = 1
value = FVar(3)

[State 3055, blah]
type = AngleDraw
trigger1 = 1
;-----

[State 3601, 3]
type = Destroyself
trigger1 = Time = 80
;trigger2 = parent, StateNo != 3600


;---------------------------------------------------------------------------
; Penance Stare (Ghost Rider)
[StateDef 3610]
anim = 3610
ctrl = 0
type = S
movetype = A
physics = S

[State 3060, superpause]
type = SuperPause
trigger1 = animelem = 1
time = 40
sound = S10,1
pos = 44,-73
darken = 1
poweradd = -1000

[State 3060, orb]
type = Explod
trigger1 = animelem = 1
name = "Orb"
pos = 44,-73
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3060, super portrait]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3060, super bg]
type = Explod
trigger1 = animelem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3610, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 16

[State 3610, 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 0              ;Force p2 into falling down
sprpriority = 1
p2facing = 1
p1stateno = 3612
p2stateno = 3613

[State 3610, missed]
type = ChangeState
trigger1 = !AnimTime
value = 3611
ctrl = 1


;-------------------------------------------
; Penance Stare (missed / blocked)
[StateDef 3611]
anim = 3611
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 3611, varset]
type = VarSet
trigger1 = !Time
v = 49
value = 0

[State 3611, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------
; Penance Stare (successfully grabbed P2)
[StateDef 3612]
anim = 3612
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 3612, grab snd]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 3,1

[State 3612, energy snd]
type = Null ;PlaySnd
trigger1 = Time = 1
persistent = 0
value = 9,1

[State 3612, Explod]
type = Explod
trigger1 = Time = 1
anim = 3615
ID = 3615
pos = 21,-105
postype = p1
bindtime = 90
removetime = -1
supermove
scale = 1,1
sprpriority = 6
ownpal = 1
removeongethit = 1

[State 3612, Explod]
type = Explod
trigger1 = Time = 1
anim = 3615
ID = 3615
pos = 14,-108
postype = p1
bindtime = 90
;vel = 0,0
removetime = -1
supermove
scale = 1,1
sprpriority = 6
ownpal = 1
removeongethit = 1

[State 3612, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 100,-130

[State 3612, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -25,-140

[State 3612, Bind 3]
type = Null ;TargetBind
trigger1 = AnimElem = 3
pos = -85,-15

[State 3612, targetdrop]
type = TargetDrop
trigger1 = AnimElem = 3

[State 3612, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 3615

[State 3612, turn]
type = Turn
trigger1 = !AnimTime

[State 3612, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------
; Penance Stare - P2 being grappled
[StateDef 3613]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 3613, ChangeAnim2]
type = ChangeAnim2
Trigger1 = !Time
value = 1013

[State 3613, scream]
type = PlaySnd
trigger1 = Time = 50
persistent = 1
value = S11,0
channel = 0

;Generated by Fighter Factory PalFX Editor
[State 3613, PalFXWiz]
type = PalFX
trigger1 = Time = 50
time = 40
add = 40,-70,-200
mul = 256,256,256
sinadd = 40,30,0,10
invertall = 1
color = 0

[State 3613, lifeadd]
type = LifeAdd
trigger1 = Alive
value = -2
kill = 1

[State 3613, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 3613, 2] ; tossed
type = ChangeState
trigger1 = !AnimTime
value = 3614


;-------------------------------------------
; Penance Stare - P2 being dropped
[StateDef 3614]
type = A
movetype = H
physics = A
ctrl = 0
velset = 12,0

; use anim 5150 (lie KOed) somewhere?

[State 3614, 2]
type = SelfState
trigger1 = Time = 4
value = 5050


;-------------------------------------------
; Hyper Blanka Envy (Strong Guy)
[StateDef 3620]
anim = 3620
ctrl = 0
type = A
movetype = A
physics = A
velset = 3,-13
poweradd = 175
juggle  = 7

[State 3620, PalFX]
type = AfterImage
trigger1 = !Time
length = 10
FrameGap = 2
Trans = Add1
time = 10

[State 3620, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,HP

[State 3620, ChangeState]
type = ChangeState
trigger1 = Alive
value = 3621

;---------------------------------------------------------------------------
; Hyper Blanka Envy (hitdef handler)
[StateDef 3621]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 3060, superpause]
type = SuperPause
trigger1 = animelem = 1
time = 40
sound = S10,1
pos = 44,-73
darken = 1
poweradd = -1000

[State 3060, orb]
type = Explod
trigger1 = animelem = 1
name = "Orb"
pos = 44,-73
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3060, super portrait]
type = Explod
trigger1 = animelem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3060, super bg]
type = Explod
trigger1 = animelem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3621, 5]
type = AssertSpecial
trigger1 = Time = [0, 300]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3621, PalFX]
type = AfterImage
trigger1 = AnimElem = 2
length = 10
FrameGap = 2
Trans = Add1
time = 75

[State 3621, 0]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
movetype = A
physics = A

[State 3621, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 3
y = -11 ;-13

[State 3621, swoosh]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 0,2

[State 3621, vox]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10,80
channel = 0

[State 3621, superjump sparks]
type = explod
trigger1 = AnimElem = 2
anim = F61
postype = p1
pos = 0,0
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, ]
type = explod
trigger1 = AnimElem = 2
anim = F700
postype = p1
pos = 0,0
vel = 0,1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, ]
type = null ;explod
trigger1 = vel y <= -0.5 && numexplod(701) <= 5 && timemod = 3,1
anim = F701
id = 701
postype = p1
pos = const(size.mid.pos.x),const(size.mid.pos.y)-20
random = 20+const(size.air.back)+const(size.air.front),15
vel = var(48),1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 3621, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1
ownpal = 1

[State 3621, HitDef]
type = HitDef
trigger1 = Time % 4 = 0
attr = A, HA
damage = 10,5
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -2, 3
guard.velocity = -3
air.velocity = -1, 1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 3621, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,HP

[State 3621, 1]
type = ChangeState
triggerall = Time > 40
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3622

;---------------------------------------------------------------------------
; Hyper Blanka Envy (hitdef handler)
[StateDef 3622]
type = S
movetype = A
physics = S
anim = 3620
ctrl = 0

[State 3622, 5]
type = AssertSpecial
trigger1 = Time = [0, 70]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3622, PalFX]
type = AfterImage
trigger1 = !Time
length = 10
FrameGap = 2
Trans = Add1
time = 68

[State 3622, envshake]
type = EnvShake
trigger1 = !Time
time = 10

[State 3622, Back Dust]
type = Explod
trigger1 = Time = 4
persistent = 0
anim = 918
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1

[State 3622, 2]
type = VelSet
trigger1 = Time = [5, 69]
x = 7

[State 3622, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 3622, HitDef]
type = HitDef
trigger1 = Time % 6 = 0 && Time <= 68
attr = S, HA
damage = 12, 5
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -1
guard.velocity = -3
air.velocity = -1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 3622, HitDef]
type = HitDef
trigger1 = Time > 68
attr = S, HA
damage = 17,8
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S9992 ;8270
;guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -10,-6
guard.velocity = -3
air.velocity = -9,-5
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
air.fall = 1

[State 3622, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,HP

[State 3622, 1]
type = ChangeState
trigger1 = Time = 70
value = 0
ctrl = 1


;-------------------------------------------
; Rock Walls (Thanos)
[StateDef 3630]
anim = 3630
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 4

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3630, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3630, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 50
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

[State 3630, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3630, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3630, superBG]
type = Helper
trigger1 = AnimElem = 4
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3630, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 9,655

[State 3630, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 18
freq = 70
ampl = -8
phase = 40

; spawn the rock wall helpers
[State 3630, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "left-wall"
ID = 3635
stateno = 3635
pos = -75,0
facing = 1
postype = p2
ownpal = 1
supermove

[State 3630, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "right-wall"
ID = 3636
stateno = 3635
pos = 75,0
facing = -1
postype = p2
ownpal = 1
supermove

[State 3630, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;------------------
; Wall Crush (Thanos hyper) - wall helper
[StateDef 3635]
type = A
movetype = A
physics = C
anim = 3635
ctrl = 0
sprpriority = 2

[State 3635, PlaySnd]
type = null ;PlaySnd
trigger1 = !Time
value = S10,10

[State 3635, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3635, noreversal2]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3635, PosAdd]
type = PosAdd
trigger1 = Time >= 33
x = 2

; hitdef to knock enemy up and back if hit while the wall is rising
[State 3635, HitDef]
type = HitDef
trigger1 = Time < 33
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = diagup
air.animtype = back
priority = 7,Hit
damage = 10,2
pausetime = 0,8
sparkno = S9992
;guard.sparkno = S3100
sparkxy = 0,-80
hitsound = S2,2
guardsound = S3,0
ground.type = High      ;Low,Trip,None
;air.type = High
ground.slidetime = 7
ground.hittime = 5
air.hittime = 20
ground.velocity = -3,-7
guard.velocity = -2
air.velocity = -1,-4
sprpriority = 2
palfx.time = 1
palfx.add = 255,255,255

; (push/smash hitdefs adapted from Guido; tweaking needed)
[State 3635, HitDef]
type = HitDef
triggerall = Time >= 33 && Time < 90
trigger1 = Time % 5 = 0
attr = S,HA
damage = 10,5
guardflag = M
hitflag = MAFD
priority = 6, Hit
pausetime = 0,8
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;guard.sparkno = S9995
sparkxy = 0,-80
animtype = Heavy
ground.type = High
air.type = Low

; end hitdef (crushed!)
[State 3635, HitDef]
type = HitDef
trigger1 = Time > 90
attr = S,HA
damage = 10,5
guardflag = M
hitflag = MAFD
priority = 6, Hit
pausetime = 0,5
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
;guard.sparkno = S9995
sparkxy = 0,-80
animtype = Heavy
ground.type = High
;ground.hittime  = 12
;ground.velocity = -11, -5
airguard.velocity = -1
air.type = Low
;air.velocity = -4, -2
;air.hittime = 25
fall = 1

[State 3635, ChangeState]
type = ChangeState
trigger1 = MoveContact && HitCount > 10
trigger2 = P2Dist X <= 0
value = 3636


;-----------
; Wall Crush - helper remove
[StateDef 3636]
anim = -1 ;3636
ctrl = 0
type = A
movetype = A
physics = N
velset = 0,0

[State 3636, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S10,751

[State 3636, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime



;---------------------------------------------------------------------------
; Resurrection (Deadpool)
[StateDef 3640]
anim = 3640
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
sprpriority = 4

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3640, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3640, superpause]
type = SuperPause
trigger1 = Time = 5
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

[State 3640, superportrait]
type = Explod
trigger1 = Time = 5
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3640, portraitBG]
type = Explod
trigger1 = Time = 5
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3640, superBG]
type = Helper
trigger1 = Time = 40
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3640, LifeBump]
type = LifeAdd
trigger1 = Time = [40,60]
value = 5
absolute = 1

;Generated by Fighter Factory PalFX Editor
[State 3640, PalFXWiz]
type = PalFX
trigger1 = Time = 40
time = 15
add = 7,-200,-200
mul = 256,256,256
sinadd = 30,5,5,10
invertall = 1
color = 0

[State 3640, IsThatAll?]
type = PlaySnd
trigger1 = Time = 55
value = S10,640
channel = 0

[State 3640, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Deadpool Resurrection: fake KO
[StateDef 3641]
anim = 3641
ctrl = 0
type = A
movetype = H
physics = N
velset = -5,-4

[State 3641, KO snd]
type = PlaySnd
trigger1 = !Time
value = S11,0
channel = 0

[State 3641, VarSet]
type = VarSet
trigger1 = !Time
v = 15
value = 1

[State 3641, Gravity]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3641, hit ground]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 25
value = 3642

; custom HIT_BOUNCE (Deadpool Resurrection fake KO)
[Statedef 3642]
type    = L
movetype= H
physics = N

[State 3642, 1]
type = VelSet
trigger1 = !Time
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 3642, EnvShake]
type = FallEnvShake
trigger1 = !Time

[State 3642, 2] ;Hit ground anim
type = ChangeAnim
trigger1 = !Time
value = 5100

[State 3642, 4]
type = PosSet
trigger1 = !Time
y = 0

[State 3642, 5]
type = VelSet
trigger1 = !Time
y = 0

[State 3642, 6] ;Reduce speed
type = VelMul
trigger1 = !Time
x = 0.75

[State 3642, 7]
type = ChangeState
trigger1 = !Time
trigger1 = GetHitVar(fall.yvel) = 0
value = 3644 ;HIT_LIEDOWN

[State 3642, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 3642, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 61 + (sysvar(1) > 14)
pos = 0, 0
ontop = 1

[State 3642, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 3642, 11]
type = PosFreeze
trigger1 = 1

[State 3642, 12]
type = ChangeState
trigger1 = !AnimTime
value = 3643

[State 3642, 13]
type = ForceFeedback
trigger1 = !Time
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20


; custom HIT_BOUNCE part 2 (Deadpool Resurrection fake KO)
[Statedef 3643]
type    = L
movetype= H
physics = N

[State 3643, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = !Time
value = 5160

[State 3643, 3]
type = HitFallVel
trigger1 = !Time

[State 3643, 4]
type = PosSet
trigger1 = !Time
y = 20

[State 3643, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 3643, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3644


; custom HIT_LIEDOWN (Deadpool Resurrection fake KO)
[Statedef 3644]
type    = L
movetype= H
physics = N

[State 3644, EnvShake]
type = FallEnvShake
trigger1 = !Time

[State 3644, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = !Time
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 3644, 5]
type = PosSet
trigger1 = !Time
y = 0

[State 3644, Var] ;Get fall velocity
type = VarSet
trigger1 = !Time
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 3644, 6]
type = PlaySnd
trigger1 = !Time
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 3644, 7]
type = GameMakeAnim
trigger1 = !Time
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 3644, 8]
type = VelSet
trigger1 = !Time
y = 0

[State 3644, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = !AnimTime
value = 5110

[State 3644, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = !Time
sysvar(0) = 0

[State 3644, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 3644, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = !Time
time = 8
ampl = 240
waveform = sine

[State 3644, 16]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3644, LifeAdd]
type = LifeAdd
trigger1 = 1
value = 10
kill = 0
absolute = 1

;Generated by Fighter Factory PalFX Editor
[State 3644, PalFXWiz]
type = PalFX
trigger1 = !Time
time = 100
add = 100,100,100
mul = 256,256,256
sinadd = -80,-80,-80,10
invertall = 1
color = 0

[State 3644, ChangeState]
type = ChangeState
trigger1 = Time = 100
value = 3645
ctrl = 0


; Resurrection
[StateDef 3645]
anim = 3645
ctrl = 0
type = S
movetype = I
physics = S

[State 3645, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 3645, voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = S10,641
channel = 0

[State 3645, chorus]
type = PlaySnd
trigger1 = AnimElem = 1
value = S10,642
volume = -50

; keep this from being used twice in the same round
[State 3645, VarSet]
type = VarSet
trigger1 = !Time
v = 15
value = 1

[State 3645, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Cosmic Dust (stolen from Sue Storm)
[StateDef 3670]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3670
velset = 0,0

[State 3670, playsnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,670
channel = 0

[State 3670, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 0,-85
darken = 1
poweradd = -1000

[State 3670, orb]
type = Explod
trigger1 = AnimElem = 2
name = "Orb"
pos = 0,-85
postype = p1
anim = 8000
supermove = 40
pausemovetime = 1
scale = .35, .35
ownpal = 1
sprpriority = 2

[State 3670, super portrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3670, super bg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3670, VarSet]
type = VarSet
trigger1 = 1
fv = 1
value = 0.5 ;(Random / 1500) + 0.33

[State 3670, playsnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10,671

[State 3670, bubbles]
type = Projectile
trigger1 = Time % 8 = 0
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
ProjID = 3675
projanim = 3675
projhitanim = 3675
projremanim = 3675
projcancelanim = 3675
projscale = fvar(1),fvar(1)
velocity = 5, (2 - Random/250)
offset = 35,-105
; HitDef
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = medium
priority = 5,Hit
damage = 10,1
pausetime = 4,4
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -6,0
air.velocity = -2,-2

[State 3670, bubbles]
type = Projectile
trigger1 = Time % 7 = 0
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
ProjID = 3675
projanim = 3675
projhitanim = 3675
projremanim = 3675
projcancelanim = 3675
projscale = fvar(1),fvar(1)
velocity = 4.5, (4 - Random/125)
accel = 1.25, 0-Random/500
offset = 35,-105
; HitDef
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = medium
priority = 5,Hit
damage = 10,1
pausetime = 4,4
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -6,0
air.velocity = -2,-2

[State 3670, bubbles]
type = Projectile
trigger1 = Time % 6 = 0
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
ProjID = 3675
projanim = 3675
projhitanim = 3675
projremanim = 3675
projcancelanim = 3675
projscale = fvar(1),fvar(1)
velocity = 5.5, (3 - Random/333)
accel = 1.5, 0
offset = 35,-105
; HitDef
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = medium
priority = 5,Hit
damage = 10,1
pausetime = 4,4
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -6,0
air.velocity = -2,-2

[State 3670, back to normal]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Clobberin' Time (stolen from Thing)
[StateDef 3680]
type = S
movetype= A
physics = N
juggle  = 9
velset = 0,0
ctrl = 0
anim = 3680
sprpriority = 2

[State 3680, Vox] ; "it's clobberin' time!"
type = PlaySnd
trigger1 = !Time
value = S10,680
volume = 125
channel = 0

;-------------------
; superpause & DCvM hyper stuff
[State 3680, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 90
sound = S10,1
pos = 0,-70
darken = 1
poweradd = -1000

[State 3680, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3680, superbg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3680, hyperBG2]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3680, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 4
under = 0
ignorehitpause = 0
persistent = 0

[State 3680, woosh]
type = PlaySnd
trigger1 = AnimElem = 4
value = 9,521

[State 3680, velset]
type = VelSet
trigger1 = AnimElem = 4
x = 10.4

[State 3680, spark]
type = Explod
trigger1 = AnimElem = 4
ID = 10
anim = 2521
bindtime = -1
facing = 1
pos = -40,0
removetime = -1
sprpriority = 2
removeongethit = 1

[State 3680, HitDef]
type = HitDef
triggerall = AnimElemTime(4) >= 0
triggerall = AnimElemTime(5) < 0
trigger1 = TimeMod = 5,0
attr = S, SA
damage = 16
guardflag = MA
pausetime = 0,2
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-70
sparkno = S9992
animtype = Up
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
guard.velocity = -3
air.velocity = -5,-1
getpower = 15
givepower = 10
fall = 1

[State 3680, sparkBegone]
type = RemoveExplod
trigger1 = AnimElem = 5
ID = 10

[State 3680, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S,HA
hitflag = MAF
guardflag = MA
affectteam = B
animtype = medium
damage = 10,0
pause = 4,4
sparkno = S9992
hitsound = S2,0
guardsound = S3,0
ground.type = Low
ground.slidetime = 3
ground.hittime = 3
air.hittime = 20
ground.velocity = -3,0
air.velocity = 2,0
kill = 0
guard.kill = 0
p1stateno = 3681

[State 3680, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Clobberin' Time - autocombo
[Statedef 3681]
type = S
movetype= A
physics = S
anim = 3681
velset = 0,0

[State 3681, TargetBind]
type = TargetBind
trigger1 = !time
time = 10
pos = 70,-10
ignorehitpause = 1
persistent = 1

[State 3681, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
persistent = 0

[State 3681, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 3681, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 8
trigger4 = Animelem = 12
trigger5 = Animelem = 14
trigger6 = Animelem = 18
trigger7 = Animelem = 24
trigger8 = Animelem = 28
trigger9 = Animelem = 35
trigger10 = Animelem = 39
value = S0,1
volume = 0
channel = -1
ignorehitpause = 1
persistent = 1

[State 3681, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 43
value = S0,2
volume = 0
channel = -1
ignorehitpause = 1
persistent = 1

[State 3681, HitDef]
type = HitDef
trigger1 = Animelem = 2
trigger2 = Animelem = 4
trigger3 = Animelem = 8
trigger4 = Animelem = 12
trigger5 = Animelem = 14
trigger6 = Animelem = 18
trigger7 = Animelem = 35
trigger8 = Animelem = 39
attr = S,HA
hitflag = MAF
guardflag = MA
getpower = 0,0
givepower = 12,12
animtype = Medium
air.animtype = Medium
fall.animtype = Diagup
priority = 7,Hit
damage = 12+ceil(random/50),0
pausetime = 2,30
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,1
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 80,0
sprpriority = 1
kill = 0
fall = 0

[State 3681, HitDef]
type = HitDef
trigger1 = Animelem = 24
trigger2 = Animelem = 28
attr = S,HA
hitflag = MAF
guardflag = MA
getpower = 0,0
givepower = 50,8
animtype = Hard
air.animtype = Hard
fall.animtype = Diagup
priority = 7,Hit
damage = 10+ceil(random/50),0
pausetime = 2,20
guard.pause = 2,2
sparkno = 2
guard.sparkno = 41
sparkxy = 0,-75
hitsound = F5,0
guardsound = F6,0
ground.type = High
air.type = High
ground.slidetime = 65
ground.hittime = 65
air.hittime = 65
air.slidetime = 65
ground.velocity = 0.5,-9
air.velocity = 0.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
snap = 70,0
sprpriority = 1
kill = 0
fall = 0

[State 3681, HitDef]
type = HitDef
trigger1 = AnimElem = 43
attr = S, HA
damage = 50
guardflag = HA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkxy = 0,-60
sparkno = S9992
animtype = Heavy
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,5
guard.velocity = -4
air.velocity = -1,6
fall = 1

[State 3681, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0
ignorehitpause = 1
persistent = 0


;---------------------------------------------------------------------------
; Supernova (stolen from Human Torch)
[StateDef 3690]
type    = S
physics = S
ctrl = 0
anim = 3690
velset = 0,0
sprpriority = 6

;Generated by Fighter Factory PalFX Editor
[State 3690, PalFXWiz]
type = PalFX
trigger1 = Time %50 = 0
time = 50
add = 40,-70,-200
mul = 256,256,256
sinadd = 40,30,0,10
invertall = 1
color = 0

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 3690, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3690, afterimg]
type = AfterImage
trigger1 = animelem = 2
time = 200
length = 28
framegap = 7
trans = add1
removeongethit = 1

[State 3690, superpause]
type = SuperPause
trigger1 = AnimElem = 5
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3690, superportrait]
type = Explod
trigger1 = AnimElem = 5
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3690, portraitBG]
type = Explod
trigger1 = AnimElem = 5
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3690, superBG]
type = Helper
trigger1 = AnimElem = 6
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3690, jump]
type = VelSet
trigger1 = AnimElem = 3
y = const(velocity.jump.y)+1.5

[State 3690, snd]
type = PlaySnd
trigger1 = AnimElem = 3
persistent = 0
value = 8,0

[State 3690, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics = A

[State 3690, PosFreeze]
type = PosFreeze
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimTime <= 0
value = 1

; spawn fireball helper projectiles (state 3692) here
[State 3690, Helper]
type = Helper
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimTime <= 0
name = "nova flame"
ID = 3692
stateno = 3692
ownpal = 1
supermove
pos = 0,Pos Y

[State 3690, end]
type = ChangeState
trigger1 = !AnimTime
value = 3693


;-----------------
; Supernova - custom state for fireballs
[StateDef 3692]
type    = A
movetype= A
physics = N
anim = 3692
sprpriority = 5

[State 3692, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,41

[State 3692, VelSet]
type = VelSet
trigger1 = !Time
x = (Random / 50) - 10
y = (Random / 50) - 10

[State 3692, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3692, Turn]
type = Turn
trigger1 = (P2Dist X < 10)

[State 3692, HitDef]
type = HitDef
trigger1 = TimeMod = 4, 0
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 7,Hit
damage = 16,1
sparkno = S2618
guard.sparkno = 0
hitsound = S9,11
sparkxy = 0,0
priority = 2,Hit
sprpriority = 6
ground.type = Low
ground.slidetime = 2
ground.hittime = 5
ground.velocity = -0.5
air.velocity = -1, 0.5
fall = 1
fall.recover = 0
down.bounce = 1
kill = 1
palfx.time = 20
palfx.add = -104,15,-104
palfx.mul = 192,384,192
palfx.sinadd = 0,56,0,10

[State 3692, no shadow]
type = AssertSpecial
trigger1 = Pos Y >= -1
flag = noshadow
ignorehitpause = 1

;-----
; KFM's "angled projectiles" code
[State 3692, blah]
type = VarSet
trigger1 = Vel X != 0
fv = 3
value = ((atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)) - 90

[State 3692, blah]
type = VarSet
trigger1 = Vel X = 0
fv = 3
value = ((atan(Vel Y) + (3*pi/2)) *(-180/Pi)) - 90

[State 3692, blah]
type = AngleSet
trigger1 = 1
value = FVar(3)

[State 3692, blah]
type = AngleDraw
trigger1 = 1
;-----

[State 3692, AfterImage]
type = AfterImage
trigger1 = !Time
time = -1
length = 60
palcolor = 85
palbright = 60,40,30
paladd = 50,35,10
palmul = 1.25,.95,.65
timegap = 1

[State 3692, done]
type = DestroySelf
trigger1 = Time = 80


;-----------------------
; Supernova - end (fall to ground)
[StateDef 3693]
type = A
movetype = I
physics = A
anim = 3693
velset = 0,0
ctrl = 0

[State 3693, slow fall]
type = VelMul
trigger1 = Time > 0
y = 0.90
ignorehitpause = 1
persistent = 1


;---------------------------------------------------------------------------
; Galactic Might (Silver Surfer)
[Statedef 3700]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3700
sprpriority = 2

[State 3700, voice]
type = PlaySnd
trigger1 = !Time
value = 10,700
channel = 0

[State 3700, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3700, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = -9

[State 3700, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics = A

[State 3700, superpause]
type = SuperPause
trigger1 = AnimElem = 3
time = 40
sound = S10,1
anim = S3704
pos = 0,-60
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3700, superportrait]
type = Explod
trigger1 = AnimElem = 3
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3700, portraitBG]
type = Explod
trigger1 = AnimElem = 3
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3700, superBG]
type = Helper
trigger1 = AnimElem = 4
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3700, Helper]
type = Helper
trigger1 = AnimElem = 4
name = "galactic might"
ID = 3705
stateno = 3705
pos = 0,-60
postype = p1    ;p2,front,back,left,right
ownpal = 1
supermove

[State 3700, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Galatic Might - helper explosion
[Statedef 3705]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3705
ctrl = 0
sprpriority = 2

[State 3705, playsnd]
type = PlaySnd
trigger1 = !Time
value = 9,701

[State 3705,0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3705, 1]
type = BindToParent
trigger1 = 1
time = -1
pos = 0,-60

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = 5,-3
guard.velocity = -11
air.velocity =  1,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, 2]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype  = Heavy               ;Make p2 use "Up" type animation on hit
damage    = 30
getpower  = 0
priority  = 5
guardflag = MAF
pauseTime = 0,0
sparkno = S9102
sparkxy =  0,-100
hitsound   = S10,702
guardsound = 3,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -10,-3
guard.velocity = -11
air.velocity =  -10,-3
airguard.velocity = -4.5,-5
palfx.time = 20
palfx.add = 228,89,244
palfx.sinadd = -255,-125,0,200
palfx.color = 100
fall =  1

[State 3705, destroyself]
type = DestroySelf
trigger1 = time = 55 ;removed when the flame over
trigger2 = parent, movetype=H
ignorehitpause = 0


;---------------------------------------------------------------------------
; Mega Optic Blast (stolen from Cyclops)
[StateDef 3720]
type    = S
physics = S
ctrl = 0
anim = 3720
velset = 0,0

[State 3720, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3720, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3720, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3720, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3720, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3720, Helper]
type = Helper
trigger1 = AnimElem = 2
name = "Mega Optic Blast"
ID = 3725
stateno = 3725
pos = 55,-86
ownpal = 1
supermove

[State 3720, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 3721
ID = 3721
bindtime = 90
removetime = 90
sprpriority = 1

[State 3720, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Mega Optic Blast - beam helper
[StateDef 3725]
type = A
movetype = A
physics = C
anim = 3725
ctrl = 0
sprpriority = 2

[State 3725, PosSet]
type = PosSet
trigger1 = 1
x = parent, Pos X + (55 * parent, facing)
y = parent, Pos Y - 86

[State 3725, PlaySnd]
type = Null ;PlaySnd
trigger1 = !Time
value = S9,112

[State 3725, noreversal]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3725, noreversal2]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3725, hitdef]
type = HitDef
trigger1 = TimeMod = 5,0
attr = S,SP
hitflag = MAF
guardflag = MA
damage = 20,2
pauseTime = 0,10
hitsound = S2,2
guardsound = S3,0
sparkno = S9992
animtype = Heavy
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -5
air.velocity = -4,8
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0

[State 3725, DestroySelf]
type = DestroySelf
trigger1 = Time = 80


;---------------------------------------------------------------------------
; Ninjitsu (stolen from Elektra)
[StateDef 3730]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3730
velset = 0,0
sprpriority = 1

numhelper(73) > 4


[State 3730, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 44,-73
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3730, super portrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3730, super bg]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3730, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3730, Shadow 1]
type = Helper
trigger1 = AnimElem = 3
helpertype = player
name = "NinjaShadow"
id = 73
pos = -100,-30
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3735

[State 3730, Shadow 2]
type = Helper
trigger1 = AnimElem = 3
helpertype = player
name = "NinjaShadow"
id = 73
pos = -50,-30
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3735

[State 3730, Shadow 3]
type = Helper
trigger1 = AnimElem = 3
helpertype = player
name = "NinjaShadow"
id = 73
pos = 50,-30
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3735

[State 3730, Shadow 4]
type = Helper
trigger1 = AnimElem = 3
helpertype = player
name = "NinjaShadow"
id = 73
pos = 100,-30
facing = 0
keyctrl = 1
ownpal = 1
stateno = 3735

[State 3730, start shadow timer]
type = VarSet
trigger1 = !Time
v = 10
value = 0

[State 3730, back to normal]
type = ChangeState
trigger1 = !AnimTime
trigger2 = !Time && NumHelper(73) > 0
value = 0
ctrl = 1

;-----------------
; Ninjitsu - shadow spawn
[Statedef 3735]
type = S
movetype = H
physics = S
ctrl = 0
anim = 3735

[state 3735, palfx]
type = PalFX
trigger1 = !Time
add = -212,-212,-212
time = -1

[State 3735, playsnd]
type = PlaySnd
trigger1 = Time = 1
value = 10,75

[State 3735, fall]
type = ChangeState
trigger1 = !AnimTime
value = 948
ctrl = 0


;-----------------
; Ninjitsu - Shadow timeout
[Statedef 3739]
type = S
movetype = H
physics = S
anim = 3739
ctrl = 0

[State 3739, varset]
type = VarSet
trigger1 = !Time
v =  10
value = -1

[State 3739, destroyself]
type = DestroySelf
trigger1 = IsHelper && !AnimTime


;---------------------------------------------------------------------------
; Stinger Bones (stolen from Marrow)
[StateDef 3750]
type    = C
physics = S
ctrl = 0
anim = 3750
velset = 0,0
sprpriority = 1

[State 3750, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S1,3
channel = 0

[State 3750, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3750, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3750, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3750, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3750, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3750, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "stinger bones"
ID = 3755
stateno = 3755
pos = 0,12
ownpal = 1
supermove

[State 3750, back to stance]
type = ChangeState
trigger1 = Time > 50 && NumHelper(3755) = 0
;trigger2 = Time > 100
value = 3757
ctrl = 0


; stinger bones - helper
[statedef 3755]
type = S
movetype = A
physics = N
anim = 3755
sprpriority = 2
ctrl = 0

[State 3750, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S10,751

[State 3755, HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 9
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = hard   ;back
priority = 7,Hit
damage = 40,0
pausetime = 10,5
;guard.pause,0
sparkno = S9992
;guard.sparkno = 0
sparkxy = 0,-50
hitsound = S2,2
guardsound = S3,0
ground.type = Low
;air.type = High
ground.slide = 5
;guard.slide = 0
ground.hittime = 5
;guard.hit = 0
;air.hittime = 20
;guard.ctrl  = 0
;guard.dist = 320
ground.velocity = -1
guard.velocity = -0.5
air.velocity = -2,0
airguard.velocity = -0.75,1
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;down.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;airguard.ctrl = 0
;air.juggle = 0
sprpriority = 2
;fall = 0
;envshake.time = 30,0
;envshake.freq = 75
;envshake.ampl = 10
;envshake.phase = 0

[State 3755, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

; Stinger Bones - end
[statedef 3757]
type = C
movetype = I
physics = N
anim = 3757
ctrl = 0

[State 3750, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Spore Unlock (stolen from Omega Red)
[StateDef 3770]
type    = S
physics = S
ctrl = 0
anim = 3770
velset = 0,0

[State 3770, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3770, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3770, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3770, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3770, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3770, unlock spores]
type = VarSet
trigger1 = AnimElem = 2 && Var(9) = 0
v = 9
value = 1

[State 3770, hit flash]
type = EnvColor
trigger1 = AnimElemTime(2) = 1
value = 128,255,128
time = 6
ignorehitpause = 1
persistent = 0

[State 3770, reset spores]
type = VarSet
trigger1 = AnimTime = -1
v = 9
value = 0

[State 3770, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Death Aura (stolen from Omega Red)
[StateDef 13770]
type    = S
physics = S
ctrl = 0
anim = 3770
velset = 0,0

[State 3770, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3770, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 20,-70
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3770, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 3770, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3770, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3770, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "Death Aura"
ID = 3775
stateno = 3775
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove

[State 3770, back to stance]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Death Aura - spore cloud helper
[Statedef 13775]
type = S
movetype = A
physics = N
anim = 3775
sprpriority = 8
ctrl = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = TimeMod = 5,0
time = 5
trans = "sub"

[State 3775, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3775, noreversal]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3775, noreversal2]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 3775, follow player]
type = PosSet
trigger1 = 1
x = parent,Pos X
y = parent,Pos Y

[State 3775, sfx]
type = null ;PlaySnd
trigger1 = !time
value = 9,772

[State 3775, hit flash]
type = EnvColor
trigger1 = movecontact = 1
value = 128,255,128
time = 4
ignorehitpause = 1
persistent = 0

[State 3775, hit]
type = HitDef
trigger1 = TimeMod = 50,0
attr = S,HA
hitflag = MAF
guardflag = MAF
damage = 25,3
pauseTime = 0,0
hitsound = S9,772
guardsound = -1
sparkno = -1
sparkxy = 0,75
animtype = Heavy
ground.type = Low
ground.slide!Time
ground.hittime  = 0
ground.velocity = 2
guard.velocity = 2
air.velocity = 2,-2
kill = 1
guard.kill = 1
fall.kill = 1
palfx.time = 25
palfx.add = 0,64,0
p2stateno = 3776

[State 3775, end]
type = DestroySelf
trigger1 = Time = 800


; P2 custom hitstate - hurt by Death Aura (adapted from Zvitor's Omega Red)
[Statedef 13776]
type = U
movetype = H

[State 3776, PalFXWiz]
type = PalFX
trigger1 = !Time
time = 25
add = -100,-90,-100
mul = 224,250,120
sinadd = -10,-10,-10,10
invertall = 1
color = 0

; am I dead?
[State 3776, ChangeState]
type = SelfState
trigger1 = Life <= 0
value = IfElse(StateType = A, 5020,5000)

[State 3776, End]
type = SelfState
trigger1 = Time >= 2
value = IfElse(StateType = A, 50,0)
ctrl = 1


;---------------------------------------------------------------------------
; Arctic Attack (stolen from Iceman)
[StateDef 3790]
type = A
movetype = A
physics = N
anim = 3790
ctrl = 0
velset = 0,0

[State 3790, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 3790, vox]
type = PlaySnd
trigger1 = !Time
value = S10,790
channel = 0

[State 3790, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3790, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = 15,-100
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 3790, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 3790, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3790, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 3790, whoosh]
type = PlaySnd
triggerall = AnimElemTime(3) >= 0
trigger1 = Time % 8 = 0
value = 10,791

[State 3790, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3791
ID = 3791
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 120
supermove
pausemove
scale = 1,1
sprpriority = 3
;ontop = 1
ownpal = 1
removeongethit = 1

[State 3790, iceFlurries]
type = Projectile
triggerall = AnimElemTime(3) >= 0
trigger1 = Time % 2 = 0
projheightbound = -500,240
projpriority = 4
ProjID = 3792
projanim = ifelse(Random <= 499, 3792, ifelse(Random <= 499, 3793, 3794))
projhitanim = -1
projremanim = -1
projcancelanim = -1
velocity = 7 + Random/500, (3 - Random/167)
offset = 0,-100
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = Hard
priority = 5,Hit
damage = 9,1
pausetime = 1, 1
sparkno = S9992
guard.sparkno = 0
hitsound = S2,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 11
ground.hittime = 15
ground.velocity = -5, -3
air.hittime = 20
air.velocity =  -4.5, -3
air.juggle = 0
down.velocity = -5, -5
down.hittime = 15
guard.slidetime = 10
guard.hittime = 12
guard.velocity = -5
fall = 1
air.fall = 1
fall.recover = 0
givepower = 15
getpower = 0

[State 3790, back to normal]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Combo Hyper - (power set determiner)
[StateDef 4000]
type    = S
physics = S
velset = 0,0
ctrl = 0

[State 4000, SpiderLobo]
type = ChangeState
triggerall = !Time
trigger1 = Var(50) = 7 && Var(51) = 54
trigger2 = Var(50) = 54 && Var(51) = 7
value = 4050

[State 4000, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 4001


;---------------------------------------------------------------------------
; Combo Hyper - no matching power sets
[StateDef 4001]
type    = S
physics = S
anim = 2000
ctrl = 0
velset = 0,0

[State 4001, dust]
type = Explod
trigger1 = !Time
anim = 918
ID = 918
bindtime = 1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 4001, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9, IfElse(Random<500,4,5)
channel = 0

[State 4001, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Combo hyper: Lobo+Spiderman
[Statedef 4050]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3070
ctrl = 0
sprpriority = 1

[State 4050, Clone 1]
type = Helper
trigger1 = Time = 30
helpertype = player
name = "LoboClone"
id = 10
pos = -30,0
facing = 0
keyctrl = 1
ownpal = 1
stateno = 4051
;size.xscale = 0.95
;size.yscale = 1.05

[State 4050, Clone 2]
type = Helper
trigger1 = Time = 30
helpertype = player
name = "LoboClone"
id = 11
pos = 60,0
facing = 1
keyctrl = 1
ownpal = 1
stateno = 4051
;size.xscale = 1.05
;size.yscale = 0.95

[State 4050, ChangeState]
type = ChangeState
trigger1 = Time = 30
value = 4051


; Maximum Chaos - back to the wall
[Statedef 4051]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3540
ctrl = 0
sprpriority = 1

[State 4051, VelSet]
type = VelSet
trigger1 = !Time
x = -(BackEdgeBodyDist / 20)
y = -6 + (4 * (BackEdgeBodyDist / 100))

[State 4051, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 4051, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
value = 4052 ;IfElse(IsHelper, 4052, 4053)


; Maximum Chaos - pause before lunge
[Statedef 4052]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3541
ctrl = 0
sprpriority = 1

[State 4052, PlaySnd]
type = Null ;PlaySnd
trigger1 = !Time
value = S10,540
volume = 0
channel = 0

[State 4052, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
sound = S10,1
pos = 0,-90
darken = 1
poweradd = -1000

;-------------------
; DCvM hyper portrait/BG
[State 4052, superportrait]
type = Explod
trigger1 = AnimElem = 1
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1

[State 4052, portraitBG]
type = Explod
trigger1 = AnimElem = 1
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 4052, superBG]
type = Helper
trigger1 = AnimElem = 2
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 4052, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
physics = A

[State 4052, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = P2Dist X / 20
y = 6 - (4 * (P2Dist Y / 100))

[State 4052, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,HA
hitflag = MAFD
guardflag = MA
animtype = back
priority = 7,Hit
damage = 90,15
pausetime = 13,13
sparkno = S9992
;guard.sparkno = 0
;sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 4
ground.hit = 12
air.hittime = 20
ground.velocity = -1,0
air.velocity = -2,1
sprpriority = 1
fall = 0
palfx.time = 1
;palfx.mul = 0,0,0
palfx.add = 255,255,255


;--------------------------------------------------------------
; Quick Snack - personal hyper to switch power sets
;
; Quick Snack - startup slot #1
[StateDef 4500]
type = A
movetype = A
physics = U
ctrl = 0
velset = 0,0

[State 4500, varset]
type = VarSet
trigger1 = !Time
v = 49
value = 50  ; slot 1

[State 4500, ChangeState]
type = ChangeState
trigger1 = !Time
value = 4502


; Quick Snack - startup slot #2
[StateDef 4501]
type = A
movetype = A
physics = U
ctrl = 0
velset = 0,0

[State 4501, varset]
type = VarSet
trigger1 = !Time
v = 49
value = 51  ; slot 2

[State 4501, ChangeState]
type = ChangeState
trigger1 = !Time
value = 4502


; Quick Snack - move start
[StateDef 4502]
type = A
movetype = A
physics = N
anim = 4500
ctrl = 0
velset = 0,0
juggle = 7

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 4502, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
facing = -Facing
removeongethit = 1

[State 4502, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 4502, superpause]
type = SuperPause
trigger1 = AnimElem = 2
time = 40
sound = S10,1
pos = -15,-50
darken = 1
poweradd = -1000

[State 4500, superportrait]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 4500, portraitBG]
type = Explod
trigger1 = AnimElem = 2
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 4500, superBG]
type = Helper
trigger1 = AnimElem = 3
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 4500, vox] ;time for a charge
type = PlaySnd
trigger1 = !Time
value = 10,3
channel = 0
removeongethit = 1

[State 4500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 4500, no push]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 4500, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 8
length = 12
palcontrast = 120,120,120
paladd = 10,10,10
palmul = .65,.65,.65
framegap = 2
trans = add
ignorehitpause = 1
persistent = 1

[State 4500, AfterImageTime]
type = AfterImageTime
trigger1 = time >= 0
time = 2
ignorehitpause = 1
persistent = 1

[State 4500, fly off]
type = velset
trigger1 = AnimElem = 3
x = -20

[State 4500, whoosh]
type = PlaySnd
trigger1 = AnimElem = 3
value = S9,232
channel = -1
ignorehitpause = 1
persistent = 0

[State 4500, feed1]
type = PlaySnd
trigger1 = AnimElem = 4
persistent = 0
value = 3,1

[State 4500, feed2]
type = PlaySnd
trigger1 = AnimElem = 4
persistent = 0
value = 9,1

[State 4500, VarSet]
type = VarSet
trigger1 = AnimElem = 4
v = 45
value = Random

; get new random power set (50/50 chance of it being Marvel or DC)
[State 4500, powerPresetDC]
type = VarSet
trigger1 = AnimElem = 4
trigger1 = Random < 500
v = var(49)
value = ((Random * 29) / 1000) + 1

[State 4500, powerPresetMarvel]
type = VarSet
trigger1 = AnimElem = 4
trigger1 = Random >= 500
v = var(49)
value = ((Random * 30) / 1000) + 51

[State 4500, done]
type = ChangeState
trigger1 = !AnimTime
value = 4510
ctrl = 0


;---------------------------------
; Quick Snack - dash back onscreen
[Statedef 4510]
type    = A
physics = A
sprpriority = 1

[State 4510, PosSet]
type = PosSet
trigger1 = !Time
x = -200 * Facing
y = -25
ignorehitpause = 1
persistent = 0

[State 4510, VelSet]
type = VelSet
trigger1 = !Time
x = 3.5
y = 0
ignorehitpause = 1
persistent = 0

[State 4510, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1
persistent = 1

[State 4510, done]
type = ChangeState
trigger1 = Time = 1
value = 948
ctrl = 1


;--------------------------------------------------------------
; Power Overload - personal hyper
[StateDef 6000]
type = S
movetype = A
physics = S
anim = 6000
ctrl = 0
velset = 0,0

[State 6000, snd]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 10,4
channel = 0

;-------------------
; DCvM hyper effects - dust, superpause, noBars, portrait/BG
[State 6000, dust]
type = Explod
trigger1 = !Time
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

[State 6000, noBars]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 6000, PalFXWiz]
type = PalFX
trigger1 = AnimElem = 3
time = 50
add = 0,0,-100
mul = 256,256,256
sinadd = 80,80,40,10
invertall = 1
color = 0

[State 6000, snd2]
type = PlaySnd
trigger1 = AnimElem = 3
persistent = 0
value = 9,1

[State 6000, superpause]
type = SuperPause
trigger1 = AnimElem = 4
time = 40
sound = S10,1
pos = 5,-25
darken = 1
poweradd = -3000

[State 6000, superportrait]
type = Explod
trigger1 = AnimElem = 4
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = 3
ownpal = 1

[State 6000, portraitBG]
type = Explod
trigger1 = AnimElem = 4
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermove = 40
pausemovetime = 40
sprpriority = -2
ownpal = 1

[State 3020, superBG]
type = Helper
trigger1 = AnimElem = 5
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 6000, jump]
type = VelSet
trigger1 = AnimElem = 5
y = const(velocity.jump.y)+1.5

[State 6000, snd]
type = PlaySnd
trigger1 = AnimElem = 5
persistent = 0
value = 8,0

[State 6000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A
physics = A

[State 6000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0 && Vel Y > -2
;trigger2 = Time = 200
value = 6010


; Power Overload - exploding state
[StateDef 6010]
type    = A
movetype = A
physics = A
ctrl = 0
anim = 6010
velset = 0,0

[State 6010, snd]
type = PlaySnd
trigger1 = !Time
persistent = 0
value = 9,112

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = 2.5,0
accel = 0,1
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = 1.25,2.5
accel = 1,0.5
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = 0,2.5
accel = 1,0
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = -2.5,1.25
accel = -1,0.5
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = -2.5,0
accel = 0,-1
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = -1.25,-2.5
accel = -0.5,-1
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = 0,-2.5
accel = -1,0
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, Projectile]
type = Projectile
trigger1 = time < 10
ProjID = 6050
projanim = 6050
projhitanim = 6050
projremanim = 6050
projcancelanim = -1
projscale = 2,2
projremove = 1
projremovetime = -1
velocity = 2.5,-1.25
accel = 1,-0.5
projpriority = 4
projsprpriority = 4
offset = 16,-120
; HitDef
attr = A,HP
hitflag = MAFD
guardflag = MA
animtype = hard
air.animtype = back
priority = 7,Dodge
damage = 30,1
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
ground.type = High
ground.slide = 5
ground.hit = 5
air.hittime = 20
ground.velocity = 2,0
air.velocity = 4,0
sprpriority = 1
palfx.time = 8
palfx.mul = 255,512,255
palfx.add = 40,80,40

[State 6010, SlowMotion]
type = Pause
triggerall = ProjHit = 1
trigger1 = TimeMod = 1,0
time = 5
movetime = 0
pausebg = 0

[State 6010, no fall]
type = VelSet
trigger1 = time < 10
y = 0

[State 6000, safe fall]
type = ChangeState
trigger1 = !AnimTime
value = 948
ctrl = 1


;--------------------------------------------------
; super armor v2 (by Twilight Reaper; see here: http://mugenpulse.forums1.net/t18-super-armor-v2)
;--------------------------------------------------
[Statedef 9000]
movetype = I

[State 9000]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = BindToRoot
trigger1 = 1
pos = 0,0
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = ChangeAnim
trigger1 = root,AnimElemTime(1) = 0
value = Root,Anim
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = HitOverride
trigger1 = 1
attr = SCA,NA,NP,NT
;attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,AA,AP,AT
slot = 1
stateno = 9000
time = -1
ignorehitpause = 1
persistent = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = NotHitBy
triggerall = (Root,Life > 0) || (Root,Stateno != 130) || (Root,Stateno != [140,170]) ; Insert not hit states here
trigger1 = time = 0
value = SCA,NA,NP,NT
;value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,AA,AP,AT
time = 15
ignorehitpause = 1
persistent = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = NotHitBy
trigger1 = (Root,Life <= 0) || (Root,Stateno = 130) || (Root,Stateno = [140,170]) ; Insert not hit states here
value = SCA,NA,NP,NT
;value = SCA
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = ParentVarSet
trigger1 = time = 0
trigger1 = GetHitVar(damage)
v = 11 ; Variable range = 0-59
value = -2 ; Amount of damage will be done on GetHit
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = ParentVarSet
trigger1 = time > 0
v = 11 ; Variable range = 0-59
value = 0
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 9000]
type = Turn
trigger1 = P2Dist X < 0
ignorehitpause = 1
persistent = 1
pausemovetime = 9999999
supermovetime = 9999999

;--------------------------------------------------
; end of super armor v2 
;--------------------------------------------------
